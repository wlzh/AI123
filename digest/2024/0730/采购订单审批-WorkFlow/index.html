

<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="theme-color" content="#f9f9f9" />

	<title>采购订单审批-WorkFlow 作者： 老周曰天曰地 来源： 老周曰天曰地 1.开发 WorkFlow 开发 SCP WorkFlow需要在Webide full-stack中。 需要将Portal服务和SAP Web IDE full-stack服务开启。 打开workflow编辑器 打开WebIDE服务，设置页面的Feat  | AI123| ai工具网址导航,ai最新产品</title>
	<link rel="shortcut icon" href="/assets/images/favicon.png" />
    <meta name="keywords" content="chatgpt,AI,AI聊天,AI文本生成,AI绘画,AI编程,AI电商" />
    <meta name="description" content="AI123 网址导航 | 免费chatgpt 汇集各类先进的人工智能产品，旨在帮助用户更快速地了解和使用这些产品,轻松地浏览不同领域的AI产品，包括语音识别、图像处理、自然语言处理。" />
    
    <meta name="baidu-site-verification" content="codeva-cCAOSG8MBO" />
    
    <link rel="stylesheet" id="block-library-css"
        href="/assets/css/block-library.min-5.6.2.css" type="text/css" media="all" />
    <link rel="stylesheet" id="iconfont-css" href="/assets/css/iconfont-3.03029.1.css"
        type="text/css" media="all" />

    
    <link href="/scss/style.min.css" rel="stylesheet" />
    
		    <link rel="stylesheet" id="iowen-css" href="/assets/css/style-3.03029.1.css"
        type="text/css" media="all" />
    <link rel="stylesheet" id="custom-css" href="/assets/css/custom-style.css"
        type="text/css" media="all" />
		
		<link rel="stylesheet" href=/plugins/font-awesome/css/font-awesome.min.css />


    <link rel="stylesheet" id="fortawesome-css" href="/assets/fontawesome-5.15.4/css/all.min.css" type="text/css" />


    <script type="text/javascript" src="/assets/js/jquery.min-3.2.1.js" id="jquery-js"></script>
    <script type="text/javascript" src="/assets/js/content-search.js"  id="content-search-js"></script>

    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2073588164294660"
     crossorigin="anonymous"></script>

	
    <script>
        

		var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?8450bc732b2a86f7e4aec4ebd9fd8252";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();

        
    </script>
    

    
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-7071W80M2K"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-7071W80M2K');
    </script>

</head>


    <div class="page-container">
	
	<div id="sidebar" class="sticky sidebar-nav fade animate-nav" style="width: 170px">
        
            <div class="modal-dialog h-100 sidebar-nav-inner">
                <div class="sidebar-logo border-bottom border-color">
                    
                    <div class="logo overflow-hidden">
                        <a href="https://ai123.869hr.uk/" class="logo-expanded">
                            <img src="/assets/images/bt8-expand-light.png" height="40" class="logo-light"
                                alt="AI123| ai工具网址导航,ai最新产品">
                            <img src="/assets/images/bt8-expand-dark.png" height="40" class="logo-dark d-none"
                                alt="AI123| ai工具网址导航,ai最新产品">
                        </a>
                        <a href="https://ai123.869hr.uk/" class="logo-collapsed">
                            <img src="/assets/images/bt.png" height="40" class="logo-light"
                                alt="AI123| ai工具网址导航,ai最新产品">
                            <img src="/assets/images/bt.png" height="40" class="logo-dark d-none"
                                alt="AI123| ai工具网址导航,ai最新产品">
                        </a>
                    </div>
                    
                </div>
                <div class="sidebar-menu flex-fill">
                    <div class="sidebar-scroll">
                        <div class="sidebar-menu-inner">
                            <ul>
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#00834a9dd147b04c5d53d4368cdb0b57" class="smooth">
                                            <i class="fas fa-sun fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>本月热门</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#db0311e7ecfedd24d157f0ceb4a0897f" class="smooth">
                                            <i class="fas fa-star-and-crescent fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>热门网站</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#21b5cbb2c769010fec3ce029a5f8a4a3" class="smooth">
                                            <i class="far fa-star fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>国内热门</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#8310718935e8ec25ce0350de01e3f7dc" class="smooth">
                                            <i class="fas fa-phone fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>对话工具</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#d58e850d9115797306c2edf61ac6ddd8" class="smooth">
                                            <i class="fas fa-newspaper fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>写作</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#2a7418a5f8f1ca4e054364a9300657df" class="smooth">
                                            <i class="fas fa-image fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>图像生成</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#7808a68ee1b34dab43011429a12de19e" class="smooth">
                                            <i class="fas fa-image fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>图像处理</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#6729afc51f5ac49a828812fa0eb0c82f" class="smooth">
                                            <i class="fas fa-video fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>音视频</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#e5ce844860451fff3faf3d8f8894971d" class="smooth">
                                            <i class="fas fa-music fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>音乐生成</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#db53804b7d726967c58fcc8c9ca03d27" class="smooth">
                                            <i class="fas fa-language fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>办公</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#47b7af9547e034d28fe6f6d439968ac8" class="smooth">
                                            <i class="fas fa-copy fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>提示词</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#41282bf95e43c64d579757573a03cdde" class="smooth">
                                            <i class="fas fa-code fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>编程</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#fd71852fd52d5e18ef4f9a252f1eac58" class="smooth">
                                            <i class="fas fa-search fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>AI搜索</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#81b1637fbe47625dbdf2094acd3b6683" class="smooth">
                                            <i class="fas fa-language fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>文本翻译</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#2e9ba3fa6e1ed0e9311b3e97f97f9a40" class="smooth">
                                            <i class="fas fa-book fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>学习网站</span>
                                        </a>
                                    </li>
                                    
                                
                            </ul>           
                        </div>
                    </div>
                </div>
                <div class="border-top py-2 border-color">
                    <div class="flex-bottom">
                        <ul>
			    <li id="menu-item-212"
                                 class="menu-item menu-item-type-custom menu-item-object-custom menu-item-212 sidebar-item">
                                 <a href="#friendlink" class="smooth">
                                     <i class="fab fa-staylinked icon-fw icon-lg mr-2"></i>
                                     <span>友情链接</span>
                                 </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>


<div class="flex-fill grid-bg">
    <div class="big-header-banner">
        <div id="header" class="page-header sticky">
            <div class="navbar navbar-expand-md">
                <div class="container-fluid p-0">

                    <a href="" class="navbar-brand d-md-none" title="AI123| ai工具网址导航,ai最新产品">
                        <img src="/assets/images/bt.png" class="logo-light"
                            alt="AI123| ai工具网址导航,ai最新产品">
                        <img src="/assets/images/bt.png" class="logo-dark d-none"
                            alt="AI123| ai工具网址导航,ai最新产品">
                    </a>

                    <div class="collapse navbar-collapse order-2 order-md-1">
                        <div class="header-mini-btn">
                            <label>
                                <input id="mini-button" type="checkbox">
                                <svg viewbox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                                    <path class="line--1" d="M0 40h62c18 0 18-20-17 5L31 55"></path>
                                    <path class="line--2" d="M0 50h80"></path>
                                    <path class="line--3" d="M0 60h62c18 0 18 20-17-5L31 45"></path>
                                </svg>
                            </label>

                        </div>

                        <ul class="navbar-nav site-menu" style="margin-right: 16px;">
                        
			<li >
				<a href="/">
                                    <i class="fa fa-home fa-lg mr-2"></i>
                                    <span>首页</span>
                                </a>
				<ul class="sub-menu">
				
				</ul>
			    </li>
			
			</ul>

                        
                        <div class="rounded-circle weather">
                            <div id="he-plugin-simple" style="display: contents;"></div>
                            <script>WIDGET = {
                                    CONFIG: {
                                        "modules": "01234",
                                        "background": 5,
                                        "tmpColor": "008000",
                                        "tmpSize": 14,
                                        "cityColor": "008000",
                                        "citySize": 14,
                                        "aqiColor": "#008000",
                                        "aqiSize": 14,
                                        "weatherIconSize": 24,
                                        "alertIconSize": 18,
                                        "padding": "10px 10px 10px 10px",
                                        "shadow": "1",
                                        "language": "auto",
                                        "borderRadius": 5,
                                        "fixed": "false",
                                        "vertical": "middle",
                                        "horizontal": "left",
                                        "key": "085791e805a24491b43b06cf58ab31e7"
                                    }
                                }
                            </script>
                            <script src="https://widget.qweather.net/simple/static/js/he-simple-common.js?v=2.0"></script>
                        </div>
                        
                    </div>

                    <ul class="nav navbar-menu text-xs order-1 order-md-2">
                        
                        
                        <li class="nav-item mr-3 mr-lg-0 d-none d-lg-block">
                            <script>
                                fetch('https://v1.hitokoto.cn')
                                    .then(response => response.json())
                                    .then(data => {
                                    const hitokoto = document.getElementById('hitokoto_text')
                                    hitokoto.href = 'https://hitokoto.cn/?uuid=' + data.uuid
                                    hitokoto.innerText = data.hitokoto
                                    })
                                    .catch(console.error)
                            </script>                           
                            <div id="hitokoto"><a href="#" target="_blank" id="hitokoto_text">疏影横斜水清浅，暗香浮动月黄昏。</a></div>
                        </li>
                        
                        
                        <li class="nav-search ml-3 ml-md-4">
                            <a href="javascript:" data-toggle="modal" data-target="#search-modal"><i
                                    class="iconfont icon-search icon-2x"></i></a>
                        </li>
                        <li class="nav-item d-md-none mobile-menu ml-3 ml-md-4">
                            <a href="javascript:" id="sidebar-switch" data-toggle="modal"
                                data-target="#sidebar"><i class="iconfont icon-classification icon-2x"></i></a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="placeholder" style="height:74px"></div>
    </div>




<body class="page-body boxed-container  io-grey-mode">
    <main role="main" class="flex-shrink-0">
    <div class="container">
        
        <div class="content">
            <style>
    body{
	    background: #f9f9f9;
	}

    h1, h2, h3, h4, h5, h6 {
        margin-top: 1.5rem;
        margin-bottom: 1.5rem;
    }


 
@media (min-width: 1000px) {
  .container, .container-sm {
    max-width: 800px;
  }
}

</style>

<div class="featured-post-content">

    <a href="/digest/" class="featured-post-title">
       AI 文摘
    </a>

</div>

<section class="blog-single">
  <div class="container">
    <div class="row">

      <div class="col-lg-12 order-1 order-lg-2">
        <article class="single-blog">
          <p class="title">采购订单审批-WorkFlow</p>
            <br/>
          <ul class="meta">
            <li>
              By <a href=https://ai123.869hr.uk/about>AI123</a>
            </li>
            <li>
              <i class="fa fa-clock-o"></i>
              July 30, 2024 - 2 min read
            </li>
          </ul>

          <div class="_1NCGf">
              <img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUFNHU2Lo1XpZeXOJSQonNnlmBvwIWWvlAAfXoWV2vfscoWyMzYsHFYQ/640?wx_fmt=png" width="640" >
          </div>
            <br>
            <br>
            <br>
          
          <div class="single-blog-content">
            <p>作者： 老周曰天曰地  来源： <a href="https://mp.weixin.qq.com/s/dBudKHYwc9XiRAwL-KdCCQ">老周曰天曰地</a></p>
<h4 id="1开发-workflow">1.开发 WorkFlow</h4>
<p>开发 SCP WorkFlow需要在Webide full-stack中。</p>
<p>需要将Portal服务和SAP Web IDE full-stack服务开启。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUBgiaMfFL5ZorgMobYqNMjokFzxBniak0Sh7hl8Ut6V6eFSmkVafiaafMw/640?wx_fmt=png" alt=""><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVU9iaNff0DSQG32MhBzAPNltTGxwufYHqCPYV4pbIdHyum1tyRazfG2OA/640?wx_fmt=png" alt=""><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUYricW1eiak49hibjsKgoPDy2vgTfumngLQ9Q2cKwEuqVX3zBNV3n9X9XA/640?wx_fmt=png" alt=""></p>
<p>打开workflow编辑器</p>
<p>打开WebIDE服务，设置页面的Features栏中开启 Workflow Editor。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUokX8iabx6iaPW6amTWPMEicYMxIyDU4slE2E5BvYWKUf3UmbxBtjUokGA/640?wx_fmt=png" alt=""></p>
<h4 id="11workflow-models">1.1.Workflow Models</h4>
<p>整体SAP Workflow界面如图，依次为项目目录窗口、设计要素实现窗口、设计要素属性窗口。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUWIvXxPcOEUHDMNtW1zXPcUTL9oz61xu4kP0teQH9JsC3S61qj4yy0g/640?wx_fmt=png" alt=""></p>
<p>SCP WorkFlow中要素分Tasks,Events,Gateways三大类。</p>
<h4 id="211-tasks">2.1.1 Tasks</h4>
<p>① User Task（用户待办）：内嵌UI5 App集成，主要与用户做交互。可以对Workflow上下文信息进行基于RESTful接口的交互操作。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUic0HoX5aBAd39wxmibC2G6ia1atxSFVTPl9AaOicfopOCT32ZXUZcI2sibA/640?wx_fmt=png" alt=""> <img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUSXD5xsfUWPYzH6LUwsO4d1TYLDnkF5Knib1LBHxs1tRmTspIsXZ3avw/640?wx_fmt=png" alt=""> <img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVU5iaXGfnEibricbMlyBOicpib9IEEnltjCiaBgsrMiaAhSic19kSlnYiadnR7okw/640?wx_fmt=png" alt=""> <img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUEhMxbVHNy96FHKX2aKTicQrXL8TPY2Qofh0VIXGmicZl2mHrn1yy4iblQ/640?wx_fmt=png" alt=""></p>
<p>User Task设置参数</p>
<p>Priority:用户待办优先级</p>
<p>Subject :待办大标题， 可以使用表达式 eg: ${context.subject}</p>
<p>Users :待办用户。可以使用表达式 eg: ${context.user}</p>
<p>Groups :待办用户组。可以使用表达式 eg: ${context.userGroup}</p>
<p>注意：Users 和 Groups可以同时设置，两者范围不相互影响，待办会同时存在以上的用户中。</p>
<p>HTML5 App Name : 待办Ui5界面App名称</p>
<p>SAPUI5 Component : UI5 Component名称</p>
<p>注意 : 表达式即指向Workflow下以JSON格式存储的上下文内容中某个属性或对象。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUG6FroGnedHOzicqXyxiaFYLZKFapWrxYDodK8FxhqfrUabMVvcLUXHEA/640?wx_fmt=png" alt=""></p>
<p>② Service Task（消费HTTP服务） ： Workflow消费服务的要素。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUHdY6kVbCPTfkXic0D74YVsjPLe5GRsIoYaK8tqGDy85SdcSrR2ku2Bw/640?wx_fmt=png" alt=""> <img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUcD2zdmARojHgvTNSictYoEpeRSVEbymZjOCOhMJFnfL4nA82skAWg5w/640?wx_fmt=png" alt=""></p>
<p>Service Task设置参数：</p>
<p>Destination: 服务的目标地址。在SAP cloud platform cockpit中定义，即上文中添加的Destination。</p>
<p>Choose a Service from: 服务类型，一般选择Others。</p>
<p>Path: 服务的路径,Workflow访问到服务资源的相对路径。</p>
<p>HTTP Method: 通用的HTTP方法，POST、GET、PUT、DELETE、PATCH。</p>
<p>Path to XSRF Token（POST、PUT、DELETE、PATCH）: 获取服务Token的相对路径，避免跨域访问服务资源的问题。</p>
<p>Request Variable(POST、PUT、PATCH): 传入Service服务的参数。可以使用表达式。</p>
<p>Response Variable : Service获取数据后写入Workflow上下文内容的属性名称。可以使用表达式。</p>
<p>③ Scrpit Task（操作工作流属性）: 读写工作流上下文内容，获取工作流状态信息等。Script中会指向一个Script文件，在文件中可以对工作流的属性进行访问和操作。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUz9veDoQibkx26gtvsic8YNGGydRBkqwsUJtDTR9HibVysTOgn61I2veIg/640?wx_fmt=png" alt=""> <img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUiadhDPlcmrrWMmS01rxPgicmToria3udeKYOvdlkz1Jp4taS0pFicRhfBA/640?wx_fmt=png" alt=""> <img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUqhV6QCxjkAy1grGd0tXkFu1pkl966Owo76FpUlHjQvbdm3o5TJk3Hg/640?wx_fmt=png" alt=""></p>
<p>④Mail Task（发送邮件）:通过预先在CP中设置好的邮件服务器发送邮件，可以发送HTML格式 和纯文本格式的邮件。</p>
<p>注意：发送HTML格式内容邮件，需要新建HTML页面。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUDwZbZE1cpKzOwicouibN0FGGOHMsxMZRPO1icEM5qFKZkicBNoqmmO67Sw/640?wx_fmt=png" alt=""><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUH9lUnQ6ia97yKiagqaYicdiaa9WIIzd8JTzXsa8H21F2U4z0VmdLOPMqsg/640?wx_fmt=png" alt=""></p>
<p>邮件服务器配置：</p>
<p>在Workflow服务配置页，找到Destination页签</p>
<p>配置参考</p>
<p>注意：SAP CP Workflow支持的邮件服务器：①SMTP 587或465端口 ②支持STARTTLS协议 ③不验证授权码</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUU2L6ofC0IjRMvMgjkbZQBH7r3OBER9vh9iaEn3kTI2Ph67sMYQlAI6w/640?wx_fmt=png" alt=""></p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUH2AOS98fdnj23PeWmrgLUM6a3Ff3ZyZqDCtkib1mQoZwGNwJEKtYhsg/640?wx_fmt=png" alt=""></p>
<h4 id="212-gateways">2.1.2 GateWays</h4>
<p>① Exclusive Gateway：排他选择。</p>
<p>注意：必须指定一个默认分支。</p>
<p>② Parallel Gateway:并行选择 。</p>
<p>用作分支工作流和合并工作流分支。</p>
<h4 id="213-events">2.1.3 Events</h4>
<p>①End Event：结束事件</p>
<p>工作流的分支结束节点，所有的End Event结束后，工作流才终止。</p>
<p>②Terminal Event：终止事件</p>
<p>工作流的终止节点，结束整个工作流，不管工作流的其余分支流程。</p>
<p>③Time Event：时间事件</p>
<p>设置的时间后触发的事件</p>
<h4 id="12workflow-example">1.2.WorkFlow Example</h4>
<h4 id="221-设置审批用户组和授权审批角色">2.2.1 设置审批用户组和授权审批角色</h4>
<p>本例中设置两级审批，需要新建两个用于审批的用户组。并将用户组分配至工作流审批角色中。</p>
<p>①设置审批用户组。</p>
<p>转到SAP Cloud Platform Cockpit 中“连接性”页签下“权限”页签。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVULXkRSkPogrRPNGw8Yx3yDUrAE6v93pCoG1OAETGf9icVbGMVcG1ucJg/640?wx_fmt=png" alt=""></p>
<p>“权限管理”Block转置“组”页签。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUOCPcV0slibETq44giaApEyMia78jvu34mrQThTkuAPGjdVVJt9WFoibVUA/640?wx_fmt=png" alt=""></p>
<p>分别创建用户组 FirstGroup , SecondGroup。同时在右下角“单个用户”分配中，将所属审批节点的账号分配至相应用户组。</p>
<p>注意：用户分配中填写的账号是S或P账号，非子账号</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUHUliaxXjBh422cUKdRaIpWO4zefHNW50ujujJAiaArwRdbbGpZI8QueQ/640?wx_fmt=png" alt=""></p>
<p>②为用户/用户组设置审批角色</p>
<p>转到Workflow服务，点击“配置服务”。转到“角色”页签。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUzPMULI1Fc5JNWBwoGBPaP3rb8Tv5HM0ghzibibsjzbS16gc0G83BO4LA/640?wx_fmt=png" alt=""> <img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVU0UbyqDdbwU5eM6Dg4OZtFc7oIfeLXS0oIhlr2079ibbzOkS1iaiahhyaw/640?wx_fmt=png" alt=""></p>
<p>目前有四种权限:</p>
<p>WorkflowDeveloper : 开发工作流</p>
<p>WorkflowAdmin : 管理工作流</p>
<p>WorkflowParticipant : 工作流参与者</p>
<p>WorkflowInitiator : 工作流发起者</p>
<p>本例中：</p>
<p>①分配WorkflowAdmin给管理员账号，便于日志查看，操作工作流；</p>
<p>②分配WorkflowInitiator角色给一位单独账号；</p>
<p>③分配WorkflowParticipant角色给一二级审批节点用户组。</p>
<p>注意：用户分配中填写的账号是S或P账号，非子账号</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVU0hibqK1YwquZGySKz9y9gEg71MPe68oJ5icujhyia5hJU9DRQsu5bcZWA/640?wx_fmt=png" alt=""><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVU0ncCyibY31gyNPfjMPSKr0eYicaRGib9libJF18TFtBRKnv60mzD6thpJw/640?wx_fmt=png" alt=""></p>
<p>至此，Workflow审批账号权限分配完毕。</p>
<h4 id="223-新建workflow项目">2.2.3 新建Workflow项目</h4>
<p>WebIDE 中新建一个Workflow项目，在选择界面Category栏选择Business Process Management创建一个新的Workflow。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUy5j2PceTXic4zMs4L4ZpXDEZADiaY5EDdwtoMWHA9nh5ltIiauPzdX4tA/640?wx_fmt=png" alt=""><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUR5lReficOiaWWV0MTOzcbtJeW3cCDWMQMYweZ8UP1Tjia7nicaNiar8xcEQ/640?wx_fmt=png" alt=""><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVURGmAnoN7JaAz72gwl5ewhJUXwSkJnt5J1ZXdXFUkUaVKA5xXAZzUww/640?wx_fmt=png" alt=""></p>
<p>出现StartEvent至EndEvent1的默认流程。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUb5kBKYfFTZghBA3ibuekpTQhMY64ms1DFL9UuBK6wB6mQz1Vzl1UgYA/640?wx_fmt=png" alt=""></p>
<h4 id="222-使用service-task消耗odata服务-get方法">2.2.2 使用Service Task消耗OData服务 Get方法</h4>
<p>①在StartEvent图标中选择添加ServiceTask。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUcW9j7jxefrP7rBXqC2fD9xv4pnZJdJkGBu3qRW6m9CgiadWSCSKhdNw/640?wx_fmt=png" alt=""> <img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUVuKwpuBVGO1wXV81ETJrKq2cf4ib2yRxehdefQ3DvCB0NJYpCqCGwWg/640?wx_fmt=png" alt=""></p>
<p>②修改Service Task属性。修改Service Task的名称，在Detail 页签下，配置Service Task 消耗的Odata服务路径。</p>
<p>Destination：输入在SAP CP Cockpit 中配置的访问到SAP Cloud Connector的目标。</p>
<p>Choose a Service from: 选择“Others”。</p>
<p>Path: 选择OData服务路径。</p>
<p>注意：由于调用OData Get_Entity方法，需要传入参数订单抬头，使用表达式获取Workflow上下文的订单号属性 &lsquo;${context.purOrdId}&rsquo;。</p>
<p>例：/sap/opu/odata/sap/ZODATA_WORKFLOW2_SRV/purHeadSet(&rsquo;${context.purOrdId}&rsquo;)?$format=json</p>
<p>HTTP Method: 选择GET方法。</p>
<p>Response Variable：以表达式形式输入一个上下文节点属性，Workflow会将Odata服务返回数据Modify式写入上下文节点属性下。</p>
<p>我们将获取的OData集存放至Workflow上下文purHead属性中。表达式：${context.purHead}</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUa9Zz1ickeLjF268ksbib1YoBKo5rvQiaoY18uuSRIjV6Szqgh56mFT8icQ/640?wx_fmt=png" alt=""> <img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUgMtlAITshhfuHP1YREJSia4jERTg6TLyVaM9XHeiahmajia71L48BHnRQ/640?wx_fmt=png" alt=""></p>
<p>后续在Workflow日志中，获取数据保存形式如图所示：</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUh3WPwf6hCfBj7amo80rEdCc3TB1sQag1j8hALPtibibAH63fP1I6sdGQ/640?wx_fmt=png" alt=""></p>
<h4 id="223-使用parallel-gateway并发处理service-task">2.2.3 使用Parallel Gateway并发处理Service Task</h4>
<p>实际过程中，如果多个Service Task之间没有逻辑关系，可以使用Parallel GateWay进行合并，同时进行几个Service Task。达到并行效果。</p>
<p>本例中将获取采购订单Head，和与之有Association联系的Item进行并行操作。</p>
<p>①在StartEvent图标选择后续Parallel Gateway。名称为Split Purchase Order Service</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUK4WFu3arXDEt2ia58N8DcyFgvTzibnlZpzSpF6xh3q0welJunwu2ag7Q/640?wx_fmt=png" alt=""> <img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVU1C6De9LjAa12lWficItq9lxn2ICSSnDAiaNjgbSkOMoNdGR0GwnicWlkg/640?wx_fmt=png" alt=""></p>
<p>②在设计界面左边导航栏，拖动一个新的Service Task。命名为“Get Purchase Order Item”。</p>
<p>还是用到 Head的get_entity方法获取一个采购订单，通过OData的Navigate Property方式指向采购订单的Item明细。Path参数：/sap/opu/odata/sap/ZODATA_WORKFLOW_SRV/purHeadSet(&rsquo;${context.purOrdId}&rsquo;)/head_np_item?$format=json</p>
<p>将获取的OData集存放至Workflow上下文purItem属性中。表达式：${context.purItem}</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUxuyMia3fjgJF91Ms9WfXXjQ2FsjMHd24btGY7m1sMvQ6WXG1r8iazbUg/640?wx_fmt=png" alt=""> <img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVU0TAUH2XZ7JbZcTNmag9GIvKibfnmJGicduTKBeRZYibSYzfbaDyhWQa3Q/640?wx_fmt=png" alt=""><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUkGLAXnqVeITSlsN75umxzgkyScnjnQtHZUIuqjvOIlPVVKSRSHuRaQ/640?wx_fmt=png" alt=""></p>
<p>后续在Workflow日志中，获取数据保存形式如图所示：</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVU9HpH3W4K6ScCaFGJwicqFHS2DjEtX6OUHCdQkOuYdhc7br0m245jf8A/640?wx_fmt=png" alt=""></p>
<p>③ 将Parallel Gateway流程同时连接至 “Get Purchase Order Item” 的Service Task。</p>
<p>如图选中箭头图标，将流程画线连接至另一个Service Task中</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVU4xsoWxgibnxicLbEnFhbbL3u0PibCvIiczf4Moiacm0q45zREHzPgjmLL8A/640?wx_fmt=png" alt=""><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUQkSURmdbnDiaRh32fmzl3lM9pmia3T0EiaxagPrIPoRMNAjPiawa9OYRmg/640?wx_fmt=png" alt=""></p>
<p>④ 创建一个Parallel Gateway 将分支流程合并。</p>
<p>Parallel Gateway也可以将两个分支流程合并，然后进行后续流程。</p>
<p>在Get Purchase Order Head 节点添加一个Parallel Gateway名称为Merge Purchase Order Info，并将Get Purchase Order Item 节点连接至新建的Parallel Gateway中。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUmYHfHRMiaRZS2BR0X9F8X1W4ogxeMDjLZwc1ARJcEkY1NbgpbdQjBkw/640?wx_fmt=png" alt=""><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUbsRaBjfm2iarBQrfLDEwt5ibXibgpXFQE2FkIQX7Ciae2hOwjgP42mK7cQ/640?wx_fmt=png" alt=""></p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVU1nxichCwZoetDs2QcFsRVKaMNwdNCvg8GjzTF3x3Pu9AyPVPQiaibXNgA/640?wx_fmt=png" alt=""></p>
<h4 id="224-使用user-task创建待办">2.2.4 使用User Task创建待办</h4>
<p>使用User Task承接上级节点，工作流会暂存至待办中。在待办App 界面我们可以内嵌自开发的Ui5 App。Ui5App可以对工作流上下文内容进行显示，也可以与工作流交互，更改工作流状态。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUtQRUA4xcOxkhASZPYgzS4QiaWoHXexy2iafictsffNUstjYrXSzXD7Xww/640?wx_fmt=png" alt=""></p>
<p>2.2.4.1 新建User Task</p>
<p>承接上文设计节点，在 Merge Purchase Order Info节点后新建User Task。名称First Level Approval</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVU9ibQKSbPqrQ8QLFibUUBuWCChPwBtVEZ3JgFLtWcA80ol2b9ficB0bNPw/640?wx_fmt=png" alt=""> <img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVU2kS5YJutrBqsicLoZzxZfVtfHVXmSwud3Mn4uViaaGaewPsNBvTFrP4w/640?wx_fmt=png" alt=""></p>
<p>填写User Task 属性：</p>
<p>Priority : 设置待办优先级。</p>
<p>Subject : 待办条目的标题，设置为 “采购订单${context.purOrdId}审批”。</p>
<p>Users : 设置表达式 ${context.approveUserId} 这里可以单独设置审批用户，与用户组互不影响。</p>
<p>Groups : 设置用户组FirstGroup。这里也可以设置表达式，使之变成可配置形式。</p>
<p>Due Date : 设置到期日。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUb5WUrVwYHgQu8ZQlH5Zibn4aFsxHcEtC15C7wX3uaTt2hq4MeFNWN9A/640?wx_fmt=png" alt=""></p>
<p>2.2.4.2 创建Custom Ui5程序</p>
<p>①WebIDE新建一个SAPUI5 Application。这里UI5程序数据来源为Workflow的上下文内容，Ui5 App不消费OData。</p>
<p>新建的Ui5程序在左侧项目窗口。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUsvIyVExQMRWpiawqQ9dZBkxvGfhDRw5oNXzRB8uTbOQp4D5HdSQKOWg/640?wx_fmt=png" alt=""><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUZ9mB0CavCvdae87Z2H776RqMwojUE1WcTLdnanak4vRhQS6jL1zWPQ/640?wx_fmt=png" alt=""></p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUeTviakk5TibuRyGOGU7OF5HWSZcZ2O1GSBibVciaQZNMV6csfEhK8bbzmw/640?wx_fmt=png" alt=""><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUYVyD9gYtJicTvPicU4ykoADgZxIuz66VLwhbqVEwEzrnFl6godIASgfw/640?wx_fmt=png" alt=""></p>
<p>②Component.js中，使用RESTful接口获取WorkFlow上下文内容。</p>
<p>将上下文内容绑定到Component的jsonmodel中，以便后面XML页面数据绑定。</p>
<p>Path路径&quot;/bpmworkflowruntime/rest/v1/task-instances/&quot; + taskId + &ldquo;/context&rdquo;。</p>
<p>TaskId为工作流实例号，区分每个启动的工作流实例。context为工作流上下文最上层节点。</p>
<p>在init()方法添加代码如下：</p>
<p>1)获取待办的startupParamerters参数（可以获取到待办ID，工作流上下文数据），并绑定至“paramModel”JSONModel中。</p>
<p>2)获取Context数据，绑定至Component的默认JSONModel中。</p>
<p>3)在paramModel模型中新建一个属性为note，存储界面上用户填写的审批意见。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUcwo2icI304ibbNDhgick09xsk1CC9Zh4zbQeRGaYOnbic1j4jlsFwStf0g/640?wx_fmt=png" alt=""></p>
<p>③在View的xml文件中添加表头ObjectHeader控件。绑定数据集purHead，路径为/purHead/d/&hellip;</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUBDzIxKxvkHYgTjmb4sqodFuhU2zDl0zpuHJZFYX264jNbxmW0sLchQ/640?wx_fmt=png" alt=""></p>
<p>④在View的xml文件中添加表控件Table,命名控件sap.m。绑定数据集purItem，路径为/purItem/d/result/&hellip;</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUk0fInLc63laaaDs5PkBhFlT2uRhR4Rz25wfayMLKjGiceHusdZvQN5A/640?wx_fmt=png" alt=""></p>
<p>绑定数据后的实际效果如下：</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVU8va7fhXBsuv96C6Igj9hZaQXrBJgZlCCza271nMYnAst12uNT9AqSw/640?wx_fmt=png" alt=""></p>
<p>注意：Ui5 App内嵌在收件箱中，需要调整页面比例，避免被收件箱Overflow Footbar遮挡。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUGZK15gL8xUeE4YdcVYXFnEsdXxeXYliar4ialWRpxcUFVNAgqG2mgiccg/640?wx_fmt=png" alt=""></p>
<p>在Layout Editor界面设置UI5页面高度。</p>
<p>右击该页面，选择Open with Layout Editor.</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUE42J8TnV1g12y5IlBAhAZIPDnhibOSBlwrziaZTo4uf7YgMFYkNc4R0A/640?wx_fmt=png" alt=""></p>
<p>设置合适的高度比例，使页面适合收件箱大小。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUlxrnibpiayUCtNGW7uh0NoSTRxXLKnYEichiacDAzLmialhzWLgdKaibkRQQ/640?wx_fmt=png" alt=""><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUH8Vp6BtoKyqMZJ1zPsa68xdW7IbfGPxIxhFqoQJh72IX6mo9zYygwQ/640?wx_fmt=png" alt=""></p>
<p>⑤添加审批记录Tab签</p>
<p>在Ui5待办程序的View中添加一个Tab用来显示每次待办记录下的审批记录。在View.xml文件中添加Tab控件。</p>
<p>审批记录通过时间顺序依次排开，形成一条时间线。这里添加 TimeLine控件用来显示审批记录。</p>
<p>将TimeLine和Table控件分别放在不同Tab签下。</p>
<p>⑥添加审批意见Tab签</p>
<p>在Ui5程序界面添加审批意见填写的控件。这里使用TextArea控件，并放在单独页签下。</p>
<p>为其绑定JsonModel。</p>
<p>⑤添加审批通过，拒绝按钮。</p>
<p>有两种方式可以添加按钮，一种在收件箱APP上集成，即调用inboxAPI方法添加按钮和事件。</p>
<p>另一种在Ui5 App上添加，在按钮事件调用工作流Restful接口即可。</p>
<p>这里在在收件箱APP上集成，在Component.js文件中添加代码Approve和Reject按钮。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUwtfNQ3dfRnm9FUibXpI2SNUSBibrNQo40mOkoO8460zG32ev0ZPbk8XQ/640?wx_fmt=png" alt=""></p>
<p>⑥给按钮添加事件操作工作流</p>
<p>审批操作包含两部分：</p>
<p>1)给工作流上下文添加审批结果文本。</p>
<p>2)记录当前审批记录，存至JSON数组</p>
<p>2)结束当前待办状态，将工作流当前节点状态设置为Completed。</p>
<p>主要通过三个方法：_fetchToken , _completeTask , _refreshTask。</p>
<p>_fetchToken: 获取XSRF token，用于Workflow API 的post方法认证。</p>
<p>_completeTask: 调用Workflow API方法完成当前待办任务，将审批结果传递至Workflow上下文中。</p>
<p>_refreshTask: 清空收件箱中当前待办。</p>
<p>_completeTask方法：</p>
<p>1)获取token。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVU6faFD2sCeW7Zic9nwEFFE8tBbOobGtcRq86icPH1ycYtQcqvFe0O8DVA/640?wx_fmt=png" alt=""></p>
<p>2)重新获取context上下文。使用this.getModel().getData();就能获取到Component绑定的默认JSONModel，即工作流上下文context。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUgIj38piaGrs67JtezsIhMhNcBftUgcJDBcQpOvaUqrCsF18oPnuTgwQ/640?wx_fmt=png" alt=""></p>
<p>3)添加审批记录</p>
<p>设计回传erp的context.post结构与CREATE_DEEP_ENTITY中方法用到的复杂结构一致。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUsxPsjrqxnj17dtVeYUNMt4TzWjKGLpGEveD3MrAxhPHWXVb9q4FJFA/640?wx_fmt=png" alt=""></p>
<p>4)调用工作流API，将当前待办设置为COMPLETE，并返写Context。</p>
<p>注意oContext不是sap.ui.model.json.JSONModel实例，而是一般json实例，才可以使用JSON.stringfy方法。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUEHV0F3LIWmVYylzgvhMXlg5pDiaq5LMSeriagibsWBtqUic856gk1q4dqg/640?wx_fmt=png" alt=""></p>
<p>5)调用_refreshTask，刷新收件箱。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVU8RibmFGiavPdfcpQKlHV7XNtdytpUVR3ia5w2r8HYUfyIaJTU1Tf9q1kg/640?wx_fmt=png" alt=""></p>
<p>代码截图：</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUiaUYSouXdM996UhL4OoqCT7gr9Mvzsqfr0UK1XguHqk77ymEuicpp8iaQ/640?wx_fmt=png" alt=""></p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUDOGvIfpzQdtGhe0h32HqaWIZboFKtT0XLvQ5ibLqicEaTOTNuHibPE1lA/640?wx_fmt=png" alt=""></p>
<p>⑦将Ui5程序发布至SAP Cloud Platform中</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUfQ23MlZTJyUJyWogdMBLKbG4pu41ljkoLvgnARW29RtFa3V2AQa8oQ/640?wx_fmt=png" alt=""></p>
<p>⑧程序代码</p>
<p>不免费提供？公众号联系？</p>
<p>2.2.4.3 Custom Ui5 App嵌入User Task</p>
<p>返回至First Level Approval待办，在USER INTERFACE 页签设置Ui5 APP名称和路径。</p>
<p>点击Select按钮，弹出对话框，选择Ui5项目和SAPUI5 Component路径。</p>
<p>注意：Application Name 需要与 SAP Cloud Platform Cockpit中刚发布的UI5程序名称一致。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUk44KPUBgFGeNb6nqCHOfHgFtfA5ouFX28VA3iahPMeqkfgl5ib3v8xJQ/640?wx_fmt=png" alt=""></p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUSGhW4iaQiarIvv8Nd5PCUoic8LQGTC7IibLxkwP7allL5uEnNbwe1iaxrww/640?wx_fmt=png" alt=""><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVU1OjF3zWerKp0xjbrhiaAZQApde9e89LWssZNibk6KyPRUhzExrbcZj4w/640?wx_fmt=png" alt=""></p>
<p>设置完成后，User Interface界面如下。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUbKCV9SArDUicKbL2AS0ljVCmGiamgLbKJTpDZ7O0WvRpicRkBqVsj9EtA/640?wx_fmt=png" alt=""></p>
<h4 id="225-使用mail-task-发送待办邮件">2.2.5 使用Mail Task 发送待办邮件</h4>
<p>使用Mail Task可以设置邮件。邮件服务器Destination配置见上文2.1.1④。</p>
<p>①在UserTask后续分支可以选择一个Time Event。在Time Event上可以新建一个分支承载Mail Task。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUFNHU2Lo1XpZeXOJSQonNnlmBvwIWWvlAAfXoWV2vfscoWyMzYsHFYQ/640?wx_fmt=png" alt=""><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUpuTkbN2Wg6UujibjknN2lkHc4C2wKK0nSymdFHFKbw5rSKehQibiaVvZA/640?wx_fmt=png" alt=""></p>
<p>②在Time Event 属性界面把Due Date打勾。Due Date为等待时间。</p>
<p>设置等待时间为1分钟。并把Cancel Task取消勾选。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUQNLOvrdYRicMDz0xu2wI8mnnl44hVia60Xdlgd7OmJIPoACtuZMJadMQ/640?wx_fmt=png" alt=""></p>
<p>③在User Task 上的Time Event新建一个Mail Task。</p>
<p>选中Time Event。新建一个Mail task。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUzNFkLqwTr6N7DBMXrt9GG1NrFJ2QNsEiaRk98L4QS8uhEbmS8mQV0QQ/640?wx_fmt=png" alt=""><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUXKryZibqWBdZJEIU1gtTwq2UgWRtb2IRHBichndHsBdiaSiaoXJYiaovPRQ/640?wx_fmt=png" alt=""></p>
<p>④设置Mail Task</p>
<p>1)设置收件人</p>
<p>2)设置主题(Subject)</p>
<p>3)设置Body</p>
<p>在Configure Mail Body出选择HTML。新建一个HTML文件。</p>
<p>注意：在邮件Body中可以设置超链接直接跳转至待办页面中。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUr7BAfvSSANEVfoJjo4GJ2YK74dHuTt6IJGcDNg3uQTjBI6YsQzytLA/640?wx_fmt=png" alt=""></p>
<p>HTML文件示例：</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUEvb3sA74PYuUyEVc57WiamfHP5EYdQaV472My2iaNYuibhibicToHAXh8Ng/640?wx_fmt=png" alt=""></p>
<p>④添加End Event。</p>
<p>Mail Task添加后即对工作流增加了一条分支，需要在Mail Task节点后添加End Event以结束当前分支。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUKaCLSQYTVmtYaowxhOY97bnXpoVFstEKkhdIGMkgX2FyrHEdibicleJA/640?wx_fmt=png" alt=""><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUk5CgtNeJPY9obAO2t8kafJRicb1jYicKaxbAKuaPzqzJ3DoX1WvaSrHw/640?wx_fmt=png" alt=""></p>
<p>邮件示例：</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUK6ZD0jvgrZvWezNXTQECwpYx1EiaMZJO9w1wsOGribFliaqX9DG8sTocw/640?wx_fmt=png" alt=""></p>
<h4 id="测试workflow">测试Workflow</h4>
<p>至此，Workflow一级节点审批已经完成。</p>
<p>①将Workflow发布至SAP Cloud Platform。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUavb4z1FWoAth0jzUEMXhjibZqKybaDSlUaa2Pom6r2yCJdvq4fr5hBg/640?wx_fmt=png" alt=""></p>
<p>②返回SAP Cloud Platform Cockpit 界面中，转至Workflow服务。</p>
<p>点击打开Firoi快速启动板（转至Portal默认站点）。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUFctZprBrLnbVBGpCV5UuJXC57jBF1Mx0qiaJyb3ic1ZFKaiadPx4afmlg/640?wx_fmt=png" alt=""></p>
<p>③打开Workflow Definitions APP，定位至PurchaseOrderWorkFlow。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUkqj3qg64BJFoQDS0svibDApzgliaQCed6FY3WXJB4aWBNmCUf5BvrLmQ/640?wx_fmt=png" alt=""><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUg2eu8pVjlbCf86jbL259yN2h0s5WytrWXguW2qKGujnqP4PLjF96Jw/640?wx_fmt=png" alt=""></p>
<p>④点击启动新实例。</p>
<p>输入上下文{“purOrdId”: ”4500000017”}。“purOrdId”参数即上文Service Task 中作为参数传入 Odata Path的上下文节点。“approveUserId”即一级审批待办处设置的用户参数。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUicRryrN6njOes4Uu1HHYmtuE35fnhmnDM4vhPV5QHIFog6L9QpmJE9Q/640?wx_fmt=png" alt=""></p>
<p>⑤回到主界面，打开Workflow Instances App，查看新实例的日志情况。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVU4haues3tdlqAAl7t5Z7UtiasvoIbOhaZDRzkmHufdib4pThm5104CQ1g/640?wx_fmt=png" alt=""></p>
<p>⑥切换FirstGroup用户组下的账号，查看待办信息。</p>
<p>注意：只切换账号，不要从切换账号的launchpad中进去Workflow app。因为创建的Workflow待办只在Workflow开发者发布的Portal默认站点。即仍从开发工作流账号的Fiori Launchpad网站进入。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUUOKOkZAXtstiaDLVQypP5QtjV5OMwFbKuZtkwwlQAaPGnKk0icmSr3Fg/640?wx_fmt=png" alt=""><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUzvhjYb8veTuLexSnJaf98lgEnz98Fc6WNaibG7Gtnzfv7D3OXUicWpyw/640?wx_fmt=png" alt=""></p>
<p>点击审批后，切换回带有WorkflowAdmin角色的账号查看完成日志。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUJicF08ozb5C3UYSVq6DT0jgibGtWrGOMSgRDTGeZCCTKLkiaOskWlrsKw/640?wx_fmt=png" alt=""></p>
<h4 id="226-使用exclusive-gateway区分审批结果">2.2.6 使用Exclusive Gateway区分审批结果</h4>
<p>Exclusive Gateway 为排他处理分支，与Parallel Gateway不同的是，Exclsive Gateway的分支不能同时处理，且必须要有一个默认分支。</p>
<p>本例中一二级待办的审批结果分为True 和false。需要用Exclusive Gateway将两种不同的审批结果流转至各自的节点。</p>
<p>2.2.6.1 新建Exclusive Gate和另一User Task</p>
<p>①First level Approval 的 User Task 后面新建Exclusive Gateway节点名为Check Approved。添加完之后，Check Approved 节点只有一条默认流程流转下去。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUsIf78REE79kg6Y3lt8ZibThhOZbxUv6VD5QTiaoOicakFZ8waJqUzDlTg/640?wx_fmt=png" alt=""> <img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUxcx2c053uZLP0E7LcmDtCYtTkZvyZBTiaUBBjlZ6OibicuFenEWQUpF4A/640?wx_fmt=png" alt=""></p>
<p>②在Check Approved默认流程后添加二级审批待办界面。添加一个User Task 在Check Approved 后面。</p>
<p>设置名称 Second Level Approval。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUqmQbgxQVhl2jwjia7IomyibRt79Z6Jj6ZDhicVclzeOficNE6OgEbVZ5pg/640?wx_fmt=png" alt=""> <img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUdxmPuIccLsC2uZqib4hfEUEfiaJ0lS2Nvb4icPqXicNZ31V1U0p06Mw0wA/640?wx_fmt=png" alt=""></p>
<p>③设置 Second Level Approval 待办属性。</p>
<p>Subject: 设置为 二级审批采购订单${context.purOrdId}。</p>
<p>Groups : SecondGroup。</p>
<p>USER INTERFACFE : 待办审批界面与一级审批一致，设置相同的Ui5 App即可，也可以设计一个新的待办审批界面。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUV7NL7iaQWFOX8Hk1icH5oUWciaAKIgZ2SH9AGmMIxzoRPW0KODydx3bSw/640?wx_fmt=png" alt=""> <img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUNkUoChxiabyUkB9B62KjhDIlknKsPNqMZIpNgwbPRafIH02oDv7e4AA/640?wx_fmt=png" alt=""></p>
<p>④添加另一分支待办界面。</p>
<p>审批拒绝后，需要将审批流程转至审批流程发起人的待办中。这里需要新建一个User Task节点承接此分支流程。</p>
<p>新建一个User Task 名为 Rejected Box。将 Check Approved 的Exclusive Gateway 同时连接至 Rejected Inbox。设置参数：</p>
<p>Subject：被拒绝采购订单 ${context.purHead.d.Ebeln}</p>
<p>Users : 填写流程发起人，这里需要获取Workflow信息 ，表达式为${info.startedBy}</p>
<p>注意：工作流信息，API接口内容等查阅https://help.sap.com/doc/72317aec52144df8bc04798fd232a585/Cloud/en-US/wfs-core-api-docu.html#api-UserTaskInstances-v1TaskInstancesTaskInstanceIdPatch</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUCuzMtum4ReVx6ic8YycGjHOfw41EdbracxdZ7tIMmsicanUvOzkvndjQ/640?wx_fmt=png" alt=""> <img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVU2yZXyr6fib2ovIzgJj0J9nkn6ELfxR1eBYYxMbLVlDCatEDOaK6a7dQ/640?wx_fmt=png" alt=""></p>
<p>⑤将Check Approved 新分支连接至Rejected Inbox。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUrJ6Y8DiaiaLn3hacsEUkuhBQdNT9YBshKPdJfLRnuOPjY38aSZfCOgsA/640?wx_fmt=png" alt=""> <img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVU8AjTkFkQpdGibgAzzf7IbyFFc9lxn9URv5iasOjpqEEzHSQ1NXeT8ViaQ/640?wx_fmt=png" alt=""></p>
<p>设置默认分支。点击Check Approved 到 SecondLevelApproval 的流程分支线，设为默认分支，并命名为Approved。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVU7ACm1o52x7t7BwvP8aGeYKNbBC6GVOZ1l48ypCrnByuW5J2dZPvTLw/640?wx_fmt=png" alt=""></p>
<p>点击 Check Approved 到 Rejected Inbox流程分支线，命名为Rejected。Condition设置：表达式为${context.approved == false}</p>
<p>注意：Condition设置参阅https://help.sap.com/viewer/f85276c5069a429fa37d1cd352785c25/Cloud/en-US/9f91b1c0fac3414d9cba1015dea381f1.html</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVU8r2qJe6N5JiaIFhtjsu4UPFlkfZKGFUuS59IffB4HBzNdkZmA18IerQ/640?wx_fmt=png" alt=""><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUGVS1Aj3UViazIzJoSTQqV8PUTen5OnQhPkUtNKhYoC9nBDiaYjBOIQQA/640?wx_fmt=png" alt=""></p>
<p>注意：Exclusive Gateway 当出现多个分支时，必须设置一个默认分支流程。这是因为Condition 不一定全部满足，需要一个默认节点来解决Condition都不满足情况下确定Workflow的流转方向。</p>
<p>2.2.6.2 从Workflow Project创建Basic Ui5 App</p>
<p>Workflow 为User Task节点提供了基本UI Interface，创建基本UI Interface可以自动创建一个待办界面。</p>
<p>①右击Workflow项目，选择New -&gt;Workflow Task UI。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVURiaiadCBjwe8CRnSf1mzo4TAzH2L7j51xRTT951JGI6LDW6TJKicXXudA/640?wx_fmt=png" alt=""> <img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUiczzOIkTGKkbMPLovj34TENOia9GUMyqawjbJoicLACReXX8DVoPQicZLQ/640?wx_fmt=png" alt=""></p>
<p>②定制新建的Basic Ui5 App。</p>
<p>1)自动生成的Ui5APP，在Init()方法中将拒绝按钮去掉。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUAOCZZHOrnXENqmrgH774PtlM8mvuANr0ibhRozlBacsic6pX0vwD1gCQ/640?wx_fmt=png" alt=""></p>
<p>2)添加Item节点。</p>
<p>App.xml文件中添加以下代码。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVU2COqQlrh2hCjsE08zeH4oVxAEbsV06S2bfu2Xlwd7046lqcIlU08tg/640?wx_fmt=png" alt=""></p>
<p>Component.js文件中增加将context绑定至App的JSONModel操作，代码如下：</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUuTsica2uREViayDuXGDD5uNvzT8JfJcMLvw6ch7Vrxh5tbq4s6rEMY3g/640?wx_fmt=png" alt=""><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUxjYTI7GDY60docwrrwlcMrJFZgdaibTRfVZNUdEH7ichE3s5AP4mN92Q/640?wx_fmt=png" alt=""></p>
<p>③发布RejectUIScreen 项目。</p>
<p>注意：不能单独发布RejectUIScreen，需要将Workflow整个项目发布至SAP Cloud Platform。</p>
<p>右击Workflow项目，点击Deploy to SAP Cloud Platform。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUZ4ZmwI2fqD0qrAtROyW8OBEB7x1cBu799f3ib1MH466IRAdN3BYx3sg/640?wx_fmt=png" alt=""><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUHHrKytAlucNWZMeQ9F9XwoX3SBtIsPaNtM8bNZxtKlnbDBTshyE7nQ/640?wx_fmt=png" alt=""></p>
<p>2.2.6.3 形成退回待办与重新审批流程</p>
<p>①Rejected Inbox 设置Ui5 App。</p>
<p>因为上文将整个Workflow项目发布至SAP Cloud Platform。</p>
<p>这里在路径选择上需要选择新建的子文件夹 RejectUIScreen。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVU3BnJvs4ib9Or7gSREumBich7LQSvxGTyAFk84icBTMXomrR1dhDhFNK7Q/640?wx_fmt=png" alt=""><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUrAyCFlDuiaLsDFtMN6gHMiaFE8Gz3X4rCU1icpnwXSOkBOob3ibziaC43MQ/640?wx_fmt=png" alt=""></p>
<p>②连接Rejected Inbox至First level Approve</p>
<p>退回待办之后，流程发起人需要点击继续审批，这时候应该流转至一级审批节点，发送至一级审批人待办中。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUIUSPGgibwkPzLC1zwVh8Zw0Zu9GzNbbMeLOrmGFcvias35lhiawytfbLw/640?wx_fmt=png" alt=""> <img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVULO90DvAjGXwDd2hgG3RqM9sr9koE3ibJ15SiaFJhzfhK0wj760qbX6DA/640?wx_fmt=png" alt=""></p>
<h4 id="227-添加二级审批节点拒绝流程">2.2.7 添加二级审批节点拒绝流程</h4>
<p>同一级审批节点一直，添加一个Exclusive Gate。</p>
<p>然后Condition: &amp;{context.approved} false状态连接至上文建好的 退回待办界面 Rejected Inbox。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUZTC4EML96RedTA1INZPxhhGdA8SdyCRqZFJPQRllKrNicnTDCorQpQA/640?wx_fmt=png" alt=""><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUgoCflNUNvZ3uSqCcHgMB1ibyW6GBxVV4Mk7UpSupEUj6JxreTqvoSVg/640?wx_fmt=png" alt=""></p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUSFtQD0HuBOeVGeZdEebkmQUxKJMfsQgFPricGrUwF5iaNh2cG9hoadqw/640?wx_fmt=png" alt=""><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUzZM4xXpF2SOEloS09dGjKibDMkcic4mvdXBYnsYDPqKxgcicNybJfGKYw/640?wx_fmt=png" alt=""></p>
<h4 id="228-使用script-task操作工作流上下文">2.2.8 使用Script Task操作工作流上下文</h4>
<p>我们已经把审批记录传至context.post中。</p>
<p>二级审批节点审批通过后。需要把抬头数据返写到上文中context.post中。</p>
<p>第二个Check Approved 节点在Approved分支添加 Write Stop Info 名称 Script Task。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUibia8YB3NKG310nGPEpdg17Gq6xPSOiaDmtoBgOtibcQ1pkHViajEObKIjQ/640?wx_fmt=png" alt=""> <img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUVfosFiaE86r8qNBviayZokXKteMk4chVqsRdECuMZFMtORpcz7erBia1w/640?wx_fmt=png" alt=""></p>
<p>选择Create File 。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUPwdnVtz8FQS6yJUpBXNBUAxdviaRyopLjT4IughYialN98Ixtej6VMRA/640?wx_fmt=png" alt=""> <img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUia1pichh4QPubrvQ0RaKgJcgooUvOuu9OnibAXSNeibNib7MasDNOjhVtHg/640?wx_fmt=png" alt=""></p>
<p>添加如下代码，将head信息传入。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUjsX5CtGdRmiaCu4SibZDm7ubXkiaiaU8hE1ETm54vCibsq4Y2lb04Kuqong/640?wx_fmt=png" alt=""></p>
<p>这样post属性的结构已经跟OData Post的复杂结构一致了。</p>
<p>上下文数据和定义的复杂结构：</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUC0fPRFf7C0hhmCzR6m8l5EVBRpABCSgN8sMHeFiczco4RlbyEArgeLA/640?wx_fmt=png" alt=""><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVU6Y0IEjwHVeic8ouUndR41xdLjqkia2jIObANZaiaqcHgic6RavAAp7Klibg/640?wx_fmt=png" alt=""></p>
<h4 id="229-使用service-task消耗odata服务-post方法">2.2.9 使用Service Task消耗OData服务 Post方法</h4>
<p>二级审批节点审批通过后。需要返写状态到ERP系统。</p>
<p>第二个Check Approved节点在Approved分支添加setOrderStatus的Service Task</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUpBvx9mC2JLiam42v4PGgaOYWkcWvwQiaRpq4o2oIDT6hibC4WicCsxKRcw/640?wx_fmt=png" alt=""> <img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUw70aBXkNZmKvcrhjkNVC7E6ac9207WqudDqNXPVYuTTHrQjylr90Dw/640?wx_fmt=png" alt=""></p>
<p>设置Destination为HANDS4H</p>
<p>路径为/sap/opu/odata/sap/ZODATA_WORKFLOW2_SRV/purHeadSet</p>
<p>注意：POST方法需要加Token路径。Token路径跟POST方法的路径一致。</p>
<p>Request Variable中填写工作流上下文的属性${context.post}</p>
<p>(post属性已在UserTask中为其填充了head_np_appr的属性节点，在ScriptTask中为其填充了其余抬头属性)。</p>
<p>Response Variable 为Odata Post方法返回的数据。选填。同理填写至上下文属性中${context.XXX.XXX}</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUsawkN9CN5TYhKgdkiarY0eJvQWDLRTNC9N4shxlqphKV593ib6bLoMQg/640?wx_fmt=png" alt=""></p>
<h4 id="22x-使用terminal-end-event结束整个工作流">2.2.X 使用Terminal End Event结束整个工作流</h4>
<p>在SetOrderStatus的Service Task节点后添加Terminal End Event结束整个工作流。</p>
<h4 id="22xi-创建ui5应用程序作为workflow启动ui">2.2.XI 创建UI5应用程序作为Workflow启动UI</h4>
<p>上文已经建立了一个完整的Workflow流程，并发布至SAP Cloud Platform。如果从Workflow Definition App启动一个Workflow实例发起审批非常不方便，需要自己编写JSON格式数据作为Workflow启动参数。</p>
<p>可以通过外部应用程序或者SAP Cloud Platform 上发布的程序启动工作流。如图：</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUaxJEatfMjKw2jDco9vmPCfhn5QqUzBrdTjyw2AmRUZcIMeTDtF8qDA/640?wx_fmt=png" alt=""></p>
<p>SAP Cloud Platform 上发布的Ui5程序，可以通过Route形式访问工作流，通过子账号Subaccount目标映射Path访问bpmworkflowruntime服务。</p>
<p>外部应用程序需要通过SAP CPI与Workflow集成。（待续）</p>
<p>2.2.X.1 新建Ui5项目</p>
<p>新建UI5项目PurchaseOrderList，选择Master-Detail报表。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUkibJevYACmUw97CicLtkolhia7KkjNibJpua6MmBXIlz8qTO4YAKuyibiaag/640?wx_fmt=png" alt=""></p>
<p>基本信息设置参数如下：</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVU3O9gicmPnoJcM7nj2F1te434TKoSicLjCzaSkwTeGuTiaR10o8aBCpz6Q/640?wx_fmt=png" alt=""></p>
<p>设置OData数据源</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVU7gHNY8UI97b3xpCwSEMvxV3mpfG7ryoweibzMvVJ6xJZR88ia5xt0cfQ/640?wx_fmt=png" alt=""></p>
<p>2.2.X.2 为Ui5App添加Route</p>
<p>使UI5 App 能够访问到workflow API，</p>
<p>在项目文件夹下neo-app.js文件中routes属性添加如下代码：</p>
<p>{</p>
<p>&ldquo;path&rdquo;: &ldquo;bpmworkflowruntime&rdquo;,</p>
<p>&ldquo;target&rdquo;: {</p>
<p>&ldquo;type&rdquo;: &ldquo;destination&rdquo;,</p>
<p>&ldquo;name&rdquo;: &ldquo;bpmworkflowruntime&rdquo;,</p>
<p>&ldquo;entryPath&rdquo;: &ldquo;/workflow-service&rdquo;</p>
<p>},</p>
<p>&ldquo;description&rdquo;: &ldquo;Workflow Service Runtime&rdquo;</p>
<p>}</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVU2uiaibeXR5befcSibSzlWQ82ibYJ4obSVUiaxoW2r5r5HZW7jQibXGR39vMg/640?wx_fmt=png" alt=""></p>
<p>2.2.X.3 添加发送按钮和操作</p>
<p>Detail.view.xml中添加按钮，发送审批：</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUbAeVd1168KrRyEWe7JyhRWwC4AEtxL1tr9cmz3NAYWYRcicYtVibic2uQ/640?wx_fmt=png" alt=""></p>
<p>效果如下：</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUXDlk0hYtkfcKubHVHq3k2cqejbD5kVwSSMKYXuiaSZoeNGxbmW2hBiaA/640?wx_fmt=png" alt=""></p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_jpg/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUsCSkIc9OLjeQWMicw7ycoELCicVFNTGy69Egkia4LFPr0eOuX5uy3nyoQ/640?wx_fmt=jpeg" alt=""></p>
<p>onInit方法中初始化一个对话框实例，代码如下:</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVU0tFpz8DpfjFokhrexGtzhibXBiaauYeflQZGRLuACzuG5JHfwVxe6vicQ/640?wx_fmt=png" alt=""></p>
<p>启动Workflow API 代码</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUcJujDn0rStvBxj2jBqBAz0mLOTHQjTiaXTCpg1YVNULTIib89meqszCg/640?wx_fmt=png" alt=""></p>
<p>2.2.X.4 添加发送对话框</p>
<p>添加sendApprove.fragment.xml和Dialog.js文件</p>
<p>①sendApprove.fragment.xml</p>
<p>添加两个输入框，送审人输入框绑定{approveModel&gt;/approveUserId} 送审采购单绑定{approveModel&gt;/purOrdId}</p>
<p>添加两个按钮，确认 事件onConfirmDialog ，取消 事件 onCancelDialog</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUgJpGKJ8FsCjTJHTiatSfMGFKaMShRV3heb9KyO424ibseb6PwnxmqGuA/640?wx_fmt=png" alt=""><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUwiboMk1WTt1j8sttW5v7TLL7FJXpQu8wKNDh5ct6pgOG5MnhSC5xXZg/640?wx_fmt=png" alt=""></p>
<p>②Dialog.js</p>
<p>1)承接上文点击Start Workflow按钮的事件OpenDialog。在Dialog.js中新建方法OpenDialog。具体逻辑为将dialog实例附加到Detail视图上。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUVhlpyPJrOJpciaNzpo7gSbUKgyf9s5vgrpuTvcJxyRicicKF89bOVFIfg/640?wx_fmt=png" alt=""></p>
<p>2)onConfirmDialog事件方法中启动workflow实例。</p>
<p>获取token，然后启动实例</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVU3bP39h2s7tUbYAiaINQK3E8rVoDZKtLBSQqPO0TR6AQQItpn8mfxyuA/640?wx_fmt=png" alt=""></p>
<p>3)_fetchToken方法。token路径：/bpmworkflowruntime/rest/v1/xsrf-token</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUX9noQjK7breziakhEGiaTBvibiaDeD3IyibtcHfTJ19FVPgszwP8xicwF7Wg/640?wx_fmt=png" alt=""></p>
<p>4)_startInstance方法。</p>
<p>需要传入参数：url路径/bpmworkflowruntime/rest/v1/workflow-instances ；method为POST；在headers中传入token</p>
<p>Data将工作流定义ID（工作流名称）和上下文传入。上下文传入审批人approveUserId和采购订单号purOrdId</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUuJFfibGzrzFySdPdL9GYGkWXpE2Nrs1HuxVntiaWf6EEUlicJyy0ibIcYw/640?wx_fmt=png" alt=""></p>
<p>2.2.X.5 发布Ui5程序至SAP Cloud Platform Cockpit</p>
<p>右击UI5程序项目，发布至SAP Cloud Platform。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUGc8N58b3EV0HDn9h9Tic3yKXjLc9KpmtDTXbmqUibtLJZsluAqfb8uhQ/640?wx_fmt=png" alt=""></p>
<p>第一次发布状态下为Deploy a new application。点击发布即可。</p>
<p>发布操作会对代码进行Check和Build。确保代码语法正确，否则发布失败。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/8EGicibbmxHukRr4R1UTfDlGqHicfqONZVUhvCxWp831ucPKm9cbc6h874WOMRX9Hfl2MlmSBmaax0Tfb76icSchsg/640?wx_fmt=png" alt=""></p>
<p>我是老周，如果你喜欢我的文字，请记得点击⬇️关注我。</p>
<p>码字不易，文章下拉，右边点个【赞】和【在看】吧！！</p>
<p>猜您还喜欢合集：</p>
<p><a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzkzMDYzMDMyNA==&amp;action=getalbum&amp;album_id=3421434907808071682#wechat_redirect">解决方案</a></p>
<p><a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzkzMDYzMDMyNA==&amp;action=getalbum&amp;album_id=3250404133220941832#wechat_redirect">SAP优化</a></p>
<p><a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzkzMDYzMDMyNA==&amp;action=getalbum&amp;album_id=3454580208303439877#wechat_redirect">ABAP新语法</a></p>
<p><a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzkzMDYzMDMyNA==&amp;action=getalbum&amp;album_id=3418313910330425352#wechat_redirect">SAP Note</a></p>
<p><a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzkzMDYzMDMyNA==&amp;action=getalbum&amp;album_id=3253114126755987457#wechat_redirect">SAP</a></p>
<p><a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzkzMDYzMDMyNA==&amp;action=getalbum&amp;album_id=3283810568264777745#wechat_redirect">ABAP</a></p>
<p><a href="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzkzMDYzMDMyNA==&amp;action=getalbum&amp;album_id=3249829606501941253#wechat_redirect">懒人鱼</a></p>
<p>猜您还喜欢文章：</p>
<p><a href="http://mp.weixin.qq.com/s?__biz=MzkzMDYzMDMyNA==&amp;mid=2247485150&amp;idx=1&amp;sn=edaf30c840a70a1db745f63790bfabc7&amp;chksm=c2761905f5019013a7df0c971ecf7af443ae0d9a7dc0b865eff690f12e58fdfbe713704be57e&amp;scene=21#wechat_redirect">聊聊ABAP动态编程</a></p>
<p><a href="http://mp.weixin.qq.com/s?__biz=MzkzMDYzMDMyNA==&amp;mid=2247484812&amp;idx=1&amp;sn=d362b19c1dc0e4ab48b230ddf83b6635&amp;chksm=c2761a57f5019341c4e7878dd6d60d5e06fb7288136e5c23a6bc5364e602857d00ce77fe11c5&amp;scene=21#wechat_redirect">SAP这样优化：乙方开心，甲方放心！</a></p>
<p><a href="http://mp.weixin.qq.com/s?__biz=MzkzMDYzMDMyNA==&amp;mid=2247484811&amp;idx=1&amp;sn=3c664aa1ab969cf48a3cbe9010dc0d8e&amp;chksm=c2761a50f50193469463478f6a0b32d3e578251ab9ec48d2edc2075d6b134b03394a1f77abcd&amp;scene=21#wechat_redirect">浅谈SAP/SSO介绍及应用</a></p>
<p><a href="http://mp.weixin.qq.com/s?__biz=MzkzMDYzMDMyNA==&amp;mid=2247484678&amp;idx=1&amp;sn=89255ec17c6e4ab7e83e4393323670df&amp;chksm=c2761addf50193cb4795f2914b00d2d4da8ba7f2f957ee286c559e4d3e75ef7d9e04d523f071&amp;scene=21#wechat_redirect">浅谈SAP/ 文档管理解决方案</a></p>
<p><a href="http://mp.weixin.qq.com/s?__biz=MzkzMDYzMDMyNA==&amp;mid=2247483803&amp;idx=2&amp;sn=0390716cd37a4a4de1f5c3ea1cfff52f&amp;chksm=c2761e40f5019756a5ca71cc7d405eda6c04966ea2af4a9cbd95dbfca4e5c78484a09d4c665f&amp;scene=21#wechat_redirect">浅谈SAP/某化学纤维行业客户-优化案例</a></p>
<p>更多AI工具，参考<a href="https://ai123.869hr.uk/">Github-AI123</a>，<a href="https://ai123.869hr.uk/">国内AI123</a></p>



          </div>



<p><img src="/images/aitools/2024/03/qrcode_for_gh_dde1b429630d_258.jpg" alt=""></p>

        </article>

      </div>
    </div>
  </div>
</section>
        </div>
    </div>
    </main>




<script type='text/javascript' src='/assets/js/jquery.ui.touch-punch.min-0.2.2.js' id='jqueryui-touch-js'></script>
<script type='text/javascript' src='/assets/js/clipboard.min-5.6.2.js' id='clipboard-js'></script>
<script type='text/javascript' src='/assets/js/tooltip-extend.js' id='iplaycode-nav-js'></script>
<script type='text/javascript' id='popper-js-extra'>
 

var theme = {"ajaxurl":"","addico":"https:\/\/nav.baidu.cn\/wp-content\/themes\/onenav\/images\/add.png","order":"asc","formpostion":"top","defaultclass":"io-grey-mode","isCustomize":"1","icourl":"","icopng":".png","urlformat":"1","customizemax":"10","newWindow":"0","lazyload":"1","minNav":"1","loading":"1","hotWords":"baidu","classColumns":" col-sm-6 col-md-4 col-xl-5a col-xxl-6a ","apikey":"TWpBeU1UVTNOekk1TWpVMEIvZ1M2bFVIQllUMmxsV1dZelkxQTVPVzB3UW04eldGQmxhM3BNWW14bVNtWk4="};
 
</script>
<script type='text/javascript' src='/assets/js/popper.min.js' id='popper-js'></script>
<script type='text/javascript' src='/assets/js/bootstrap.min-4.3.1.js' id='bootstrap-js'></script>
<script type='text/javascript' src='/assets/js/theia-sticky-sidebar-1.5.0.js' id='sidebar-js'></script>
<script type='text/javascript' src='/assets/js/lazyload.min-12.4.0.js' id='lazyload-js'></script>
<script type='text/javascript' src='/assets/js/fancybox.min-3.5.7.js' id='lightbox-js-js'></script>

<script type='text/javascript' src='/assets/js/app-anim.js' id='appanim-js'></script>

<script type="text/javascript">
    $(document).ready(function(){
        var siteWelcome = $('#loading');
        siteWelcome.addClass('close');
        setTimeout(function() {
            siteWelcome.remove();
        }, 600);
    });
</script>
<script>        
    $(document).ready(function(){
        setTimeout(function () {
            if ($('a.smooth[href="' + window.location.hash + '"]')[0]) {
                $('a.smooth[href="' + window.location.hash + '"]').click();
            }else if (window.location.hash != '') {
                $("html, body").animate({
                    scrollTop: $(window.location.hash).offset().top - 90
                }, {
                    duration: 500,
                    easing: "swing"
                });
            }
        }, 300);
        $(document).on('click','a.smooth',function(ev) {
            if($('#sidebar').hasClass('show') && !$(this).hasClass('change-href')){
                $('#sidebar').modal('toggle');
            }
            if($(this).attr("href").substr(0, 1) == "#"){
                $("html, body").animate({
                    scrollTop: $($(this).attr("href")).offset().top - 90
                }, {
                    duration: 500,
                    easing: "swing"
                });
            }
            if($(this).hasClass('go-search-btn')){
                $('#search-text').focus();
            }
            if(!$(this).hasClass('change-href')){
                var menu =  $("a"+$(this).attr("href"));
                menu.click();
                toTarget(menu.parent().parent(),true,true);
            }
        });
        $(document).on('click','a.tab-noajax',function(ev) {
            var url = $(this).data('link');
            if(url)
                $(this).parents('.d-flex.flex-fill.flex-tab').children('.btn-move.tab-move').show().attr('href', url);
            else
                $(this).parents('.d-flex.flex-fill.flex-tab').children('.btn-move.tab-move').hide();
        });
        
    });
</script>

<script>

(function(){
    if(document.cookie.replace(/(?:(?:^|.*;\s*)night\s*\=\s*([^;]*).*$)|^.*$/, "$1") === ''){
        if(new Date().getHours() > 22 || new Date().getHours() < 6){
            document.body.classList.remove('io-black-mode');
            document.body.classList.add('io-grey-mode');
            document.cookie = "night=1;path=/";
            console.log('夜间模式开启');
        }else{
            document.body.classList.remove('night');
            document.cookie = "night=0;path=/";
            console.log('夜间模式关闭');
        }
    }else{
        var night = document.cookie.replace(/(?:(?:^|.*;\s*)night\s*\=\s*([^;]*).*$)|^.*$/, "$1") || '0';
        if(night == '0'){
            document.body.classList.remove('night');
        }else if(night == '1'){
            document.body.classList.add('night');
        }
    }
})();

$("#search-bg").css("background", "linear-gradient(#e2c4c4, #d8d8d8)");   
function switchNightMode(){
    var night = document.cookie.replace(/(?:(?:^|.*;\s*)night\s*\=\s*([^;]*).*$)|^.*$/, "$1") || '0';
    if(night == '0'){
	$("#search-bg").css("background", "linear-gradient(#e2c4c4, #d8d8d8)");
        document.body.classList.remove('io-grey-mode');
        document.body.classList.add('io-black-mode');
        document.cookie = "night=1;path=/"
        console.log(' ');
        $(".switch-dark-mode").attr("data-original-title","日间模式");
        $(".mode-ico").removeClass("icon-night");
        $(".mode-ico").addClass("icon-light");
    }else{
	$("#search-bg").css("background", "linear-gradient(#4f4040, #1b1d1f)");
        document.body.classList.remove('io-black-mode');
        document.body.classList.add('io-grey-mode');
        document.cookie = "night=0;path=/"
        console.log(' ');
        $(".switch-dark-mode").attr("data-original-title","夜间模式");
        $(".mode-ico").removeClass("icon-light");
        $(".mode-ico").addClass("icon-night");
    }
}
</script>


<script>
    var newsContainer = document.getElementById('news-container');
    var newsItems = document.getElementsByClassName('news-item');
    var currentItem = 0;

    setInterval(function() {
        
        newsItems[currentItem].classList.remove('show');
        newsItems[currentItem].style.transform = 'translateY(-20px)';
        
        currentItem = (currentItem + 1) % newsItems.length;
        newsItems[currentItem].style.transform = 'translateY(' + (newsContainer.offsetHeight - 20) + 'px)';
        setTimeout(function() {
            newsItems[currentItem].classList.add('show');
        }, 500);
    }, 8000);
</script>

</body>
</html>


