

<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="theme-color" content="#f9f9f9" />

	<title>GLM-4最新开源版本硬核测评！Datawhale成员万字测评（一） 作者： Datawhale 来源： Datawhale Datawhale干货 作者：潘笃驿，Datawhale成员 智谱今天新推出了一个 glm-4-9b 模型，支持 120k 左右的上下文与 8192 的输出长度，在拿到测试资格的时候我就立马开始了上手评测。 整体体验下来感觉非常不错，对比同类模型有下面几个重要特点，甚  | AI123| ai工具网址导航,ai最新产品</title>
	<link rel="shortcut icon" href="/assets/images/favicon.png" />
    <meta name="keywords" content="chatgpt,AI,AI聊天,AI文本生成,AI绘画,AI编程,AI电商" />
    <meta name="description" content="AI123 网址导航 | 免费chatgpt 汇集各类先进的人工智能产品，旨在帮助用户更快速地了解和使用这些产品,轻松地浏览不同领域的AI产品，包括语音识别、图像处理、自然语言处理。" />
    
    <meta name="baidu-site-verification" content="codeva-cCAOSG8MBO" />
    
    <link rel="stylesheet" id="block-library-css"
        href="/assets/css/block-library.min-5.6.2.css" type="text/css" media="all" />
    <link rel="stylesheet" id="iconfont-css" href="/assets/css/iconfont-3.03029.1.css"
        type="text/css" media="all" />

    
    <link href="/scss/style.min.css" rel="stylesheet" />
    
		    <link rel="stylesheet" id="iowen-css" href="/assets/css/style-3.03029.1.css"
        type="text/css" media="all" />
    <link rel="stylesheet" id="custom-css" href="/assets/css/custom-style.css"
        type="text/css" media="all" />
		
		<link rel="stylesheet" href=/plugins/font-awesome/css/font-awesome.min.css />


    <link rel="stylesheet" id="fortawesome-css" href="/assets/fontawesome-5.15.4/css/all.min.css" type="text/css" />


    <script type="text/javascript" src="/assets/js/jquery.min-3.2.1.js" id="jquery-js"></script>
    <script type="text/javascript" src="/assets/js/content-search.js"  id="content-search-js"></script>

    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2073588164294660"
     crossorigin="anonymous"></script>

	
    <script>
        

		var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?8450bc732b2a86f7e4aec4ebd9fd8252";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();

        
    </script>
    

    
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-7071W80M2K"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-7071W80M2K');
    </script>

</head>


    <div class="page-container">
	
	<div id="sidebar" class="sticky sidebar-nav fade animate-nav" style="width: 170px">
        
            <div class="modal-dialog h-100 sidebar-nav-inner">
                <div class="sidebar-logo border-bottom border-color">
                    
                    <div class="logo overflow-hidden">
                        <a href="https://ai123.869hr.uk/" class="logo-expanded">
                            <img src="/assets/images/bt8-expand-light.png" height="40" class="logo-light"
                                alt="AI123| ai工具网址导航,ai最新产品">
                            <img src="/assets/images/bt8-expand-dark.png" height="40" class="logo-dark d-none"
                                alt="AI123| ai工具网址导航,ai最新产品">
                        </a>
                        <a href="https://ai123.869hr.uk/" class="logo-collapsed">
                            <img src="/assets/images/bt.png" height="40" class="logo-light"
                                alt="AI123| ai工具网址导航,ai最新产品">
                            <img src="/assets/images/bt.png" height="40" class="logo-dark d-none"
                                alt="AI123| ai工具网址导航,ai最新产品">
                        </a>
                    </div>
                    
                </div>
                <div class="sidebar-menu flex-fill">
                    <div class="sidebar-scroll">
                        <div class="sidebar-menu-inner">
                            <ul>
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#00834a9dd147b04c5d53d4368cdb0b57" class="smooth">
                                            <i class="fas fa-sun fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>本月热门</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#db0311e7ecfedd24d157f0ceb4a0897f" class="smooth">
                                            <i class="fas fa-star-and-crescent fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>热门网站</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#21b5cbb2c769010fec3ce029a5f8a4a3" class="smooth">
                                            <i class="far fa-star fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>国内热门</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#8310718935e8ec25ce0350de01e3f7dc" class="smooth">
                                            <i class="fas fa-phone fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>对话工具</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#d58e850d9115797306c2edf61ac6ddd8" class="smooth">
                                            <i class="fas fa-newspaper fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>写作</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#2a7418a5f8f1ca4e054364a9300657df" class="smooth">
                                            <i class="fas fa-image fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>图像生成</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#7808a68ee1b34dab43011429a12de19e" class="smooth">
                                            <i class="fas fa-image fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>图像处理</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#6729afc51f5ac49a828812fa0eb0c82f" class="smooth">
                                            <i class="fas fa-video fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>音视频</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#e5ce844860451fff3faf3d8f8894971d" class="smooth">
                                            <i class="fas fa-music fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>音乐生成</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#db53804b7d726967c58fcc8c9ca03d27" class="smooth">
                                            <i class="fas fa-language fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>办公</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#47b7af9547e034d28fe6f6d439968ac8" class="smooth">
                                            <i class="fas fa-copy fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>提示词</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#41282bf95e43c64d579757573a03cdde" class="smooth">
                                            <i class="fas fa-code fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>编程</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#fd71852fd52d5e18ef4f9a252f1eac58" class="smooth">
                                            <i class="fas fa-search fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>AI搜索</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#81b1637fbe47625dbdf2094acd3b6683" class="smooth">
                                            <i class="fas fa-language fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>文本翻译</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#2e9ba3fa6e1ed0e9311b3e97f97f9a40" class="smooth">
                                            <i class="fas fa-book fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>学习网站</span>
                                        </a>
                                    </li>
                                    
                                
                            </ul>           
                        </div>
                    </div>
                </div>
                <div class="border-top py-2 border-color">
                    <div class="flex-bottom">
                        <ul>
			    <li id="menu-item-212"
                                 class="menu-item menu-item-type-custom menu-item-object-custom menu-item-212 sidebar-item">
                                 <a href="#friendlink" class="smooth">
                                     <i class="fab fa-staylinked icon-fw icon-lg mr-2"></i>
                                     <span>友情链接</span>
                                 </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>


<div class="flex-fill grid-bg">
    <div class="big-header-banner">
        <div id="header" class="page-header sticky">
            <div class="navbar navbar-expand-md">
                <div class="container-fluid p-0">

                    <a href="" class="navbar-brand d-md-none" title="AI123| ai工具网址导航,ai最新产品">
                        <img src="/assets/images/bt.png" class="logo-light"
                            alt="AI123| ai工具网址导航,ai最新产品">
                        <img src="/assets/images/bt.png" class="logo-dark d-none"
                            alt="AI123| ai工具网址导航,ai最新产品">
                    </a>

                    <div class="collapse navbar-collapse order-2 order-md-1">
                        <div class="header-mini-btn">
                            <label>
                                <input id="mini-button" type="checkbox">
                                <svg viewbox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                                    <path class="line--1" d="M0 40h62c18 0 18-20-17 5L31 55"></path>
                                    <path class="line--2" d="M0 50h80"></path>
                                    <path class="line--3" d="M0 60h62c18 0 18 20-17-5L31 45"></path>
                                </svg>
                            </label>

                        </div>

                        <ul class="navbar-nav site-menu" style="margin-right: 16px;">
                        
			<li >
				<a href="/">
                                    <i class="fa fa-home fa-lg mr-2"></i>
                                    <span>首页</span>
                                </a>
				<ul class="sub-menu">
				
				</ul>
			    </li>
			
			</ul>

                        
                        <div class="rounded-circle weather">
                            <div id="he-plugin-simple" style="display: contents;"></div>
                            <script>WIDGET = {
                                    CONFIG: {
                                        "modules": "01234",
                                        "background": 5,
                                        "tmpColor": "008000",
                                        "tmpSize": 14,
                                        "cityColor": "008000",
                                        "citySize": 14,
                                        "aqiColor": "#008000",
                                        "aqiSize": 14,
                                        "weatherIconSize": 24,
                                        "alertIconSize": 18,
                                        "padding": "10px 10px 10px 10px",
                                        "shadow": "1",
                                        "language": "auto",
                                        "borderRadius": 5,
                                        "fixed": "false",
                                        "vertical": "middle",
                                        "horizontal": "left",
                                        "key": "085791e805a24491b43b06cf58ab31e7"
                                    }
                                }
                            </script>
                            <script src="https://widget.qweather.net/simple/static/js/he-simple-common.js?v=2.0"></script>
                        </div>
                        
                    </div>

                    <ul class="nav navbar-menu text-xs order-1 order-md-2">
                        
                        
                        <li class="nav-item mr-3 mr-lg-0 d-none d-lg-block">
                            <script>
                                fetch('https://v1.hitokoto.cn')
                                    .then(response => response.json())
                                    .then(data => {
                                    const hitokoto = document.getElementById('hitokoto_text')
                                    hitokoto.href = 'https://hitokoto.cn/?uuid=' + data.uuid
                                    hitokoto.innerText = data.hitokoto
                                    })
                                    .catch(console.error)
                            </script>                           
                            <div id="hitokoto"><a href="#" target="_blank" id="hitokoto_text">疏影横斜水清浅，暗香浮动月黄昏。</a></div>
                        </li>
                        
                        
                        <li class="nav-search ml-3 ml-md-4">
                            <a href="javascript:" data-toggle="modal" data-target="#search-modal"><i
                                    class="iconfont icon-search icon-2x"></i></a>
                        </li>
                        <li class="nav-item d-md-none mobile-menu ml-3 ml-md-4">
                            <a href="javascript:" id="sidebar-switch" data-toggle="modal"
                                data-target="#sidebar"><i class="iconfont icon-classification icon-2x"></i></a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="placeholder" style="height:74px"></div>
    </div>




<body class="page-body boxed-container  io-grey-mode">
    <main role="main" class="flex-shrink-0">
    <div class="container">
        
        <div class="content">
            <style>
    body{
	    background: #f9f9f9;
	}

    h1, h2, h3, h4, h5, h6 {
        margin-top: 1.5rem;
        margin-bottom: 1.5rem;
    }


 
@media (min-width: 1000px) {
  .container, .container-sm {
    max-width: 800px;
  }
}

</style>

<div class="featured-post-content">

    <a href="/digest/" class="featured-post-title">
       AI 文摘
    </a>

</div>

<section class="blog-single">
  <div class="container">
    <div class="row">

      <div class="col-lg-12 order-1 order-lg-2">
        <article class="single-blog">
          <p class="title">GLM-4最新开源版本硬核测评！Datawhale成员万字测评（一）</p>
            <br/>
          <ul class="meta">
            <li>
              By <a href=https://ai123.869hr.uk/about>AI123</a>
            </li>
            <li>
              <i class="fa fa-clock-o"></i>
              June 6, 2024 - 2 min read
            </li>
          </ul>

          <div class="_1NCGf">
              <img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/vI9nYe94fsEicLKOXdQyUcgtPLx1xaUaHFxjqicfvq3KGT705LpbydITLOGdPudwycbACh9utZO1Cf7RfxG3PQrg/640?wx_fmt=png&amp;from=appmsg" width="640" >
          </div>
            <br>
            <br>
            <br>
          
          <div class="single-blog-content">
            <p>作者： Datawhale  来源： <a href="https://mp.weixin.qq.com/s/-vZVTG9q3OX0rpj4PSti1Q">Datawhale</a></p>
<h4 id="heading"></h4>
<p>Datawhale干货</p>
<p><strong>作者：潘笃驿，Datawhale成员</strong></p>
<p>智谱今天新推出了一个 glm-4-9b 模型，支持 120k 左右的上下文与 8192 的输出长度，在拿到测试资格的时候我就立马开始了上手评测。</p>
<p>整体体验下来感觉非常不错，对比同类模型有下面几个重要特点，甚至与更大体量的模型更有突出：</p>
<p>*<strong>指令遵循能力很强</strong></p>
<p>*<strong>长上下文</strong></p>
<p>*<strong>8192 的 输出长度支持模型生成更高质量的内容</strong></p>
<p>同时这一代的各项能力也进一步增强，长文本任务上迎来了一个非常强悍的模型。</p>
<p>我们先来跟新模型打个招呼！</p>
<p>新模型在调用上与其他模型一致，只需要更改 model 参数为最新模型即可。</p>
<pre><code>from zhipuai import ZhipuAI  
zhipu_client = ZhipuAI(api_key=&quot;zhipukey&quot;)  
response = zhipu_client.chat.completions.create(  
  model=&quot;glm-4-9b&quot;,   
    messages=[  
        {&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;你好，介绍一下你自己&quot;},  
    ]  
    )  
print(response.choices[0].message.content)



你好！我是 ChatGLM，是清华大学 KEG 实验室和智谱 AI 公司于 2024 年共同训练的语言模型。我的目标是针对用户的问题和要求提供适当的答复和支持。
</code></pre>
<h4 id="heading-1"></h4>
<p><strong>论文爬取总结测试</strong></p>
<p>让我们来试试一个特殊的任务：论文爬取总结工作。</p>
<p>自大模型横空出世以来，就有无数学者想要利用大模型来简化获取论文相关信息的流程，这个流程往往是我们先从对应的网页爬取对应的内容，然后人为地做数据清洗，最后将清洗好的数据送给 LLM 让它总结必要的信息，现在有了glm-4-9b这个集长上下文长输出的超级模型，也许我们就可以试试另一种大胆的方案？</p>
<p>我们将采用 qwen1.5-32b-chat（30k tokens，输出最大2k） qwen1.5-110b-chat（30k tokens，输出最大8k） moonshot-v1-128k（128k）作为对照组，来让大家直观感受 glm-4-9b 的强大之处。</p>
<p>任务的具体要求如下，我们将直接从 arxiv api 中获取最近与 LLM 相关的 paper。</p>
<p>我们交给 LLM 的任务是，它们必须从含有大量干扰信息的文本中提取出论文的所有相关信息，并总结为我们指定的格式。</p>
<p>这对于大模型是一个相当有挑战性的尝试，对于 LLM 能力要求包括但不限于：</p>
<ul>
<li>
<p>超长的上下文：从 arxiv 上直接爬取的数据存在大量的冗余标签，往往需要人为清洗才能直接送入大模型</p>
</li>
<li>
<p>强文本理解能力：提取论文中的关键信息需要模型本身就对文本有很强的理解能力</p>
</li>
<li>
<p>多语言能力：我们从 arxiv 上获取到的内容为英文，要求模型必须提供对应的中文翻译，对模型多语言能力要求很高</p>
</li>
<li>
<p>严格的指令遵循能力：我们需要大模型在保证总结信息全面详实的同时还要保证严格的格式确保通过校验</p>
</li>
</ul>
<p>我们先来设定好各家模型：</p>
<pre><code>from zhipuai import ZhipuAI  
import subprocess    
zhipu_client = ZhipuAI(api_key=&quot;zhipukey&quot;)  
  
import dashscope  
dashscope.api_key = &quot;dashscope-key&quot;  
  
from openai import OpenAI  
kimi_client = OpenAI(  
    api_key = &quot;kimi-key&quot;,  
    base_url = &quot;https://api.moonshot.cn/v1&quot;,  
)  
 # 请填写您自己的APIKey
</code></pre>
<p>接着我们来设计一个提示词，指明任务的全部要求。</p>
<pre><code>GET_ARXIV_PAPER = &quot;&quot;&quot;  
    ## Task  
    如下是从Arxiv中获取到的文章，请你按照如下json格式总结所有文章的信息并依次返回，不要输出任何其他内容，确保你的输出能够被json.load()方法解析  
    {{  
        id:&quot;序号，从1开始&quot;,  
        title:&quot;论文标题&quot;,  
        introduction:&quot;论文摘要的中文翻译&quot;,  
        recommend_reason:&quot;为什么推荐这篇论文的理由&quot;,  
        link:&quot;论文的pdf文件链接&quot;  
    }}  
    ## Papers  
    {web_content}  
  
&quot;&quot;&quot;
</code></pre>
<p>接着我们来设计一个校验工具，它将用于确认模型输出是否为json格式以及解析模型输出，需要注意的是，我们默认模型输出 json 内容时会将其包裹在 r&rsquo;<code>json(.*)</code>&rsquo;
这样的模式中，在测验结果时可能会对不遵从该规则的模型不公平。</p>
<pre><code>import re  
import json  
def parse_json(text):  
    pattern = r'```json(.*)```'  
    match = re.search(pattern, text, re.DOTALL)  
    json_text = match.group(1) if match else print(&quot;parse error&quot;)  
    try:  
        json.loads(json_text)  
        print(&quot;parse success&quot;)  
    except:  
        print(&quot;parse error&quot;)
</code></pre>
<p>工具与模型都导入完毕，我们可以获取数据看看了。</p>
<p>我们先从 arxiv 上获取数据。</p>
<pre><code># 从arxiv 按照日期获取最近与llm相关的论文，这里 max_results=1  
result_1 = subprocess.run(['curl', 'https://export.arxiv.org/api/query?search_query=llm&amp;sortBy=submittedDate&amp;sortOrder=descending&amp;max_results=1'], capture_output=True, text=True)    
if result_1.returncode == 0:  
    print(result_1.stdout)    
else:    
    print(f&quot;Error: {result_1.stderr}&quot;)
</code></pre>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/vI9nYe94fsEicLKOXdQyUcgtPLx1xaUaHg6lGm3fxzGAN1BYdyvX8vfgPFY4vgCZhhqU5dIcvvkZY4NTQb5VFuw/640?wx_fmt=png&amp;from=appmsg" alt=""></p>
<p>可以发现这个文本量还是相当惊人的。。</p>
<pre><code>print(len(result_1.stdout))  
prompt_1 = GET_ARXIV_PAPER.format(web_content=result_1.stdout)  
print(len(prompt_1))



4703  
4977  
</code></pre>
<p>最后<strong>prompt的文本长度已达4900+，其中有非常严重的信息冗余，存在大量标签干扰</strong> 。</p>
<p>拿到数据后我们就可以开始测试下各家大模型的表现了。</p>
<p>首先是 qwen1.5-32b-chat：</p>
<pre><code>qwen_32b_response_1 = dashscope.Generation.call(  
    &quot;qwen1.5-32b-chat&quot;,  
    messages=[  
        {&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: prompt_1},  
    ],  
    max_tokens=2000,  
    temperature=0.95,  
).output.text  
print(qwen_32b_response_1)



[  
    {  
        &quot;id&quot;: &quot;1&quot;,  
        &quot;title&quot;: &quot;Video-MME: The First-Ever Comprehensive Evaluation Benchmark of Multi-modal LLMs in Video Analysis&quot;,  
        &quot;introduction&quot;: &quot;在寻求人工智能通用性方面，多模态大型语言模型（MLLMs）已经成为最近进展中的焦点。然而，主要关注点仍然集中在增强它们在静态图像理解方面的功能。MLLMs处理序列视觉数据的潜力尚未得到充分探索，这凸显了对其性能进行全面、高质量评估的缺失。在这篇论文中，我们介绍了Video-MME，这是第一个全面的多模态评估基准，用于评估视频分析中的MLLMs。我们的工作通过以下四个关键特性区别于现有的基准：1）视频类型的多样性，覆盖6个主要视觉领域和30个子领域，以确保广泛的场景泛化能力；2）时间维度的持续性，包括短时、中时和长时间视频，范围从11秒到1小时，以实现强大的上下文动态；3）数据模态的广度，整合除了视频帧之外的多模态输入，包括字幕和音频，以揭示MLLMs的全方位能力；4）注释的质量，利用专家注释员进行严格的手动标注，以促进精确可靠的模型评估。通过反复观看所有视频内容，手动选择了900个视频，并进行了注解，总时长为256小时，生成了2700对问题答案对。借助Video-MME，我们广泛评估了各种最先进的MLLMs，包括GPT-4系列和Gemini 1.5 Pro，以及开源的图像模型如InternVL-Chat-V1.5和视频模型如LLaVA-NeXT-Video。我们的实验表明，Gemini 1.5 Pro是表现最佳的商业模型，明显优于开源模型。我们的数据集和这些发现强调了处理更长序列和多模态数据的进一步改进的需求。&quot;,  
        &quot;recommend_reason&quot;: &quot;这篇论文介绍了一个全新的视频分析多模态语言模型评估基准Video-MME，对于研究者来说，这是一个重要的资源，可以用来测试和改进他们的模型在处理不同视频类型、长度和多模态数据上的性能。&quot;,  
        &quot;link&quot;: &quot;http://arxiv.org/pdf/2405.21075v1&quot;  
    }  
]



parse_json(qwen_32b_response_1)



parse success  




接下来是 qwen1.5-110b：

qwen_110b_response_1 = dashscope.Generation.call(  
    &quot;qwen1.5-110b-chat&quot;,  
    messages=[  
        {&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: prompt_1},  
    ],  
    max_tokens=8000,  
    temperature=0.95,  
).output.text  
print(qwen_110b_response_1)



{  
    &quot;id&quot;: &quot;1&quot;,  
    &quot;title&quot;: &quot;Video-MME: The First-Ever Comprehensive Evaluation Benchmark of Multi-modal LLMs in Video Analysis&quot;,  
    &quot;introduction&quot;: &quot;在追求人工智能的道路上，多模态大型语言模型（MLLMs）已成为近期进展的核心。然而，目前的研究主要集中在提升它们处理静态图像的能力上，而MLLMs在视频分析领域的潜力尚未得到充分探索。本文提出了Video-MME，首个全面评估多模态语言模型在视频分析中性能的基准。Video-MME独具特色，包括广泛的视频类型覆盖、时间维度的深度、多模态数据的融合以及高质量的手动标注，总共涉及900个视频和2700个问题-答案对。通过对包括GPT-4系列和Gemini 1.5 Pro等先进模型的广泛评估，突显了在处理长序列和多模态数据方面的改进需求。&quot;,  
    &quot;recommend_reason&quot;: &quot;推荐这篇论文是因为它填补了多模态语言模型在视频分析评价标准上的空白，为研究者提供了一个重要的工具来衡量和推动这一领域的发展，同时指出了当前模型的局限性和未来的改进方向。&quot;,  
    &quot;link&quot;: &quot;http://arxiv.org/pdf/2405.21075v1&quot;  
}



parse_json(qwen_110b_response_1)



parse success



这里是 moonshot-v1-128k：

kimi_128k_1 = kimi_client.chat.completions.create(  
    model=&quot;moonshot-v1-128k&quot;,  
    messages=[  
        {&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: prompt_1},  
    ],  
    temperature=0.95,  
).choices[0].message.content  
print(kimi_128k_1)



{  
    &quot;1&quot;: {  
        &quot;id&quot;: &quot;1&quot;,  
        &quot;title&quot;: &quot;Video-MME: The First-Ever Comprehensive Evaluation Benchmark of Multi-modal LLMs in Video Analysis&quot;,  
        &quot;introduction&quot;: &quot;在人工通用智能的探索中，多模态大型语言模型(MLLMs)成为近期进展的焦点。然而，主要关注点仍然是发展它们在静态图象理解方面的能力。MLLMs在处理顺序视觉数据方面的潜力还没有被充分探索，这突显了对它们在全面、高质量的评估中性能的缺失。在本文中，我们介绍了Video-MME，这是首次全面、多模态评估基准，用于视频分析中的MLLMs。我们的工作通过四个关键特点与现有基准不同：1)视频类型的多样性，涵盖6个主要视觉领域的30个子领域，以确保广泛场景的泛化能力；2)时间维度的持续时间，包括短期、中期和长期视频，从11秒到1小时不等，以实现强大的上下文动态；3)数据模态的广度，除了视频帧之外，集成多模态输入包括字幕和音频，以揭示MLLMs的全方位能力；4)注释质量，使用专家注释者通过反复观看所有视频内容进行严格的手动标记，以促进精确可靠的模型评估。通过反复观看所有视频内容，手动选择了900个视频，并由专家注释者共注释了256小时，产生了2700对问答对。有了Video-MME，我们广泛评估了各种最先进的MLLMs，包括GPT-4系列和Gemini 1.5 Pro，以及开源的图像模型如InternVL-Chat-V1.5，以及像LLaVA-NeXT-Video这样的视频模型。我们的实验揭示了Gemini 1.5 Pro是表现最佳的商业模型，大大超过了开源模型。我们的数据集以及这些发现强调了进一步改进处理更长序列和多模态数据的必要性。&quot;,  
        &quot;recommend_reason&quot;: &quot;这篇论文是多模态大型语言模型(MLLMs)在视频分析方面的首次全面评估基准，具有里程碑意义。它涵盖了多种视频类型，具有广泛的泛化能力；涵盖了短至11秒、长达1小时的视频，具有强大的上下文动态；集成了字幕和音频等多种输入模式，能够全面评估MLLM的能力；还具有精确可靠的注释质量。此外，该研究揭示了现有模型处理更长序列和多模态数据方面的不足，为未来的研究方向指明了方向。&quot;,  
        &quot;link&quot;: &quot;http://arxiv.org/pdf/2405.21075v1&quot;  
    }  
}



parse_json(kimi_128k_1)



parse error  
parse error  
</code></pre>
<p>最后就是我们的压轴主角 glm-4-9b。</p>
<pre><code>glm_4_9b_response_1 = zhipu_client.chat.completions.create(  
    model='glm-4-9b',  
    messages=[  
        {&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: prompt_1},  
    ],  
    temperature=0.95,  
    max_tokens=8192,  
).choices[0].message.content  
print(glm_4_9b_response_1)



[  
    {  
        &quot;id&quot;: &quot;1&quot;,  
        &quot;title&quot;: &quot;Video-MME: The First-Ever Comprehensive Evaluation Benchmark of Multi-modal LLMs in Video Analysis&quot;,  
        &quot;introduction&quot;: &quot;在追求通用人工智能的道路上，多模态大语言模型（MLLMs）成为了近期发展的焦点。然而，主要的关注点仍然集中在它们在静态图像理解方面的能力发展上。MLLMs在处理序列视觉数据方面的潜力仍未得到充分探索，这突显出缺乏对它们性能的综合、高质量的评估。在这篇论文中，我们介绍了Video-MME，这是第一个全面的、多模态评估基准，用于评估MLLMs在视频分析中的性能。我们的工作与现有的基准不同，有四个关键特点：1) 视频类型的多样性，涵盖了6个主要视觉领域和30个子领域，以确保广泛场景的通用性；2) 时间维度的持续时间，包括短、中、长期视频，时长从11秒到1小时，以实现鲁棒的上下文动态；3) 数据模式的广度，除了视频帧外，还包括字幕和音频的多模态输入，以揭示MLLMs的全面能力；4) 标注的质量，利用专家标注员的严格手动标注，以促进精确和可靠的模式评估。900个视频经过手动选择和标注，重复观看所有视频内容，结果产生了2700个问答对。使用Video-MME，我们广泛评估了各种最先进的MLLMs，包括GPT-4系列和Gemini 1.5 Pro，以及开源图像模型如InternVL-Chat-V1.5和视频模型如LLaVA-NeXT-Video。我们的实验表明，Gemini 1.5 Pro是表现最好的商业模型，显著优于开源模型。我们的数据集和这些发现强调了进一步提高处理更长时间序列和多模态数据的需求。项目页面：https://video-mme.github.io&quot;,  
        &quot;recommend_reason&quot;: &quot;该论文首次提出了一个全面的、多模态评估基准（Video-MME），用于评估MLLMs在视频分析中的性能。该基准具有多样性、时间维度覆盖范围广、数据模式全面以及标注质量高等特点，有助于推动MLLMs在视频分析领域的进一步发展。&quot;,  
        &quot;link&quot;: &quot;http://arxiv.org/pdf/2405.21075v1&quot;  
    }  
]



parse_json(glm_4_9b_response_1)



parse success  
</code></pre>
<p>可以看到在 4k+ 的文本条件下，glm-4-9b 表现与 qwen1.5-32b qwen1.5-110b 接近，甚至在翻译质量与内容丰富度上表现更优与 moonshot-v1-128k 接近，并且严格遵循了json格式，顺利通过了格式检验。</p>
<p>让我们再来增加下测试难度，我们将信息量从 4k+ 上升至 14k+ 再进行测试，再来对比下 glm-4-9b 与其他模型差距。</p>
<pre><code># 从arxiv 按照日期获取最近与llm相关的论文，这里 max_results=5  
result_5 = subprocess.run(['curl', 'https://export.arxiv.org/api/query?search_query=llm&amp;sortBy=submittedDate&amp;sortOrder=descending&amp;max_results=5'], capture_output=True, text=True)    
print(len(result_5.stdout))  
prompt_5 = GET_ARXIV_PAPER.format(web_content=result_5.stdout)  
print(len(prompt_5))



14432  
14706  
</code></pre>
<p>我们依然先从 qwen1.5-32b-chat 开始测试：</p>
<pre><code>qwen_32b_response_5 = dashscope.Generation.call(  
    &quot;qwen1.5-32b-chat&quot;,  
    messages=[  
        {&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: prompt_5},  
    ],  
    max_tokens=2000,  
    temperature=0.95,  
).output.text  
print(qwen_32b_response_5)  
parse_json(qwen_32b_response_5)



[  
    {  
        &quot;id&quot;: &quot;1&quot;,  
        &quot;title&quot;: &quot;Video-MME: The First-Ever Comprehensive Evaluation Benchmark of Multi-modal LLMs in Video Analysis&quot;,  
        &quot;introduction&quot;: &quot;在追求人工智能的一般性方面，多模态大型语言模型（MLLMs）已经成为最近进步的重点。然而，主要关注点仍然集中在增强他们在静态图像理解中的能力。处理序列视觉数据的MLLM潜力仍然没有得到充分探索，这突出了对其性能进行全面、高质量评估的缺失。在这篇论文中，我们引入了Video-MME，这是第一个全面的多模态评估基准，用于视频分析中的MLLM。我们的工作通过四个关键特征区别于现有的基准：1）视频类型的多样性，覆盖6个主要视觉领域和30个子领域，以确保广泛的场景泛化；2）时间维度的持续性，包括短时、中时和长时间视频，范围从11秒到1小时，以实现稳健的上下文动态；3）数据模态的广度，整合除了视频帧之外的多模态输入，包括字幕和音频，以揭示MLLM的全方位能力；4）注释的质量，利用专家注解员进行严格的手动标注，以促进精确可靠的模型评估。900段视频，总时长为256小时，经过反复观看所有视频内容后被人工选择和标注，产生了2700对问题答案对。借助Video-MME，我们广泛评估了各种最先进的MLLM，包括GPT-4系列和Gemini 1.5 Pro，以及开源图像模型如InternVL-Chat-V1.5和视频模型如LLaVA-NeXT-Video。我们的实验表明，Gemini 1.5 Pro是表现最好的商业模型，明显优于开源模型。我们的数据集连同这些发现强调了处理更长序列和多模态数据方面的进一步改进需求。项目页面：https://video-mme.github.io&quot;,  
        &quot;recommend_reason&quot;: &quot;这篇论文介绍了首个全面的多模态语言模型在视频分析领域的评估基准，对于研究多模态AI的进展和未来方向具有重要意义。&quot;,  
        &quot;link&quot;: &quot;http://arxiv.org/pdf/2405.21075v1&quot;  
    },  
    {  
        &quot;id&quot;: &quot;2&quot;,  
        &quot;title&quot;: &quot;Grammar-Aligned Decoding&quot;,  
        &quot;introduction&quot;: &quot;大型语言模型（LLMs）难以可靠地生成高度结构化的输出，如程序代码、数学公式或良好的标记。约束解码方法缓解了这个问题，通过贪婪地限制LLMs每一步可以输出的令牌，以保证输出符合给定的约束。具体来说，在语法约束解码（GCD）中，LLMs的输出必须遵循给定的文法。在这篇论文中，我们展示了GCD技术（以及一般的约束解码技术）可能会扭曲LLMs的分布，导致输出是语法正确的，但出现的概率并不与LLMs给出的比例相称，因此最终质量较低。我们将这种将采样与语法约束对齐的问题称为语法对齐解码（GAD），并提出了一种自适应采样方法，使用近似预期未来（ASAp），这是一种保证输出语法正确的同时，理论上能产生与LLMs在给定文法约束下的条件概率匹配的输出的解码算法。我们的算法使用先前样本输出来安全地高估不同输出前缀的未来语法正确性。我们在代码生成和结构化NLP任务上的评估显示，ASAp经常比现有的GCD技术产生根据LLMs分布更高的可能性的输出，同时仍然保持所需的语法约束。&quot;,  
        &quot;recommend_reason&quot;: &quot;该论文提出了一个新的解码算法，解决了LLMs在生成高度结构化输出时遇到的问题，对于提升LLMs的生成能力有重要价值。&quot;,  
        &quot;link&quot;: &quot;http://arxiv.org/pdf/2405.21047v1&quot;  
    },  
    ...  
]



parse error  
</code></pre>
<p>再来看看 qwen1.5-110b-chat 与 moonshot-v1-128k：</p>
<pre><code>qwen_110b_response_5 = dashscope.Generation.call(  
    &quot;qwen1.5-110b-chat&quot;,  
    messages=[  
        {&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: prompt_5},  
    ],  
    max_tokens=8000,  
    temperature=0.95,  
).output.text  
parse_json(qwen_110b_response_5)  
  
kimi_128k_5 = kimi_client.chat.completions.create(  
    model=&quot;moonshot-v1-128k&quot;,  
    messages=[  
        {&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: prompt_5},  
    ],  
    temperature=0.95,  
    max_tokens=8000,  
).choices[0].message.content  
parse_json(kimi_128k_5)



parse success  
parse error  
parse error  
</code></pre>
<p>可以看到，在 14k 长度的文本测试下，glm-4-9b 依旧发挥稳定，内容表现上不输 qwen1.5-110b-chat ，同时依然严格遵循了json格式。</p>
<pre><code>glm_4_9b_response_5 = zhipu_client.chat.completions.create(  
    model='glm-4-9b',  
    messages=[  
        {&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: prompt_5},  
    ],  
    temperature=0.95,  
    max_tokens=8192,  
).choices[0].message.content  
print(glm_4_9b_response_5)



[  
    {  
        &quot;id&quot;: &quot;1&quot;,  
        &quot;title&quot;: &quot;Video-MME: The First-Ever Comprehensive Evaluation Benchmark of Multi-modal LLMs in Video Analysis&quot;,  
        &quot;introduction&quot;: &quot;在追求通用人工智能的征程中，多模态大语言模型（MLLMs）已成为最近进步的焦点。然而，主要的关注点仍然集中在他们在静态图像理解方面的能力。MLLMs在处理序列视觉数据方面的潜力仍被充分探索，这突显出缺乏对它们性能的全面、高质量评估。在这篇论文中，我们介绍了Video-MME，这是第一个全面的多模态评估基准，用于评估MLLMs在视频分析中的性能。我们的工作通过四个关键特性与现有基准区分开来：1)视频类型的多样性，涵盖了6个主要视觉领域和30个子领域，以确保广泛的场景泛化性；2)时间维度的持续时间，包括短期、中期和长期视频，从11秒到1小时不等，以实现稳健的上下文动态；3)数据模态的广度，除了视频帧之外，还包括字幕和音频等多模态输入，以揭示MLLMs的全方面能力；4)注释的质量，利用专家标注员严格的手动标注，以促进对模型的精确和可靠评估。900个视频被手动选择和标注，总共花费了256个小时，结果产生了2,700个问答对。通过Video-MME，我们广泛评估了各种最先进的MLLMs，包括GPT-4系列和Gemini 1.5 Pro，以及开源图像模型如InternVL-Chat-V1.5和视频模型如LLaVA-NeXT-Video。我们的实验表明，Gemini 1.5 Pro是表现最好的商业模型，显著优于开源模型。我们的数据集以及这些发现强调了在处理更长的序列和多模态数据方面需要进一步改进的需求。项目页面：https://video-mme.github.io&quot;,  
        &quot;recommend_reason&quot;: &quot;这篇论文提出了Video-MME，这是一个全面的多模态评估基准，用于评估MLLMs在视频分析中的性能。它是第一个全面的多模态评估基准，涵盖了视频类型的多样性、时间维度的持续时间、数据模态的广度和注释的质量，以实现对MLLMs性能的全面和可靠的评估。&quot;,  
        &quot;link&quot;: &quot;http://arxiv.org/pdf/2405.21075v1&quot;  
    },  
    {  
        &quot;id&quot;: &quot;2&quot;,  
        &quot;title&quot;: &quot;Grammar-Aligned Decoding&quot;,  
        &quot;introduction&quot;: &quot;大型语言模型（LLMs）在可靠地生成高度结构化的输出方面存在困难，例如程序代码、数学公式或格式良好的标记。约束解码方法通过贪婪地限制LLMs在每一步可以输出的标记来缓解这个问题，以保证输出匹配给定的约束。具体来说，在语法约束解码（GCD）中，LLMs的输出必须遵循给定的语法。在这篇论文中，我们证明GCD技术（以及更一般的约束解码技术）会扭曲LLMs的分布，导致语法上正确但出现概率与LLMs给出的不成比例的输出，因此最终是低质量的。我们称语法约束下的采样对齐问题为语法对齐解码（GAD），并提出了一种解码算法ASAp，该算法在保证输出语法正确的同时，可以证明产生与LLMs分布条件下给定语法约束的条件概率相匹配的输出。我们的算法使用先验样本输出，合理地过估计不同输出前缀的未来的语法性。我们的评估在代码生成和结构化NLP任务上显示，ASAp通常产生比现有的GCD技术具有更高似然性（根据LLMs的分布）的输出，同时仍然执行所需的语法约束。&quot;,  
        &quot;recommend_reason&quot;: &quot;这篇论文提出了语法对齐解码（GAD）算法，该算法通过使用先验样本输出，合理地过估计不同输出前缀的未来的语法性，来保证输出语法正确的同时，产生与LLMs分布条件下给定语法约束的条件概率相匹配的输出。&quot;,  
        &quot;link&quot;: &quot;http://arxiv.org/pdf/2405.21047v1&quot;  
    },  
    {  
        &quot;id&quot;: &quot;3&quot;,  
        &quot;title&quot;: &quot;Direct Alignment of Language Models via Quality-Aware Self-Refinement&quot;,  
        &quot;introduction&quot;: &quot;强化学习从人类反馈（RLHF）已被普遍用于使大型语言模型（LLMs）的行为与人类偏好保持一致。最近，一个流行的替代方案是直接策略优化（DPO），它用一个策略本身来替换基于LLM的奖励模型，从而避免了额外的内存和训练时间来学习奖励模型的需要。然而，DPO没有考虑积极和消极响应的相对质量，可能导致次优的训练结果。为了缓解这个问题，我们研究了在飞地微调LLMs中使用内在知识来获取相对质量并帮助细化损失函数。具体来说，我们利用LLMs的知识来设计一个细化函数来估计积极和消极响应的质量。我们表明，在温和的假设下，构建的细化函数可以帮助在损失函数下自我细化。细化函数被集成到DPO及其变体身份策略优化（IPO）中。各种评估器的实验表明，它们可以改善微调模型的性能，超过DPO和IPO。&quot;,  
        &quot;recommend_reason&quot;: &quot;这篇论文研究了在飞地微调LLMs中使用内在知识来获取相对质量并帮助细化损失函数，以改善微调模型的性能。&quot;,  
        &quot;link&quot;: &quot;http://arxiv.org/pdf/2405.21040v1&quot;  
    },  
    {  
        &quot;id&quot;: &quot;4&quot;,  
        &quot;title&quot;: &quot;Standards for Belief Representations in LLMs&quot;,  
        &quot;introduction&quot;: &quot;随着大型语言模型（LLMs）在各个领域展现出非凡的能力，计算机科学家正在开发方法来理解他们的认知过程，特别是关于LLMs如何（以及是否）在其内部表示他们对世界的信念。然而，这个领域目前缺乏一个统一的理论基础来支撑对LLMs中信念的研究。本文开始填补这一空白，提出了一种表示在LLMs中被称为信念的标准。我们认为，虽然LLMs中信念测量的项目与决策理论和形式认识论中进行的信念测量具有惊人的特征，但它们也存在一些不同之处，这应该改变我们测量信念的方式。因此，借鉴哲学和当代机器学习的实践中的见解，我们建立了四个标准，平衡理论考虑与实际约束。我们提出的标准包括准确性、一致性、统一性和使用，这些标准共同帮助我们为LLMs中信念表示的全面理解打下基础。我们借鉴了实证工作，这些工作表明，单独使用各种标准来识别信念表示是有局限性的。&quot;,  
        &quot;recommend_reason&quot;: &quot;这篇论文提出了LLMs中信念表示的标准，包括准确性、一致性、统一性和使用，以帮助全面理解LLMs中信念表示。&quot;,  
        &quot;link&quot;: &quot;http://arxiv.org/pdf/2405.21030v1&quot;  
    },  
    {  
        &quot;id&quot;: &quot;5&quot;,  
        &quot;title&quot;: &quot;LACIE: Listener-Aware Finetuning for Confidence Calibration in Large Language Models&quot;,  
        &quot;introduction&quot;: &quot;当回答问题时，LLMs可以传达不仅是一个答案，而且是对答案正确性的信心水平。这包括明确的信心标记（例如给出一个数字分数）以及隐含的标记，如权威的语调或通过提供额外知识来详细阐述。为了LLMs成为可信赖的知识来源，他们传达的信心应该与他们的实际专业知识相匹配；然而，大多数当前模型倾向于过度自信。为了校准隐含和明确的信心标记，我们引入了一种实用、听众感知的微调方法（LACIE），该方法模拟听众，不仅考虑答案是否正确，还考虑答案是否会被听众接受。我们将校准视为偏好优化，创建数据通过一个双代理游戏，其中说话模型输出由模拟的听众判断。然后，我们使用LACIE微调三个LLMs（Mistral-7B，Llama3-8B，Llama3-70B），并表明，这些模型对模拟听众的校准更好。关键的是，这些趋势转移到人类听众身上，帮助他们正确预测模型的正确性：我们在一个人工评估中进行了操作，其中注释员接受或拒绝LLMs的答案，发现使用LACIE训练的结果是接受错误答案的数量减少了47%，同时保持对正确答案的接受程度不变。此外，LACIE微调推广到另一个数据集，当在TriviaQA上训练时，在TruthfulQA上的真实性有了大幅提高。我们的分析表明，LACIE导致了正确和错误示例之间更好的信心分离。从定性上看，我们发现LACIE训练的模型在正确时更倾向于权衡并隐含表示确定性，使用权威的语调或包含详细信息。最后，LACIE微调导致模型对于很可能错误的答案出现了拒绝（例如说“我不知道”）的涌现增加。&quot;,  
        &quot;recommend_reason&quot;: &quot;这篇论文提出了LACIE，这是一种实用、听众感知的微调方法，用于校准大型语言模型的信心水平，使其更准确地反映模型的实际专业知识。&quot;,  
        &quot;link&quot;: &quot;http://arxiv.org/pdf/2405.21028v1&quot;  
    }  
]



parse_json(glm_4_9b_response_5)



parse success  
</code></pre>
<p>我们再加大难度试试，这次我们将论文数扩大至 20。</p>
<pre><code># 从arxiv 按照日期获取最近与llm相关的论文，这里 max_results=20  
result_20 = subprocess.run(['curl', 'https://export.arxiv.org/api/query?search_query=llm&amp;sortBy=submittedDate&amp;sortOrder=descending&amp;max_results=20'], capture_output=True, text=True)    
print(len(result_20.stdout))  
prompt_20 = GET_ARXIV_PAPER.format(web_content=result_20.stdout)  
print(len(prompt_20))



52506  
52780  
</code></pre>
<p>此时文本长度已经来到 50k ，我们来测试下 glm-4-9b 在这种情况下的表现。</p>
<pre><code>glm_4_9b_response_20 = zhipu_client.chat.completions.create(  
    model='glm-4-9b',  
    messages=[  
        {&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: prompt_20},  
    ],  
    temperature=0.95,  
    max_tokens=8192,  
).choices[0].message.content  
print(glm_4_9b_response_20)
</code></pre>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/vI9nYe94fsEicLKOXdQyUcgtPLx1xaUaHQoibaxvw0HhOBTJRc6AAzuyajo5Qb8uq2Ssa4bib7P5giajy8qUkpQI2g/640?wx_fmt=png&amp;from=appmsg" alt=""></p>
<pre><code>parse_json(glm_4_9b_response_20)



parse error  
</code></pre>
<p>可以看到 glm-4-9b 仍然完成了绝大多数任务，但在此时在 json 格式遵循上出现了部分问题。</p>
<p>最后我们来总结一下上面的实验结果，**在长文本内容理解，信息提取总结上 glm-4-9b 有着不输于更大规模模型的表现，在 50k 以下的文本内甚至还能保持严格格式遵循，**<strong>可以称的上小模型界的一枚重磅炸弹！</strong></p>
<p><strong>有趣的 Use Case</strong></p>
<p>借助于 glm-4-9b<strong>指令遵循能力很强，长上下文，长 output</strong>  的优点，我们可以再做一个更加实用的有趣 demo：</p>
<p>我们可以利用 glm-4-9b<strong>实现一个 paper agent</strong> ，从 arxiv api<strong>订阅获取每日的最新 paper，并且仔细阅读论文原文为我们总结论文核心内容</strong> 。</p>
<pre><code>import subprocess  
import re  
import json  
from zhipuai import ZhipuAI  
  
# Initialize the ZhipuAI client  
zhipu_client = ZhipuAI(api_key=&quot;......&quot;)  
  
class Trigger:  
    GET_ARXIV_PAPER = &quot;&quot;&quot;  
    ## Task  
    如下是从Arxiv中获取到的文章，请你按照如下json格式总结所有文章的信息并依次返回，不要输出任何其他内容，确保你的输出能够被json.load()方法解析  
    {{  
        id: &quot;序号，从1开始&quot;,  
        title: &quot;论文标题&quot;,  
        introduction: &quot;论文摘要的中文翻译&quot;,  
        recommend_reason: &quot;为什么推荐这篇论文的理由&quot;,  
        link: &quot;论文的pdf文件链接&quot;  
    }}  
    ## Papers  
    {web_content}  
    &quot;&quot;&quot;  
    # 你可以优化下面的提示词来取得更好的效果  
    GET_ARXIV_PDF = &quot;&quot;&quot;  
    ## Task  
    在阅读下面的论文时，提取以下关键信息：  
  
    1. 基本信息：  
    - 论文标题、作者、发表日期、发表期刊、关键词  
  
    2. 摘要：  
    - 摘要内容：概括论文的整体内容。  
  
    3. 研究背景：  
    - 研究的背景和动机：为什么进行这项研究。  
    - 研究的主要问题或挑战：研究要解决的问题。  
  
    4. 研究目的：  
    - 研究目标：研究的主要目标。  
  
    5. 文献综述：  
    - 相关领域已有的研究：总结相关领域已有研究。  
    - 本研究的理论基础：本研究是如何建立在之前研究基础上的。  
  
    6. 研究方法：  
    - 研究方法和技术：研究中使用的方法和技术。  
    - 数据收集和分析：数据是如何收集和分析的。  
  
    7. 研究结果：  
    - 主要研究结果：研究发现。  
    - 结果与研究目标的关系：结果如何支持研究目标。  
  
    8. 讨论：  
    - 研究结果的意义：研究结果的意义和影响。  
    - 结果如何解释和支持研究假设：解释研究结果是否支持假设，提供合理的解释。  
    - 有哪些意外发现或有趣的结果。  
  
    9. 结论：  
    - 研究的主要结论：研究的结论。  
    - 研究的局限性：研究的局限。  
    - 对未来研究的建议：未来研究的建议和方向。  
  
    10. 参考文献：  
    - 关键参考文献：几篇重要的参考文献。  
  
    11. 研究贡献：  
    - 研究对该领域的主要贡献：研究的创新点和贡献。  
  
    12. 实际应用：  
    - 研究结果的实际应用：研究结果的实际应用及其对行业或社会的影响。  
  
    ## Content  
    {content}  
    &quot;&quot;&quot;  
  
    def __init__(self, websites: list = []) -&gt; None:  
        self.websites = websites  
  
    def predict(self, prompt: str) -&gt; str:  
        response = zhipu_client.chat.completions.create(  
            model='glm-4-9b',  
            messages=[{&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: prompt}],  
            temperature=0.95,  
            max_tokens=8192,  
        ).choices[0].message.content  
        return response  
  
    def fetch_papers(self, website: str) -&gt; str:  
        result = subprocess.run(['curl', website], capture_output=True, text=True)  
        if result.returncode == 0:  
            return result.stdout  
        else:  
            print(f&quot;Error: {result.stderr}&quot;)  
            return None  
  
    def parse_json(self, text: str) -&gt; list:  
        pattern = r'```json(.*)```'  
        match = re.search(pattern, text, re.DOTALL)  
        if match:  
            json_text = match.group(1).strip()  
            try:  
                return json.loads(json_text)  
            except json.JSONDecodeError:  
                print(&quot;JSON decode error&quot;)  
                return []  
        else:  
            print(&quot;No JSON content found&quot;)  
            return []  
  
    def get_arxiv_pdf(self, pdf_link: str) -&gt; str:  
        result = subprocess.run(['curl', f'https://r.jina.ai/{pdf_link}'], capture_output=True, text=True)  
        if result.returncode == 0:  
            return result.stdout  
        else:  
            print(f&quot;Error: {result.stderr}&quot;)  
            return None  
  
    def run(self) -&gt; list:  
        result = []  
        for website in self.websites:  
            web_content = self.fetch_papers(website)  
            if web_content:  
                web_summary = self.predict(self.GET_ARXIV_PAPER.format(web_content=web_content))  
                json_data = self.parse_json(web_summary)  
                for paper in json_data:  
                    pdf_content = self.get_arxiv_pdf(paper['link'])  
                    if pdf_content:  
                        pdf_summary = self.predict(self.GET_ARXIV_PDF.format(content=pdf_content))  
                        paper['summary'] = pdf_summary  
                result.append(json_data)  
        print(&quot;task done!&quot;)  
        return result  
trigger = Trigger(websites=['https://export.arxiv.org/api/query?search_query=llm&amp;sortBy=submittedDate&amp;sortOrder=descending&amp;max_results=5'])  
papers_summary = trigger.run()  
with open('output.jsonl', 'w', encoding='utf-8') as file:    
    for i in papers_summary:  
        for item in i:    
            json_str = json.dumps(item, ensure_ascii=False)    
            file.write(json_str + '\n')
</code></pre>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/sz_mmbiz_png/vI9nYe94fsEicLKOXdQyUcgtPLx1xaUaHFxjqicfvq3KGT705LpbydITLOGdPudwycbACh9utZO1Cf7RfxG3PQrg/640?wx_fmt=png&amp;from=appmsg" alt=""></p>
<p>paper agent 结果</p>
<p>可以看到 glm-4-9b 出色地完成了<strong>从论文提取，到 paper 阅读再到 paper 关键内容总结的全部任务</strong> ，并且保证在这样一个对中间过程要求严格的测试条件下保证稳定。</p>
<p><strong>对未来的展望</strong></p>
<p>从上面的测试中可以看出，<strong>glm-4-9b 在长文本任务，指令遵循上表现相当优秀，同时又能保持相当高的多语言水平与逻辑能力</strong> ，以 9b 的体量与更大体量的模型掰掰手腕，而相比于这些模型，glm-4-9b有着推理速度快，部署成本低，易于微调等不可忽视的优点，而在如下的场景中 glm-4-9b 更是适合落地的最佳人选：</p>
<p><strong>智能客服与聊天机器人：</strong> glm-4-9b 能够快速响应用户查询，并提供相关的信息和建议。它们能够处理用户输入的长文本，理解上下文，能够保持对用户历史偏好的记忆，并给出恰当的回应。</p>
<p><strong>实时文本分析：</strong> 在社交媒体监控、新闻分析等领域，需要实时处理大量的文本数据。glm-4-9b 能够迅速分析文本内容，提取关键信息，并生成报告或警报。</p>
<p><strong>个性化推荐系统：</strong> 在电商、视频平台等场景中，基于用户的历史行为和偏好进行个性化推荐至关重要。glm-4-9b 可以处理用户的长期行为数据，理解用户的兴趣和需求，并生成精准的推荐结果同时使用成本较低。</p>
<p>相关领域的小伙伴们可以用起来啦！</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/mmbiz_png/vI9nYe94fsGxu3P5YibTO899okS0X9WaLmQCtia4U8Eu1xWCz9t8Qtq9PH6T1bTcxibiaCIkGzAxpeRkRFYqibVmwSw/640?wx_fmt=other&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1&amp;tp=webp" alt=""><br>
<strong>一起</strong>**“<strong><strong>点赞</strong></strong>”**<strong>三连↓</strong></p>
<p>更多AI工具，参考<a href="https://ai123.869hr.uk/">Github-AI123</a>，<a href="https://ai123.869hr.uk/">国内AI123</a></p>



          </div>

<<<<<<< HEAD

=======
 可扫如下微信二维码加好友
>>>>>>> HEAD@{1}

<p><img src="/images/aitools/2024/03/qrcode_for_gh_dde1b429630d_258.jpg" alt=""></p>

        </article>

      </div>
    </div>
  </div>
</section>
        </div>
    </div>
    </main>




<script type='text/javascript' src='/assets/js/jquery.ui.touch-punch.min-0.2.2.js' id='jqueryui-touch-js'></script>
<script type='text/javascript' src='/assets/js/clipboard.min-5.6.2.js' id='clipboard-js'></script>
<script type='text/javascript' src='/assets/js/tooltip-extend.js' id='iplaycode-nav-js'></script>
<script type='text/javascript' id='popper-js-extra'>
 

var theme = {"ajaxurl":"","addico":"https:\/\/nav.baidu.cn\/wp-content\/themes\/onenav\/images\/add.png","order":"asc","formpostion":"top","defaultclass":"io-grey-mode","isCustomize":"1","icourl":"","icopng":".png","urlformat":"1","customizemax":"10","newWindow":"0","lazyload":"1","minNav":"1","loading":"1","hotWords":"baidu","classColumns":" col-sm-6 col-md-4 col-xl-5a col-xxl-6a ","apikey":"TWpBeU1UVTNOekk1TWpVMEIvZ1M2bFVIQllUMmxsV1dZelkxQTVPVzB3UW04eldGQmxhM3BNWW14bVNtWk4="};
 
</script>
<script type='text/javascript' src='/assets/js/popper.min.js' id='popper-js'></script>
<script type='text/javascript' src='/assets/js/bootstrap.min-4.3.1.js' id='bootstrap-js'></script>
<script type='text/javascript' src='/assets/js/theia-sticky-sidebar-1.5.0.js' id='sidebar-js'></script>
<script type='text/javascript' src='/assets/js/lazyload.min-12.4.0.js' id='lazyload-js'></script>
<script type='text/javascript' src='/assets/js/fancybox.min-3.5.7.js' id='lightbox-js-js'></script>

<script type='text/javascript' src='/assets/js/app-anim.js' id='appanim-js'></script>

<script type="text/javascript">
    $(document).ready(function(){
        var siteWelcome = $('#loading');
        siteWelcome.addClass('close');
        setTimeout(function() {
            siteWelcome.remove();
        }, 600);
    });
</script>
<script>        
    $(document).ready(function(){
        setTimeout(function () {
            if ($('a.smooth[href="' + window.location.hash + '"]')[0]) {
                $('a.smooth[href="' + window.location.hash + '"]').click();
            }else if (window.location.hash != '') {
                $("html, body").animate({
                    scrollTop: $(window.location.hash).offset().top - 90
                }, {
                    duration: 500,
                    easing: "swing"
                });
            }
        }, 300);
        $(document).on('click','a.smooth',function(ev) {
            if($('#sidebar').hasClass('show') && !$(this).hasClass('change-href')){
                $('#sidebar').modal('toggle');
            }
            if($(this).attr("href").substr(0, 1) == "#"){
                $("html, body").animate({
                    scrollTop: $($(this).attr("href")).offset().top - 90
                }, {
                    duration: 500,
                    easing: "swing"
                });
            }
            if($(this).hasClass('go-search-btn')){
                $('#search-text').focus();
            }
            if(!$(this).hasClass('change-href')){
                var menu =  $("a"+$(this).attr("href"));
                menu.click();
                toTarget(menu.parent().parent(),true,true);
            }
        });
        $(document).on('click','a.tab-noajax',function(ev) {
            var url = $(this).data('link');
            if(url)
                $(this).parents('.d-flex.flex-fill.flex-tab').children('.btn-move.tab-move').show().attr('href', url);
            else
                $(this).parents('.d-flex.flex-fill.flex-tab').children('.btn-move.tab-move').hide();
        });
        
    });
</script>

<script>

(function(){
    if(document.cookie.replace(/(?:(?:^|.*;\s*)night\s*\=\s*([^;]*).*$)|^.*$/, "$1") === ''){
        if(new Date().getHours() > 22 || new Date().getHours() < 6){
            document.body.classList.remove('io-black-mode');
            document.body.classList.add('io-grey-mode');
            document.cookie = "night=1;path=/";
            console.log('夜间模式开启');
        }else{
            document.body.classList.remove('night');
            document.cookie = "night=0;path=/";
            console.log('夜间模式关闭');
        }
    }else{
        var night = document.cookie.replace(/(?:(?:^|.*;\s*)night\s*\=\s*([^;]*).*$)|^.*$/, "$1") || '0';
        if(night == '0'){
            document.body.classList.remove('night');
        }else if(night == '1'){
            document.body.classList.add('night');
        }
    }
})();

$("#search-bg").css("background", "linear-gradient(#e2c4c4, #d8d8d8)");   
function switchNightMode(){
    var night = document.cookie.replace(/(?:(?:^|.*;\s*)night\s*\=\s*([^;]*).*$)|^.*$/, "$1") || '0';
    if(night == '0'){
	$("#search-bg").css("background", "linear-gradient(#e2c4c4, #d8d8d8)");
        document.body.classList.remove('io-grey-mode');
        document.body.classList.add('io-black-mode');
        document.cookie = "night=1;path=/"
        console.log(' ');
        $(".switch-dark-mode").attr("data-original-title","日间模式");
        $(".mode-ico").removeClass("icon-night");
        $(".mode-ico").addClass("icon-light");
    }else{
	$("#search-bg").css("background", "linear-gradient(#4f4040, #1b1d1f)");
        document.body.classList.remove('io-black-mode');
        document.body.classList.add('io-grey-mode');
        document.cookie = "night=0;path=/"
        console.log(' ');
        $(".switch-dark-mode").attr("data-original-title","夜间模式");
        $(".mode-ico").removeClass("icon-light");
        $(".mode-ico").addClass("icon-night");
    }
}
</script>


<script>
    var newsContainer = document.getElementById('news-container');
    var newsItems = document.getElementsByClassName('news-item');
    var currentItem = 0;

    setInterval(function() {
        
        newsItems[currentItem].classList.remove('show');
        newsItems[currentItem].style.transform = 'translateY(-20px)';
        
        currentItem = (currentItem + 1) % newsItems.length;
        newsItems[currentItem].style.transform = 'translateY(' + (newsContainer.offsetHeight - 20) + 'px)';
        setTimeout(function() {
            newsItems[currentItem].classList.add('show');
        }, 500);
    }, 8000);
</script>

</body>
</html>


