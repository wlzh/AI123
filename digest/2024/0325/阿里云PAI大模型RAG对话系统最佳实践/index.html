

<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="theme-color" content="#f9f9f9" />

	<title>阿里云PAI大模型RAG对话系统最佳实践 作者： 云推荐服务 来源： 云推荐服务 本文涉及的产品 交互式建模 PAI-DSW，5000CU*H 3个月 去年4月至9月，阿里云人工智能平台 PAI 团队与大数据基础工程技术团队合作，构建了基于知识库检索增强的大模型答疑对话机器人，并在阿里云官方答疑链路、研发  | AI123| ai工具网址导航,ai最新产品</title>
	<link rel="shortcut icon" href="/assets/images/favicon.png" />
    <meta name="keywords" content="chatgpt,AI,AI聊天,AI文本生成,AI绘画,AI编程,AI电商" />
    <meta name="description" content="AI123 网址导航 | 免费chatgpt 汇集各类先进的人工智能产品，旨在帮助用户更快速地了解和使用这些产品,轻松地浏览不同领域的AI产品，包括语音识别、图像处理、自然语言处理。" />
    
    <meta name="baidu-site-verification" content="codeva-LoCoq3KOzQ" />
    
    <link rel="stylesheet" id="block-library-css"
        href="/assets/css/block-library.min-5.6.2.css" type="text/css" media="all" />
    <link rel="stylesheet" id="iconfont-css" href="/assets/css/iconfont-3.03029.1.css"
        type="text/css" media="all" />

    
    <link href="/scss/style.min.css" rel="stylesheet" />
    
		    <link rel="stylesheet" id="iowen-css" href="/assets/css/style-3.03029.1.css"
        type="text/css" media="all" />
    <link rel="stylesheet" id="custom-css" href="/assets/css/custom-style.css"
        type="text/css" media="all" />
		
		<link rel="stylesheet" href=/plugins/font-awesome/css/font-awesome.min.css />


    <link rel="stylesheet" id="fortawesome-css" href="/assets/fontawesome-5.15.4/css/all.min.css" type="text/css" />


    <script type="text/javascript" src="/assets/js/jquery.min-3.2.1.js" id="jquery-js"></script>
    <script type="text/javascript" src="/assets/js/content-search.js"  id="content-search-js"></script>

    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2634092855285462"
     crossorigin="anonymous"></script>

	
    <script>
        

		var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?8450bc732b2a86f7e4aec4ebd9fd8252";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();

        
    </script>
    

    
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-7071W80M2K"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-7071W80M2K');
    </script>

</head>


    <div class="page-container">
	
	<div id="sidebar" class="sticky sidebar-nav fade animate-nav" style="width: 170px">
        
            <div class="modal-dialog h-100 sidebar-nav-inner">
                <div class="sidebar-logo border-bottom border-color">
                    
                    <div class="logo overflow-hidden">
                        <a href="https://ai123.869hr.uk/" class="logo-expanded">
                            <img src="/assets/images/bt8-expand-light.png" height="40" class="logo-light"
                                alt="AI123| ai工具网址导航,ai最新产品">
                            <img src="/assets/images/bt8-expand-dark.png" height="40" class="logo-dark d-none"
                                alt="AI123| ai工具网址导航,ai最新产品">
                        </a>
                        <a href="https://ai123.869hr.uk/" class="logo-collapsed">
                            <img src="/assets/images/bt.png" height="40" class="logo-light"
                                alt="AI123| ai工具网址导航,ai最新产品">
                            <img src="/assets/images/bt.png" height="40" class="logo-dark d-none"
                                alt="AI123| ai工具网址导航,ai最新产品">
                        </a>
                    </div>
                    
                </div>
                <div class="sidebar-menu flex-fill">
                    <div class="sidebar-scroll">
                        <div class="sidebar-menu-inner">
                            <ul>
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#00834a9dd147b04c5d53d4368cdb0b57" class="smooth">
                                            <i class="fas fa-sun fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>本月热门</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#db0311e7ecfedd24d157f0ceb4a0897f" class="smooth">
                                            <i class="fas fa-star-and-crescent fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>热门网站</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#21b5cbb2c769010fec3ce029a5f8a4a3" class="smooth">
                                            <i class="far fa-star fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>国内热门</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#8310718935e8ec25ce0350de01e3f7dc" class="smooth">
                                            <i class="fas fa-phone fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>对话工具</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#d58e850d9115797306c2edf61ac6ddd8" class="smooth">
                                            <i class="fas fa-newspaper fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>写作</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#2a7418a5f8f1ca4e054364a9300657df" class="smooth">
                                            <i class="fas fa-image fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>图像生成</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#7808a68ee1b34dab43011429a12de19e" class="smooth">
                                            <i class="fas fa-image fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>图像处理</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#6729afc51f5ac49a828812fa0eb0c82f" class="smooth">
                                            <i class="fas fa-video fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>音视频</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#e5ce844860451fff3faf3d8f8894971d" class="smooth">
                                            <i class="fas fa-music fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>音乐生成</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#db53804b7d726967c58fcc8c9ca03d27" class="smooth">
                                            <i class="fas fa-language fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>办公</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#47b7af9547e034d28fe6f6d439968ac8" class="smooth">
                                            <i class="fas fa-copy fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>提示词</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#41282bf95e43c64d579757573a03cdde" class="smooth">
                                            <i class="fas fa-code fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>编程</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#fd71852fd52d5e18ef4f9a252f1eac58" class="smooth">
                                            <i class="fas fa-search fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>AI搜索</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#81b1637fbe47625dbdf2094acd3b6683" class="smooth">
                                            <i class="fas fa-language fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>文本翻译</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#2e9ba3fa6e1ed0e9311b3e97f97f9a40" class="smooth">
                                            <i class="fas fa-book fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>学习网站</span>
                                        </a>
                                    </li>
                                    
                                
                            </ul>           
                        </div>
                    </div>
                </div>
                <div class="border-top py-2 border-color">
                    <div class="flex-bottom">
                        <ul>
			    <li id="menu-item-212"
                                 class="menu-item menu-item-type-custom menu-item-object-custom menu-item-212 sidebar-item">
                                 <a href="#friendlink" class="smooth">
                                     <i class="fab fa-staylinked icon-fw icon-lg mr-2"></i>
                                     <span>友情链接</span>
                                 </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>


<div class="flex-fill grid-bg">
    <div class="big-header-banner">
        <div id="header" class="page-header sticky">
            <div class="navbar navbar-expand-md">
                <div class="container-fluid p-0">

                    <a href="" class="navbar-brand d-md-none" title="AI123| ai工具网址导航,ai最新产品">
                        <img src="/assets/images/bt.png" class="logo-light"
                            alt="AI123| ai工具网址导航,ai最新产品">
                        <img src="/assets/images/bt.png" class="logo-dark d-none"
                            alt="AI123| ai工具网址导航,ai最新产品">
                    </a>

                    <div class="collapse navbar-collapse order-2 order-md-1">
                        <div class="header-mini-btn">
                            <label>
                                <input id="mini-button" type="checkbox">
                                <svg viewbox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                                    <path class="line--1" d="M0 40h62c18 0 18-20-17 5L31 55"></path>
                                    <path class="line--2" d="M0 50h80"></path>
                                    <path class="line--3" d="M0 60h62c18 0 18 20-17-5L31 45"></path>
                                </svg>
                            </label>

                        </div>

                        <ul class="navbar-nav site-menu" style="margin-right: 16px;">
                        
			<li >
				<a href="/">
                                    <i class="fa fa-home fa-lg mr-2"></i>
                                    <span>首页</span>
                                </a>
				<ul class="sub-menu">
				
				</ul>
			    </li>
			
			</ul>

                        
                        <div class="rounded-circle weather">
                            <div id="he-plugin-simple" style="display: contents;"></div>
                            <script>WIDGET = {
                                    CONFIG: {
                                        "modules": "01234",
                                        "background": 5,
                                        "tmpColor": "008000",
                                        "tmpSize": 14,
                                        "cityColor": "008000",
                                        "citySize": 14,
                                        "aqiColor": "#008000",
                                        "aqiSize": 14,
                                        "weatherIconSize": 24,
                                        "alertIconSize": 18,
                                        "padding": "10px 10px 10px 10px",
                                        "shadow": "1",
                                        "language": "auto",
                                        "borderRadius": 5,
                                        "fixed": "false",
                                        "vertical": "middle",
                                        "horizontal": "left",
                                        "key": "085791e805a24491b43b06cf58ab31e7"
                                    }
                                }
                            </script>
                            <script src="https://widget.qweather.net/simple/static/js/he-simple-common.js?v=2.0"></script>
                        </div>
                        
                    </div>

                    <ul class="nav navbar-menu text-xs order-1 order-md-2">
                        
                        
                        <li class="nav-item mr-3 mr-lg-0 d-none d-lg-block">
                            <script>
                                fetch('https://v1.hitokoto.cn')
                                    .then(response => response.json())
                                    .then(data => {
                                    const hitokoto = document.getElementById('hitokoto_text')
                                    hitokoto.href = 'https://hitokoto.cn/?uuid=' + data.uuid
                                    hitokoto.innerText = data.hitokoto
                                    })
                                    .catch(console.error)
                            </script>                           
                            <div id="hitokoto"><a href="#" target="_blank" id="hitokoto_text">疏影横斜水清浅，暗香浮动月黄昏。</a></div>
                        </li>
                        
                        
                        <li class="nav-search ml-3 ml-md-4">
                            <a href="javascript:" data-toggle="modal" data-target="#search-modal"><i
                                    class="iconfont icon-search icon-2x"></i></a>
                        </li>
                        <li class="nav-item d-md-none mobile-menu ml-3 ml-md-4">
                            <a href="javascript:" id="sidebar-switch" data-toggle="modal"
                                data-target="#sidebar"><i class="iconfont icon-classification icon-2x"></i></a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="placeholder" style="height:74px"></div>
    </div>




<body class="page-body boxed-container  io-grey-mode">
    <main role="main" class="flex-shrink-0">
    <div class="container">
        
        <div class="content">
            <style>
    body{
	    background: #f9f9f9;
	}

    h1, h2, h3, h4, h5, h6 {
        margin-top: 1.5rem;
        margin-bottom: 1.5rem;
    }


 
@media (min-width: 1000px) {
  .container, .container-sm {
    max-width: 800px;
  }
}

</style>

<div class="featured-post-content">

    <a href="/digest/" class="featured-post-title">
       AI 文摘
    </a>

</div>

<section class="blog-single">
  <div class="container">
    <div class="row">

      <div class="col-lg-12 order-1 order-lg-2">
        <article class="single-blog">
          <p class="title">阿里云PAI大模型RAG对话系统最佳实践</p>
            <br/>
          <ul class="meta">
            <li>
              By <a href=https://ai123.869hr.uk/about>AI123</a>
            </li>
            <li>
              <i class="fa fa-clock-o"></i>
              March 25, 2024 - 2 min read
            </li>
          </ul>

          <div class="_1NCGf">
              <img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/mmbiz_jpg/tXo0Z4jTLeK0yxQWxiaBWcQApgSRuZPZ5W6wJ9JDUFy0UgkgX4M30J8u7MNBtFHUknyMnibYmo1kh0Rfl6h8lYRg/640?wx_fmt=jpeg&amp;from=appmsg" width="640" >
          </div>
            <br>
            <br>
            <br>
          
          <div class="single-blog-content">
            <p>作者： 云推荐服务  来源： <a href="https://mp.weixin.qq.com/s/ePKKUpJFZovmFnrrz9MZlQ">云推荐服务</a></p>
<p>本文涉及的产品</p>
<p>交互式建模 PAI-DSW，5000CU*H 3个月</p>
<p>去年4月至9月，阿里云人工智能平台 PAI 团队与大数据基础工程技术团队合作，构建了基于知识库检索增强的大模型答疑对话机器人，并在阿里云官方答疑链路、研发小蜜、钉钉大数据技术服务助手等多个线上场景上线，显著提升答疑效率。相关文档：<a href="https://mp.weixin.qq.com/s?spm=a2c6h.13046898.publish-article.36.6df46ffaIH1aza&amp;__biz=Mzg4MzgxNDk2OA==&amp;mid=2247491025&amp;idx=1&amp;sn=c9142c75652940395db8f12789688c97&amp;scene=21#wechat_redirect">【万字长文】基于阿里云PAI搭建知识库向量检索增强的大模型对话系统</a></p>
<p>上线几个月来，随着 RAG 技术日趋火热，我们保持对线上链路的迭代，不断加入学界业界最新的 RAG 优化技术（eg: advanced RAG），改进了包括<strong>知识入库</strong> 、** query 改写** 、<strong>多路检索</strong> 、<strong>召回融合</strong> 、<strong>结果重排序</strong> 、<strong>prompt 工程</strong> 等在内的多个 RAG 模块，线上提效显著。<strong>文中包含上述模块线上调优中积累的部分 Tricks，更多优化细节欢迎联系我们业务合作</strong>**（钉钉群号：42250004375）****。**</p>
<p>目前本轮优化已上线阿里云官网最佳实践，并开源在 PAI-RAG 代码库中。随着 RAG 技术迅猛发展，我们在不断跟进最新优化技术，并迭代加入代码库与最佳实践中。</p>
<ul>
<li>
<p>阿里云官网：阿里云大模型RAG对话系统最佳实践</p>
</li>
<li>
<p>开源代码库</p>
</li>
</ul>
<p>本文为大模型RAG对话系统最佳实践，旨在指引AI开发人员如何有效地结合LLM大语言模型的推理能力和外部知识库检索增强技术，从而显著提升对话系统的性能，使其能更加灵活地返回用户查询的内容。适用于问答、摘要生成和其他依赖外部知识的自然语言处理任务。通过该实践，您可以掌握构建一个大模型RAG对话系统的完整开发链路。</p>
<h4 id="1-背景信息">1. 背景信息</h4>
<p>大语言模型（LLM）在生成准确和实时的回复方面存在局限性，不适合直接用于需要精确信息的客服或问答等场景。当前业界普遍采用基于检索增强的RAG技术来改善LLM的表现。该方法通过结合LLM的归纳生成能力和向量检索库的检索能力，增强对用户查询的理解，并产生更加可靠的回复。</p>
<p>检索增强生成（Retrieval-Augmented Generation, RAG）技术结合了大语言模型（LLM），如通义千问，与信息检索系统，以提高文本生成的准确性和丰富度。在响应用户查询时，RAG首先利用检索系统从知识库中检索相关内容，然后将检索到的内容与原始查询一同输入大语言模型（LLM），从而让语言模型不用重新训练就能够获取最新的信息，并产生可靠的输出。RAG特别适用于问答、摘要生成和其他依赖外部知识的自然语言处理任务，同时还支持定制化提示（Prompt）和基于检索的多轮对话管理，类似于LangChain，从而进一步优化用户交互体验和答案质量。</p>
<h4 id="11方案架构">1.1方案架构</h4>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/mmbiz_png/tXo0Z4jTLeK0yxQWxiaBWcQApgSRuZPZ5zRuywKVsZ88O9t3ZjSIr9uwzUTmZrrkBwy0knWuIyRITQZHczUibWtg/640?wx_fmt=png&amp;from=appmsg" alt=""></p>
<p>本方案包括以下功能模块：</p>
<ul>
<li>
<p>向量检索库准备：根据场景需求选择开通Hologres、AnalyticDB PostgreSQL或ElasticSearch，或使用Faiss作为向量检索库供后续RAG对话系统链路使用。</p>
</li>
<li>
<p>对话模型推理服务在线部署：您可以在EAS中将对话模型部署为在线服务，以供后续RAG对话系统链路中调用模型服务。</p>
</li>
<li>
<p>RAG服务在线部署：您可以在EAS中部署LangChain的WebUI服务。</p>
</li>
<li>
<p>在WebUI界面进行知识问答：打开RAG服务的WebUI应用，然后串联自定义的业务数据进行知识问答，验证对话系统的效果。</p>
</li>
</ul>
<h4 id="2-前提条件">2. 前提条件</h4>
<ul>
<li>
<p>已开通PAI（EAS）并创建了默认工作空间。具体操作，请参见开通PAI并创建默认工作空间。</p>
</li>
<li>
<p>如果使用RAM用户来部署模型，需要为RAM用户授予EAS的管理权限，详情请参见云产品依赖与授权：EAS。</p>
</li>
<li>
<p>已创建一个专有网络VPC、交换机和安全组。详情请参见创建和管理专有网络和创建安全组。</p>
</li>
<li>
<p>已购买灵骏智算资源。具体操作，请参见灵骏智算资源配额。<strong>如果不做大规模预训练与微调，仅做应用部署，则可跳过该步骤。</strong></p>
</li>
</ul>
<p><strong>说明</strong></p>
<p>● 仅在华北6（乌兰察布）地域支持购买灵骏资源，且需要开通白名单。</p>
<p>● 当前灵骏智算资源仅供白名单用户受限申请使用，如果您希望使用灵骏智算资源，您可先提交工单，申请添加灵骏智算使用白名单。</p>
<h4 id="3-步骤一准备向量检索库">3. 步骤一：准备向量检索库</h4>
<p>具体步骤一，请参见文档</p>
<p>您可以选择以下任意一种产品构建本地向量库：</p>
<ul>
<li>
<p>Faiss（Facebook AI Similarity Search）</p>
</li>
<li>
<p>Hologres</p>
</li>
<li>
<p>AnalyticDB PostgreSQL</p>
</li>
<li>
<p>Elasticsearch</p>
</li>
</ul>
<p>其中，Faiss无需开通或购买即可使用，Hologres、AnalyticDB PostgreSQL和ElasticSearch需要开通并准备相应的WebUI界面配置参数。后续您可以使用准备好的参数连接向量检索库。</p>
<h4 id="31-hologres">3.1 Hologres</h4>
<ol>
<li>
<p>开通Hologres实例并创建数据库。具体操作，请参见购买Hologres。您需要将已创建的数据库名称保存到本地。</p>
</li>
<li>
<p>在实例详情页面查看调用信息。</p>
</li>
</ol>
<pre><code>1. 单击实例名称，进入**实例详情** 页面。

2. 在**网络信息** 区域，单击**指定VPC** 后的**复制** ，将域名:80前面的内容保存到本地。
</code></pre>
<ol start="3">
<li>切换到<strong>账号管理</strong> Tab页，创建自定义用户。并将账号和密码保存到本地，后续用于连接Hologres实例。具体操作，请参见创建自定义用户。</li>
</ol>
<p>其中：<strong>选择成员角色</strong> 选择<strong>实例超级管理员（SuperUser）</strong> 。</p>
<h4 id="32-analyticdb-for-postgresql">3.2 AnalyticDB for PostgreSQL</h4>
<ol>
<li>
<p>在AnalyticDB for PostgreSQL版控制台上创建实例。具体操作，请参见创建实例。其中：<strong>向量引擎优化</strong> 选择<strong>开启</strong> 。</p>
</li>
<li>
<p>单击实例名称，进入<strong>基本信息</strong> 页面，在该页面中的<strong>数据库连接信息</strong> 区域，复制内网地址和外网地址并保存到本地。</p>
</li>
</ol>
<p><strong>说明</strong></p>
<p>● 如果没有外网地址，您需要单击申请外网地址来获取。具体操作，请参见管理外网地址。</p>
<p>● 如果在同一个VPC内连接实例，只需使用内网地址。</p>
<p>● 创建数据库账号，并将数据库账号和密码保存到本地，后续用于连接数据库。具体操作，请参见创建数据库账号。</p>
<p>● 配置白名单为0.0.0.0/0。具体操作，请参见设置白名单。</p>
<h4 id="33-elasticsearch">3.3 ElasticSearch</h4>
<ol>
<li>创建阿里云Elasticsearch实例。具体操作，请参见创建阿里云Elasticsearch实例。其中：</li>
</ol>
<pre><code>***选择服务** 选择**通用商业版** 。

***场景初始化配置** 选择**通用场景** 。

* 您需要将在**网络及系统配置** 向导页面配置的**登录名** 和**登录密码** 保存到本地。
</code></pre>
<ol start="2">
<li>单击实例名称，进入实例<strong>基本信息</strong> 页面。在该页面获取<strong>私网地址</strong> 和<strong>私网端口</strong> 并保存到本地。</li>
</ol>
<h4 id="34-faiss">3.4 Faiss</h4>
<p>使用Faiss构建本地向量库，无需购买线上向量库产品，免去了线上开通向量库产品的复杂流程，更轻量易用。</p>
<h4 id="4-步骤二部署模型服务">4. 步骤二：部署模型服务</h4>
<p>具体步骤二，请参见文档</p>
<p>在本方案的RAG对话系统链路中，需要部署对话模型推理服务和RAG服务，分别作为与用户交互的对话模型和知识文档预处理步骤的QA提取模型。具体操作步骤如下：</p>
<h4 id="41-部署对话模型推理服务">4.1 部署对话模型推理服务</h4>
<p>您可以使用自定义的数据微调训练对话模型并部署为推理服务，具体操作，请参见灵骏分布式训练和部署模型。本方案以预置镜像为例，介绍如何部署对话模型推理服务：</p>
<ol>
<li>进入<strong>PAI-EAS 模型在线服务</strong> 页面。</li>
</ol>
<pre><code>1. 登录PAI控制台。

2. 在左侧导航栏单击**工作空间列表** ，在工作空间列表页面中单击待操作的工作空间名称，进入对应工作空间内。

3. 在工作空间页面的左侧导航栏选择**模型部署&gt;模型在线服务（EAS）** ，进入**PAI-EAS 模型在线服务** 页面。
</code></pre>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/mmbiz_png/tXo0Z4jTLeK0yxQWxiaBWcQApgSRuZPZ5jOSoWgAQxibQ00f7FgHxziaVvuKeo49kf5NZyLrQBbtO8XPv3eSQXL2w/640?wx_fmt=png&amp;from=appmsg" alt=""></p>
<ol start="2">
<li>
<p>在<strong>PAI-EAS 模型在线服务</strong> 页面，单击<strong>部署服务</strong> ，在弹出对话框中，选择<strong>自定义部署</strong> ，然后单击<strong>确定</strong> 。</p>
</li>
<li>
<p>在<strong>部署服务</strong> 页面，配置以下关键参数。</p>
</li>
</ol>
<p><strong>参数</strong>
<strong>描述</strong></p>
<p><strong>服务名称</strong>
自定义服务名称。</p>
<p><strong>部署方式</strong>
选择<strong>镜像部署AI-Web应用</strong> 。</p>
<p><strong>镜像选择</strong>
在<strong>PAI平台镜像</strong> 列表中选择<strong>chat-llm-webui</strong> ；镜像版本选择<strong>2.0</strong> 。<strong>说明</strong> 由于版本迭代迅速，部署时镜像版本选择最高版本即可。</p>
<p><strong>运行命令</strong>
不同的模型类型对应的运行命令如下：</p>
<ul>
<li>
<p>使用<strong>chatglm2-6b</strong> 模型进行部署：python webui/webui_server.py &ndash;port=8000 &ndash;model-path=THUDM/chatglm2-6b</p>
</li>
<li>
<p>使用<strong>通义千问-7b</strong> 模型进行部署：python webui/webui_server.py &ndash;port=8000 &ndash;model-path=Qwen/Qwen-7B-Chat</p>
</li>
<li>
<p>使用<strong>llama2-7b</strong> 模型进行部署：python webui/webui_server.py &ndash;port=8000 &ndash;model-path=meta-llama/Llama-2-7b-chat-hf</p>
</li>
<li>
<p>使用<strong>Llama2-13b</strong> 模型进行部署：python webui/webui_server.py &ndash;port=8000 &ndash;model-path=meta-llama/Llama-2-13b-chat-hf &ndash;precision=fp16</p>
</li>
</ul>
<p><strong>端口号</strong> 配置为：8000。</p>
<p><strong>资源组种类</strong>
选择<strong>公共资源组</strong> 。</p>
<p><strong>资源配置方法</strong>
选择<strong>常规资源配置</strong> 。</p>
<p><strong>资源配置选择</strong>
必须选择<strong>GPU</strong> 类型，<strong>实例规格</strong> 推荐使用<strong>ml.gu7i.c16m60.1-gu30</strong> （性价比最高）。</p>
<p><strong>专有网络配置</strong></p>
<ul>
<li>
<p>当选择Hologres、AnalyticDB for PostgreSQL或ElasticSearch作为向量检索库时，请确保所配置的专有网络与选定的向量检索库保持一致。</p>
</li>
<li>
<p>当选择Faiss作为向量检索库时，请随意选择一个专有网络。</p>
</li>
</ul>
<ol start="4">
<li>
<p>单击<strong>部署</strong> ，等待一段时间即可完成模型部署。当<strong>服务状态</strong> 为<strong>运行中</strong> 时，表明服务部署成功。</p>
</li>
<li>
<p>获取VPC地址调用的服务访问地址和Token。</p>
</li>
</ol>
<pre><code>1. 单击服务名称，进入**服务详情** 页面。

2. 在**基本信息** 区域，单击**查看调用信息** 。

3. 在**调用信息** 对话框的**VPC地址调用** 页签，获取服务访问地址和Token，并保存到本地。
</code></pre>
<h4 id="42-部署rag服务并启动webui">4.2 部署RAG服务并启动WebUI</h4>
<p>PAI提供了最方便快捷的部署方式，您可以直接在EAS中选择指定的镜像即可部署RAG的WebUI服务，具体操作步骤如下。更多关于RAG链路的详细内容，请参见GitHub开源代码。</p>
<p><a href="https://github.com/aigc-apps/PAI-RAG">https://github.com/aigc-apps/PAI-RAG</a></p>
<ol>
<li>
<p>在<strong>PAI-EAS 模型在线服务</strong> 页面，单击<strong>部署服务</strong> ，在弹出对话框中，选择<strong>自定义部署</strong> ，然后单击<strong>确定</strong> 。</p>
</li>
<li>
<p>在<strong>部署服务</strong> 页面，配置以下关键参数。</p>
</li>
</ol>
<p><strong>参数</strong></p>
<p><strong>描述</strong></p>
<p><strong>服务名称</strong></p>
<p>自定义服务名称。本案例使用的示例值为：<strong>chatbot_langchain_vpc</strong> 。</p>
<p><strong>部署方式</strong></p>
<p>选择<strong>镜像部署AI-Web应用</strong> 。</p>
<p><strong>镜像选择</strong></p>
<p>在<strong>PAI平台镜像</strong> 列表中选择<strong>chatbot-langchain</strong> ，镜像版本选择<strong>1.0</strong> 。</p>
<p>由于版本迭代迅速，部署时镜像版本选择最高版本即可。</p>
<p><strong>运行命令</strong></p>
<ul>
<li>
<p>服务运行命令：uvicorn webui:app &ndash;host 0.0.0.0 &ndash;port 8000</p>
</li>
<li>
<p>端口号输入：<strong>8000</strong> 。</p>
</li>
</ul>
<p><strong>资源组种类</strong></p>
<p>选择<strong>公共资源组</strong> 。</p>
<p><strong>资源配置方法</strong></p>
<ul>
<li>
<p>必须选择<strong>GPU</strong> 类型，实例规格推荐使用<strong>ml.gu7i.c16m60.1-gu30</strong> （性价比最高）。</p>
</li>
<li>
<p>额外系统盘：<strong>70G</strong> 。</p>
</li>
</ul>
<p><strong>专有网络配置</strong></p>
<ul>
<li>
<p>当选择Hologres、AnalyticDB for PostgreSQL或ElasticSearch作为向量检索库时，请确保所配置的专有网络与选定的向量检索库保持一致。</p>
</li>
<li>
<p>当选择Faiss作为向量检索库时，与对话模型推理服务配置的专有网络保持一致。</p>
</li>
</ul>
<ol start="3">
<li>
<p>单击<strong>部署</strong> ，等待一段时间即可完成模型部署。当<strong>服务状态</strong> 为<strong>运行中</strong> 时，表明服务部署成功。</p>
</li>
<li>
<p>服务部署成功后，单击<strong>服务方式</strong> 列下的<strong>查看Web应用</strong> ，进入WebUI页面。</p>
</li>
</ol>
<h4 id="5-步骤三在webui页面进行知识问答">5. 步骤三：在WebUI页面进行知识问答</h4>
<p>具体步骤三，请参见文档</p>
<p>目前RAG对话系统支持集成两类知识库文档类型：HTML和TEXT。以下内容为您介绍两种文档类型支持的产品能力。</p>
<h4 id="51-场景一面向html文档的检索增强大模型对话系统">5.1 场景一：面向HTML文档的检索增强大模型对话系统</h4>
<p>####<strong>1、自定义配置参数</strong></p>
<p>如下图所示，您可以在RAG服务WebUI界面的<strong>Settings</strong> 选项卡中，配置本系统的参数，并测试连接是否正常。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/mmbiz_png/tXo0Z4jTLeK0yxQWxiaBWcQApgSRuZPZ5YGwHCia11pZfNaukrTDiag6CMibK93W4ul3ricfYdHj4TwxjMLrfYz1FIA/640?wx_fmt=png&amp;from=appmsg" alt=""></p>
<p>具体参数配置详情如下：</p>
<p>*<strong>Emebdding Model</strong> ：支持选择5种embedding model和对应的维度（Emebdding Dimension）。推荐使用SGPT-125M-weightedmean-nli-bitfit。</p>
<p>*<strong>Emebdding Dimension</strong> ：选择Emebdding Model后，系统会自动进行配置，无需手动操作。</p>
<p>*<strong>EAS Url</strong> ：配置为步骤二中获取的服务访问地址。</p>
<p>*<strong>EAS Token</strong> ：配置为步骤二中获取的服务Token。</p>
<ul>
<li>配置Vector Store。不同的向量检索库对应的参数配置详情如下：</li>
</ul>
<p><strong>Hologres</strong></p>
<ul>
<li>
<p>Host：配置为步骤一中查询到的Hologres调用信息。</p>
</li>
<li>
<p>Database：配置为步骤一中创建的数据库名称。</p>
</li>
<li>
<p>User：配置为步骤一中创建的自定义用户的账号。</p>
</li>
<li>
<p>Password：配置为步骤一中创建的自定义用户的密码。</p>
</li>
<li>
<p>Table：配置数据库表名称，例如test_table。</p>
</li>
</ul>
<p>以上参数配置完成后，单击<strong>Connect Hologres</strong> ，验证Hologres实例是否连接正常。</p>
<p><strong>AnalyticDB</strong></p>
<ul>
<li>Host：配置为步骤一中获取的数据库连接外网地址。</li>
</ul>
<p><strong>说明</strong></p>
<p>如果在同一个VPC内连接实例，只需使用内网地址。</p>
<ul>
<li>
<p>User：配置为步骤一中创建的数据库账号。</p>
</li>
<li>
<p>Database：配置为数据库名称。您可以登录数据库后进行查看，如何登录数据库，请参见登录数据库。</p>
</li>
</ul>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/mmbiz_png/tXo0Z4jTLeK0yxQWxiaBWcQApgSRuZPZ5PQbEiarKPKTcwyVdJeiaaeVXZdGGf1sCiaibFynsdOtr4F2y7xhNGREDLA/640?wx_fmt=png&amp;from=appmsg" alt=""></p>
<ul>
<li>
<p>Password：配置为步骤一中创建的数据库密码。</p>
</li>
<li>
<p>CollectionName：用户自定义的数据库表名称。例如<strong>langchain_document</strong> 。</p>
</li>
<li>
<p>Pre_delete：是否删除已存在的Database。取值为：True（删除）、False（不删除）。</p>
</li>
</ul>
<p><strong>ElasticSearch</strong></p>
<ul>
<li>
<p>URL：配置为步骤一中获取的私网地址和端口，格式为：http://私网地址:端口</p>
</li>
<li>
<p>Index：用户自定义的索引名称。</p>
</li>
<li>
<p>User：配置为步骤一中创建ElasticSearch实例时配置的登录名。</p>
</li>
<li>
<p>Password：配置为步骤一中创建ElasticSearch实例时配置的登录密码。</p>
</li>
</ul>
<p>以上参数配置完成后，单击<strong>Connect ElasticSearch</strong> ，验证ElasticSearch实例是否连接正常。</p>
<p><strong>Faiss</strong></p>
<ul>
<li>
<p>Path：用户自定义的数据库文件夹名称。例如<strong>faiss_path</strong> 。</p>
</li>
<li>
<p>Index：用户自定义的索引文件夹名称。例如<strong>faiss_index</strong> 。</p>
</li>
</ul>
<p>此外，您还可以在<strong>Settings</strong> 选项卡中上传JSON配置文件，并单击<strong>Parse config</strong> 来解析配置文件。解析成功后，WebUI页面将自动根据配置文件内容填写相应配置。不同的向量检索库对应的配置文件内容如下：</p>
<p><strong>Hologres</strong></p>
<pre><code>{  
  &quot;embedding&quot;: {  
    &quot;model_dir&quot;: &quot;embedding_model/&quot;,  
    &quot;embedding_model&quot;: &quot;SGPT-125M-weightedmean-nli-bitfit&quot;,  
    &quot;embedding_dimension&quot;: 768  
  },  
  
  &quot;EASCfg&quot;: {  
    &quot;url&quot;: &quot;http://xx.vpc.pai-eas.aliyuncs.com/api/predict/chatllm_demo_glm2&quot;,  
    &quot;token&quot;: &quot;xxxxxxx==&quot;  
  },  
  
  &quot;vector_store&quot;: &quot;Hologres&quot;,  
  
  &quot;HOLOCfg&quot;: {  
    &quot;PG_HOST&quot;: &quot;hgpostcn-cn.xxxxxx.vpc.hologres.aliyuncs.com&quot;,  
    &quot;PG_PORT&quot;: &quot;80&quot;,  
    &quot;PG_DATABASE&quot;: &quot;langchain&quot;,  
    &quot;PG_USER&quot;: &quot;user&quot;,  
    &quot;PG_PASSWORD&quot;: &quot;password&quot;  
  }  
}
</code></pre>
<p><strong>AnalyticDB</strong></p>
<pre><code>{  
  &quot;embedding&quot;: {  
    &quot;model_dir&quot;: &quot;embedding_model/&quot;,  
    &quot;embedding_model&quot;: &quot;SGPT-125M-weightedmean-nli-bitfit&quot;,  
    &quot;embedding_dimension&quot;: 768  
  },  
  
  &quot;EASCfg&quot;: {  
    &quot;url&quot;: &quot;http://xx.pai-eas.aliyuncs.com/api/predict/chatllm_demo_glm2&quot;,  
    &quot;token&quot;: &quot;xxxxxxx==&quot;  
  },  
  
  &quot;vector_store&quot;: &quot;AnalyticDB&quot;,  
  
  &quot;ADBCfg&quot;: {  
    &quot;PG_HOST&quot;: &quot;gp.xxxxx.rds.aliyuncs.com&quot;,  
    &quot;PG_USER&quot;: &quot;xxxxxxx&quot;,   
    &quot;PG_DATABASE&quot;: &quot;xxxxxxx&quot;,   
    &quot;PG_COLLECTION_NAME&quot;: &quot;xxxxxxx&quot;,  
    &quot;PG_PASSWORD&quot;: &quot;passwordxxxx&quot;  
  }  
}
</code></pre>
<p><strong>ElasticSearch</strong></p>
<pre><code>{  
  &quot;embedding&quot;: {  
    &quot;model_dir&quot;: &quot;embedding_model/&quot;,  
    &quot;embedding_model&quot;: &quot;SGPT-125M-weightedmean-nli-bitfit&quot;,  
    &quot;embedding_dimension&quot;: 768  
  },  
  
  &quot;EASCfg&quot;: {  
    &quot;url&quot;: &quot;http://xx.pai-eas.aliyuncs.com/api/predict/chatllm_demo_glm2&quot;,  
    &quot;token&quot;: &quot;xxxxxxx==&quot;  
  },  
  
  &quot;vector_store&quot;: &quot;ElasticSearch&quot;,  
  
  &quot;ElasticSearchCfg&quot;: {  
    &quot;ES_URL&quot;: &quot;http://es-cn-xxx.elasticsearch.aliyuncs.com:9200&quot;,  
    &quot;ES_USER&quot;: &quot;elastic&quot;,  
    &quot;ES_PASSWORD&quot;: &quot;password&quot;,  
    &quot;ES_INDEX&quot;: &quot;test_index&quot;  
  }  
}
</code></pre>
<p><strong>Faiss</strong></p>
<pre><code>{  
  &quot;embedding&quot;: {  
    &quot;model_dir&quot;: &quot;embedding_model/&quot;,  
    &quot;embedding_model&quot;: &quot;SGPT-125M-weightedmean-nli-bitfit&quot;,  
    &quot;embedding_dimension&quot;: 768  
  },  
  
  &quot;EASCfg&quot;: {  
    &quot;url&quot;: &quot;http://xx.vpc.pai-eas.aliyuncs.com/api/predict/chatllm_demo_glm2&quot;,  
    &quot;token&quot;: &quot;xxxxxxx==&quot;  
  },  
  
  &quot;vector_store&quot;: &quot;FAISS&quot;,  
  
  &quot;FAISS&quot;: {  
    &quot;index_path&quot;: &quot;faiss_index&quot;,  
    &quot;index_name&quot;: &quot;faiss_file&quot;  
  }  
}
</code></pre>
<p>其中：<strong>EASCfg</strong> 即为在步骤二中获取的对话模型推理服务的访问地址和Token。<strong>HOLOCfg</strong> 即为Hologres的相关配置。您可以参考WebUI界面参数说明进行配置。</p>
<p>####<strong>2、上传HTML文件</strong></p>
<p>在RAG服务的WebUI页面中，切换到<strong>Upload</strong> 选项卡中，在该页面配置以下参数，并上传HTML类型的用户知识库文档。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/mmbiz_jpg/tXo0Z4jTLeK0yxQWxiaBWcQApgSRuZPZ577gBqwMGmJot60rRfmTVUKv2kYTrSHibevFmVvwOqia4xPAVadOqTic1A/640?wx_fmt=jpeg&amp;from=appmsg" alt=""></p>
<p>其中：</p>
<p><em><strong>Which type of files do you want to upload?</strong> ：选择</em><em>html</em>* 。</p>
<p><em><strong>Files</strong> ：参考界面操作指引上传知识库文档，然后单击</em><em>Upload</em>* 。支持多文件上传，文件格式为：HTML。</p>
<p><em><strong>Directory</strong> ：参考界面操作指引上传包含知识库文档的目录，然后单击</em><em>Upload</em>* 。</p>
<p>您可以使用PAI提供的rag_chatbot_test_doc.html知识库文档进行Mock测试。</p>
<p>####<strong>3、文档清洗与切分</strong></p>
<p>在构建向量检索库前，系统会对您所上传的HTML源码文件进行文本处理。包括<strong>数据清洗</strong> （文本提取、超链替换等）和<strong>语义切块</strong> （chunk）。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/mmbiz_jpg/tXo0Z4jTLeK0yxQWxiaBWcQApgSRuZPZ5V4nMbBoCnyVfl871kXiadbI0B2C4Mbo5D3oN4sFKDFCibwBuu1hxCvGw/640?wx_fmt=jpeg&amp;from=appmsg" alt=""></p>
<p>您可以通过设置<strong>rank label</strong> 参数，来控制语义切块的粒度大小，默认为h2。</p>
<p>####<strong>4、QA提取</strong></p>
<p>将原始的知识文档输入LLM，输出针对该文档的若干QA对，并在后续构建数据库时，用生成的问题Q作为检索index，答案A作为文档内容返回。该方法对知识文档进行语义级别的细粒度划分，使得检索到的文档与用户Query相关度更高，提高信噪比。但QA提取方法依赖于LLM的能力，因此会带来更高的计算开销和时间开销。常用的QA提取方法包括 RefGPT等。</p>
<p>Tricks：对于高信息量、长上下文的知识文档，适合采用QA Extraction方法，将文档划分为更细粒度、信噪比更高的QA子文档。</p>
<p>本方案支持针对<strong>官方文档</strong> 自动<strong>提取QA</strong> 对，以获得更好的检索和回答效果。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/mmbiz_jpg/tXo0Z4jTLeK0yxQWxiaBWcQApgSRuZPZ5XXbu99fCUdfttZNwrntQIC0BdbtagNoZpPdZFKMwia99gOcJxdLhQOg/640?wx_fmt=jpeg&amp;from=appmsg" alt=""></p>
<p>以阿里云官方技术文档为例，为您展示提取得到的QA数据。系统会根据您上传的知识库文档自动提取QA对，示例如下：</p>
<pre><code>Q1:  
授予OSS和DLF权限 前提条件 如何添加AliyunOSSFullAccess和AliyunDLFFullAccess权限以使用DLF服务？  
A1:  
要添加AliyunOSSFullAccess和AliyunDLFFullAccess权限，请按照以下步骤操作： 1. 访问阿里云控制台，登录您的账号。 2. 进入“安全管理”模块，点击“权限管理”。 3. 选择“用户”，点击“添加权限”。 4. 选择“阿里云OSS”，选择“OSS访问控制”，然后点击“添加权限”。 5. 在“授权策略”中，添加“阿里云DLF服务”的授权策略，并设置为“FullAccess”。 6. 完成上述步骤后，您的阿里云OSS和DLF服务将获得AliyunOSSFullAccess和AliyunDLFFullAccess权限。  
  
Q2:  
授予OSS和DLF权限 操作步骤 在集群信息页面，如何找到Worker RAM角色？  
A2:  
在集群信息页面，您需要单击集群资源页签，然后找到Worker RAM角色所在行的链接。
</code></pre>
<p>系统提取的QA对会自动写入向量检索库中。以Hologres为例，您可以在Hologres中查看写入的数据和向量等信息。具体操作，请参见表。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/mmbiz_png/tXo0Z4jTLeK0yxQWxiaBWcQApgSRuZPZ5z7Vxf2rVXUehicOlXThKEWMAEkasUiaZdyUwELnkzWKkwwmCib5tVlmjQ/640?wx_fmt=png&amp;from=appmsg" alt=""></p>
<p>####<strong>5、向量数据库召回</strong></p>
<p>在RAG服务的WebUI页面的<strong>Chat</strong> 选项卡中，选择<strong>Vector Store</strong> 问答策略，即为直接从向量数据库中召回Top-K条相似结果。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/mmbiz_jpg/tXo0Z4jTLeK0yxQWxiaBWcQApgSRuZPZ5YFBkgwIUN3siblyzZTOLm8ZLxLu2tVmDUDxib2ibnGwJ3FKjLa3SicC7Mg/640?wx_fmt=jpeg&amp;from=appmsg" alt=""></p>
<p>支持在界面<strong>Parameters of Vector Retrieval</strong> 中设置向量检索库返回的相似结果条数，默认为3。</p>
<p>####<strong>6、关键词检索召回</strong></p>
<p>尽管在大多数复杂场景下，向量检索都能有较好的表现，但在某些语料稀缺的垂直领域，或要求准确匹配的场景，向量检索方法可能不如传统的稀疏检索方法。稀疏检索方法通过对用户Query与知识文档的关键词重叠度来进行排序，因此检索过程更为简单和高效。常见的稀疏检索方法有BM25、TF-IDF等。</p>
<p>Tricks: 在语料稀缺的私有垂直领域（如内部产品文档），或要求准确匹配的场景，建议使用稀疏检索算法。</p>
<p>在本步骤，PAI提供了BM25等关键词检索召回算法来完成稀疏检索召回操作。您可以在页面中选择是否使用关键词检索召回。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/mmbiz_jpg/tXo0Z4jTLeK0yxQWxiaBWcQApgSRuZPZ59drtxqiaR7cfqHZUNV50oKh4qIChOObbABOIcFMhqUGF9eVnqloJB7g/640?wx_fmt=jpeg&amp;from=appmsg" alt=""></p>
<p>####<strong>7、多路召回融合</strong></p>
<p>向量数据库召回和关键词检索召回具有各自的优势和不足，因此综合二者的召回结果能够提高整体的检索准确性和效率。倒数排序融合（Reciprocal Rank Fusion, RRF）算法将使用不同相关性指标得到的多个排名结果集组合成单个结果集。其基本原则是，在不同搜索策略中始终出现在顶部位置的文档，可能与用户Query相关性更高，因此应该在合并结果中排名更高。RRF算法的具体计算过程详见Cormack, et al.。</p>
<p>Tricks: 一般场景下，建议使用RRF方法组合稀疏检索和向量检索的结果，以得到相关性指标更多维的综合结果。</p>
<p>当您选择使用关键词检索召回，即Keyword Retrieval选择Keyword Ensembled时，PAI将默认使用RRF算法对向量数据库召回结果和关键词检索召回结果进行多路召回融合。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/mmbiz_jpg/tXo0Z4jTLeK0yxQWxiaBWcQApgSRuZPZ59drtxqiaR7cfqHZUNV50oKh4qIChOObbABOIcFMhqUGF9eVnqloJB7g/640?wx_fmt=jpeg&amp;from=appmsg" alt=""></p>
<p>####<strong>8、检索结果</strong> Re-Rank</p>
<p>大多数向量数据库单独使用向量模型作为检索模型。向量模型通常为Bi-Encoder模型，它生成给定文本的embedding向量，通过计算两个文本的embedding向量之间的余弦距离可以得到这两个文本的语义相似度。向量模型计算效率高，但准确度较低，有时会为了计算效率会牺牲一定程度的准确性。</p>
<p>因此我们可以对向量模型第一次召回的Top-K结果进行精度更高的Re-Rank操作，以得到相关度更高、更准确的知识文档。Re-Rank模型是Cross-Encoder模型，它同时接受两个文本句子作为输入，并输出句子对的相似度分数。Cross-Encoder模型精度高，但不适合大规模数据，因此可以采用先试用向量模型粗排得到Top-100相关文档，再使用Re-Rank模型精排的方式，得到与用户Query最相关的文档。常用的开源Re-Rank模型有Cohere-rerank、BAAI/bge-reranker-base、BAAI/bge-reranker-large等。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/mmbiz_jpg/tXo0Z4jTLeK0yxQWxiaBWcQApgSRuZPZ5icnmBoTfwfgO5usnrqzyvsPFPtAWBsOrLCQpq9554KyMRdFtsErICyQ/640?wx_fmt=jpeg&amp;from=appmsg" alt=""></p>
<p>Tricks: 在计算资源充足的情况下，一般都建议使用向量检索与Re-Rank重排相结合的检索方式。通常第一次向量检索取Top-100，最终精排取Top-3（视具体需求调整）</p>
<p>在本步骤中，PAI提供了BAAI/bge-reranker-base、BAAI/bge-reranker-large等开源模型来完成Re-Rank操作。您可以在页面中选择是否对检索结果进行Re-Rank，以及具体使用的Re-Rank模型。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/mmbiz_jpg/tXo0Z4jTLeK0yxQWxiaBWcQApgSRuZPZ5eG3tUVCNEILuyUicRoJ0BMuxZggzOzvB4fN2v7S85ge7lpkm4NfXxVw/640?wx_fmt=jpeg&amp;from=appmsg" alt=""></p>
<p>####<strong>9、问答Prompt构建</strong></p>
<p>Liu, et al.的研究表明，在长上下文输入中，LLM更容易关注输入首部和尾部的信息，而遗漏位于输入中部的信息。因此，为了提高RAG对话的准确度，可以对知识文档与用户 Query 进行重排序，使LLM更关注与用户Query相关度更高的文档。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/mmbiz_jpg/tXo0Z4jTLeK0yxQWxiaBWcQApgSRuZPZ5z1r7zaxWL66oCMEQFjlPPdDah4GV09X3VFBRhiaTIXqQgclBqeTKrAw/640?wx_fmt=jpeg&amp;from=appmsg" alt=""></p>
<p>Tricks: 建议以「参考文档」-「Prompt模板」-「用户Query」的顺序构建LLM输入，建议在「Prompt模板」中说明「答案中不允许包含编造内容」等 instruction。</p>
<p>本步骤中，PAI 基于上述研究对检索到的知识文档与用户 Query 进行了排序整理，并形成了最终输入大模型前的 Prompt 。在RAG服务的WebUI页面的Chat选项卡中，PAI 提供了多种不同的Prompt策略，上述策略被置为默认策略（Simple），您可以选择合适的预定义Prompt模板或输入自定义的Prompt模板以获得更好的推理效果。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/mmbiz_jpg/tXo0Z4jTLeK0yxQWxiaBWcQApgSRuZPZ5ojM3RkviaQia4ahDvflSwCTHS3AKeF1X0efB3ZPcMT7rA9dibefoSpmLg/640?wx_fmt=jpeg&amp;from=appmsg" alt=""></p>
<p>####<strong>10、LLM知识问答</strong></p>
<p>本方案支持以下三种不同的问答方式，输入您的问题后，具体推理效果如下：</p>
<p><strong>VectorStore</strong></p>
<p>直接从向量数据库中检索并返回TopK条相似结果。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/mmbiz_jpg/tXo0Z4jTLeK0yxQWxiaBWcQApgSRuZPZ5W6wJ9JDUFy0UgkgX4M30J8u7MNBtFHUknyMnibYmo1kh0Rfl6h8lYRg/640?wx_fmt=jpeg&amp;from=appmsg" alt=""></p>
<p><strong>LLM</strong></p>
<p>直接与EAS-LLM对话，返回大模型的回答。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/mmbiz_jpg/tXo0Z4jTLeK0yxQWxiaBWcQApgSRuZPZ5yH8HibRNzqScCmVy3fwhXKbXfoI5mwDz2WXTHDnhMhoyju5xLmpzsgQ/640?wx_fmt=jpeg&amp;from=appmsg" alt=""></p>
<p><strong>Vector Store + LLM</strong></p>
<p>将检索返回的结果与用户的问题组装成可自定义的Prompt，送入EAS-LLM服务，从中获取问答结果。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/mmbiz_jpg/tXo0Z4jTLeK0yxQWxiaBWcQApgSRuZPZ5QXgHvhhNlqxaZJicjufibx0K0m99HMABsPNB571q6S4Qib8uAkDa4JJuA/640?wx_fmt=jpeg&amp;from=appmsg" alt=""></p>
<h4 id="52场景二面向text文档的检索增强大模型对话系统">5.2场景二：面向TEXT文档的检索增强大模型对话系统</h4>
<p>####<strong>1、参数自定义配置</strong></p>
<p>如下图所示，您可以在RAG服务WebUI界面的<strong>Settings</strong> 选项卡中，配置本系统的参数，并测试连接是否正常。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/mmbiz_jpg/tXo0Z4jTLeK0yxQWxiaBWcQApgSRuZPZ5iazib5L0YrHtxLicq0QX3oSHUx83bsTJJV87ew4iaIewhKoyx7BhegQRSg/640?wx_fmt=jpeg&amp;from=appmsg" alt=""></p>
<p>具体参数配置详情，请参见1、自定义配置参数。</p>
<p>####<strong>2、上传TEXT文件</strong></p>
<p>在RAG服务的WebUI页面中，切换到<strong>Upload</strong> 选项卡中，在该页面配置以下参数，并上传TXT类型的用户知识库文档。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/mmbiz_jpg/tXo0Z4jTLeK0yxQWxiaBWcQApgSRuZPZ5fnqUibqPzLeVQKyz7downCzFevPK0uJ7ibIKW6nFd5TUl1icLoShsmibRg/640?wx_fmt=jpeg&amp;from=appmsg" alt=""></p>
<p>其中：</p>
<p><em><strong>Which type of files do you want to upload?</strong> ：选择</em><em>text</em>* 。</p>
<p><em><strong>Files</strong> ：参考界面操作指引上传知识库文档，然后单击</em><em>Upload</em>* 。支持多文件上传，文件格式为：txt、doc、docx、pdf和md等。</p>
<p><em><strong>Directory</strong> ：参考界面操作指引上传包含知识库文档的目录，然后单击</em><em>Upload</em>* 。</p>
<p>您可以使用PAI提供的rag_chatbot_test_doc.txt知识库文档进行Mock测试。</p>
<p>####<strong>3、文档清洗与切分</strong></p>
<p>在构建向量检索库前，系统会对您所上传的知识文档进行预处理。包括<strong>数据清洗</strong> （文本提取、超链替换等）和<strong>切块</strong> （chunk）。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/mmbiz_jpg/tXo0Z4jTLeK0yxQWxiaBWcQApgSRuZPZ5V4nMbBoCnyVfl871kXiadbI0B2C4Mbo5D3oN4sFKDFCibwBuu1hxCvGw/640?wx_fmt=jpeg&amp;from=appmsg" alt=""></p>
<p>您可以通过设置以下两个参数来控制文档切块粒度的大小：</p>
<p>*<strong>Chunk Size</strong> ：指定每个分块的大小，单位为字节，默认为200。</p>
<p>*<strong>Chunk Overlap</strong> ：表示相邻分块之间的重叠量，默认为0。</p>
<p>####<strong>4、向量数据库召回</strong></p>
<p>在RAG服务的WebUI页面的<strong>Chat</strong> 选项卡中，选择<strong>Vector Store</strong> 问答策略，即为直接从向量数据库中召回Top-K条相似结果。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/mmbiz_jpg/tXo0Z4jTLeK0yxQWxiaBWcQApgSRuZPZ5YFBkgwIUN3siblyzZTOLm8ZLxLu2tVmDUDxib2ibnGwJ3FKjLa3SicC7Mg/640?wx_fmt=jpeg&amp;from=appmsg" alt=""></p>
<p>支持在界面<strong>Parameters of Vector Retrieval</strong> 中设置向量检索库返回的相似结果条数，默认为3。</p>
<p>####<strong>5、关键词检索召回</strong></p>
<p>尽管在大多数复杂场景下，向量检索都能有较好的表现，但在某些语料稀缺的垂直领域，或要求准确匹配的场景，向量检索方法可能不如传统的稀疏检索方法。稀疏检索方法通过对用户Query与知识文档的关键词重叠度来进行排序，因此检索过程更为简单和高效。常见的稀疏检索方法有BM25、TF-IDF等。</p>
<p>Tricks: 在语料稀缺的私有垂直领域（如内部产品文档），或要求准确匹配的场景，建议使用稀疏检索算法。</p>
<p>在本步骤，PAI提供了BM25等关键词检索召回算法来完成稀疏检索召回操作。您可以在页面中选择是否使用关键词检索召回。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/mmbiz_jpg/tXo0Z4jTLeK0yxQWxiaBWcQApgSRuZPZ59drtxqiaR7cfqHZUNV50oKh4qIChOObbABOIcFMhqUGF9eVnqloJB7g/640?wx_fmt=jpeg&amp;from=appmsg" alt=""></p>
<p>####<strong>6、多路召回融合</strong></p>
<p>向量数据库召回和关键词检索召回具有各自的优势和不足，因此综合二者的召回结果能够提高整体的检索准确性和效率。倒数排序融合（Reciprocal Rank Fusion, RRF）算法将使用不同相关性指标得到的多个排名结果集组合成单个结果集。其基本原则是，在不同搜索策略中始终出现在顶部位置的文档，可能与用户Query相关性更高，因此应该在合并结果中排名更高。RRF算法的具体计算过程详见Cormack, et al.。</p>
<p>Tricks: 一般场景下，建议使用RRF方法组合稀疏检索和向量检索的结果，以得到相关性指标更多维的综合结果。</p>
<p>当您选择使用关键词检索召回，即Keyword Retrieval选择Keyword Ensembled时，PAI将默认使用RRF算法对向量数据库召回结果和关键词检索召回结果进行多路召回融合。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/mmbiz_jpg/tXo0Z4jTLeK0yxQWxiaBWcQApgSRuZPZ59drtxqiaR7cfqHZUNV50oKh4qIChOObbABOIcFMhqUGF9eVnqloJB7g/640?wx_fmt=jpeg&amp;from=appmsg" alt=""></p>
<p>####<strong>7、检索结果Re-Rank</strong></p>
<p>大多数向量数据库单独使用向量模型作为检索模型。向量模型通常为Bi-Encoder模型，它生成给定文本的embedding向量，通过计算两个文本的embedding向量之间的余弦距离可以得到这两个文本的语义相似度。向量模型计算效率高，但准确度较低，有时会为了计算效率会牺牲一定程度的准确性。</p>
<p>因此我们可以对向量模型第一次召回的Top-K结果进行精度更高的Re-Rank操作，以得到相关度更高、更准确的知识文档。Re-Rank模型是Cross-Encoder模型，它同时接受两个文本句子作为输入，并输出句子对的相似度分数。Cross-Encoder模型精度高，但不适合大规模数据，因此可以采用先试用向量模型粗排得到Top-100相关文档，再使用Re-Rank模型精排的方式，得到与用户Query最相关的文档。常用的开源Re-Rank模型有Cohere-rerank、BAAI/bge-reranker-base、BAAI/bge-reranker-large等。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/mmbiz_jpg/tXo0Z4jTLeK0yxQWxiaBWcQApgSRuZPZ5icnmBoTfwfgO5usnrqzyvsPFPtAWBsOrLCQpq9554KyMRdFtsErICyQ/640?wx_fmt=jpeg&amp;from=appmsg" alt=""></p>
<p>Tricks: 在计算资源充足的情况下，一般都建议使用向量检索与Re-Rank重排相结合的检索方式。通常第一次向量检索取Top-100，最终精排取Top-3（视具体需求调整）</p>
<p>在本步骤中，PAI提供了BAAI/bge-reranker-base、BAAI/bge-reranker-large等开源模型来完成Re-Rank操作。您可以在页面中选择是否对检索结果进行Re-Rank，以及具体使用的Re-Rank模型。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/mmbiz_jpg/tXo0Z4jTLeK0yxQWxiaBWcQApgSRuZPZ5eG3tUVCNEILuyUicRoJ0BMuxZggzOzvB4fN2v7S85ge7lpkm4NfXxVw/640?wx_fmt=jpeg&amp;from=appmsg" alt=""></p>
<p>####<strong>8、问答Prompt构建</strong></p>
<p>Liu, et al.的研究表明，在长上下文输入中，LLM更容易关注输入首部和尾部的信息，而遗漏位于输入中部的信息。因此，为了提高RAG对话的准确度，可以对知识文档与用户 Query 进行重排序，使LLM更关注与用户Query相关度更高的文档。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/mmbiz_jpg/tXo0Z4jTLeK0yxQWxiaBWcQApgSRuZPZ5z1r7zaxWL66oCMEQFjlPPdDah4GV09X3VFBRhiaTIXqQgclBqeTKrAw/640?wx_fmt=jpeg&amp;from=appmsg" alt=""></p>
<p>Tricks: 建议以「参考文档」-「Prompt模板」-「用户Query」的顺序构建LLM输入，建议在「Prompt模板」中说明「答案中不允许包含编造内容」等 instruction。</p>
<p>本步骤中，PAI 基于上述研究对检索到的知识文档与用户 Query 进行了排序整理，并形成了最终输入大模型前的 Prompt 。在RAG服务的WebUI页面的Chat选项卡中，PAI 提供了多种不同的Prompt策略，上述策略被置为默认策略（Simple），您可以选择合适的预定义Prompt模板或输入自定义的Prompt模板以获得更好的推理效果。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/mmbiz_jpg/tXo0Z4jTLeK0yxQWxiaBWcQApgSRuZPZ5ojM3RkviaQia4ahDvflSwCTHS3AKeF1X0efB3ZPcMT7rA9dibefoSpmLg/640?wx_fmt=jpeg&amp;from=appmsg" alt=""></p>
<p>####<strong>9、LLM知识问答</strong></p>
<p>本方案支持以下三种不同的问答方式，输入您的问题后，具体推理效果如下：</p>
<p><strong>VectorStore</strong></p>
<p>直接从向量数据库中检索并返回TopK条相似结果。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/mmbiz_jpg/tXo0Z4jTLeK0yxQWxiaBWcQApgSRuZPZ5INoSKZj3TrhZ9T1PwECcUmoZGPDo5kxjM1jI9Qzx7wLBIicfzI2icg1g/640?wx_fmt=jpeg&amp;from=appmsg" alt=""></p>
<p><strong>LLM</strong></p>
<p>直接与EAS-LLM对话，返回大模型的回答。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/mmbiz_jpg/tXo0Z4jTLeK0yxQWxiaBWcQApgSRuZPZ5tibuEkAFWvuTeuERdH7ZwwGAfcIOic53ffm6n9tpjXaoiaHo93jB9DEDg/640?wx_fmt=jpeg&amp;from=appmsg" alt=""></p>
<p><strong>Vector Store + LLM</strong></p>
<p>将检索返回的结果与用户的问题输入已选择的Prompt模板中，送入EAS-LLM服务，从中获取问答结果。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/mmbiz_jpg/tXo0Z4jTLeK0yxQWxiaBWcQApgSRuZPZ5YQaXpY0sdCibfDGBVOM3NgEiaiaEJ65oaQgd1joo0TVy0X8fhPvSjh4kw/640?wx_fmt=jpeg&amp;from=appmsg" alt=""></p>
<p>更多AI工具，参考<a href="https://ai123.869hr.uk/">Github-AI123</a>，<a href="https://ai123.869hr.uk/">国内AI123</a></p>



          </div>

<<<<<<< HEAD

=======
 可扫如下微信二维码加好友
>>>>>>> HEAD@{1}

<p><img src="/images/aitools/2024/03/qrcode_for_gh_dde1b429630d_258.jpg" alt=""></p>

        </article>

      </div>
    </div>
  </div>
</section>
        </div>
    </div>
    </main>




<script type='text/javascript' src='/assets/js/jquery.ui.touch-punch.min-0.2.2.js' id='jqueryui-touch-js'></script>
<script type='text/javascript' src='/assets/js/clipboard.min-5.6.2.js' id='clipboard-js'></script>
<script type='text/javascript' src='/assets/js/tooltip-extend.js' id='iplaycode-nav-js'></script>
<script type='text/javascript' id='popper-js-extra'>
 

var theme = {"ajaxurl":"","addico":"https:\/\/nav.baidu.cn\/wp-content\/themes\/onenav\/images\/add.png","order":"asc","formpostion":"top","defaultclass":"io-grey-mode","isCustomize":"1","icourl":"","icopng":".png","urlformat":"1","customizemax":"10","newWindow":"0","lazyload":"1","minNav":"1","loading":"1","hotWords":"baidu","classColumns":" col-sm-6 col-md-4 col-xl-5a col-xxl-6a ","apikey":"TWpBeU1UVTNOekk1TWpVMEIvZ1M2bFVIQllUMmxsV1dZelkxQTVPVzB3UW04eldGQmxhM3BNWW14bVNtWk4="};
 
</script>
<script type='text/javascript' src='/assets/js/popper.min.js' id='popper-js'></script>
<script type='text/javascript' src='/assets/js/bootstrap.min-4.3.1.js' id='bootstrap-js'></script>
<script type='text/javascript' src='/assets/js/theia-sticky-sidebar-1.5.0.js' id='sidebar-js'></script>
<script type='text/javascript' src='/assets/js/lazyload.min-12.4.0.js' id='lazyload-js'></script>
<script type='text/javascript' src='/assets/js/fancybox.min-3.5.7.js' id='lightbox-js-js'></script>

<script type='text/javascript' src='/assets/js/app-anim.js' id='appanim-js'></script>

<script type="text/javascript">
    $(document).ready(function(){
        var siteWelcome = $('#loading');
        siteWelcome.addClass('close');
        setTimeout(function() {
            siteWelcome.remove();
        }, 600);
    });
</script>
<script>        
    $(document).ready(function(){
        setTimeout(function () {
            if ($('a.smooth[href="' + window.location.hash + '"]')[0]) {
                $('a.smooth[href="' + window.location.hash + '"]').click();
            }else if (window.location.hash != '') {
                $("html, body").animate({
                    scrollTop: $(window.location.hash).offset().top - 90
                }, {
                    duration: 500,
                    easing: "swing"
                });
            }
        }, 300);
        $(document).on('click','a.smooth',function(ev) {
            if($('#sidebar').hasClass('show') && !$(this).hasClass('change-href')){
                $('#sidebar').modal('toggle');
            }
            if($(this).attr("href").substr(0, 1) == "#"){
                $("html, body").animate({
                    scrollTop: $($(this).attr("href")).offset().top - 90
                }, {
                    duration: 500,
                    easing: "swing"
                });
            }
            if($(this).hasClass('go-search-btn')){
                $('#search-text').focus();
            }
            if(!$(this).hasClass('change-href')){
                var menu =  $("a"+$(this).attr("href"));
                menu.click();
                toTarget(menu.parent().parent(),true,true);
            }
        });
        $(document).on('click','a.tab-noajax',function(ev) {
            var url = $(this).data('link');
            if(url)
                $(this).parents('.d-flex.flex-fill.flex-tab').children('.btn-move.tab-move').show().attr('href', url);
            else
                $(this).parents('.d-flex.flex-fill.flex-tab').children('.btn-move.tab-move').hide();
        });
        
    });
</script>

<script>

(function(){
    if(document.cookie.replace(/(?:(?:^|.*;\s*)night\s*\=\s*([^;]*).*$)|^.*$/, "$1") === ''){
        if(new Date().getHours() > 22 || new Date().getHours() < 6){
            document.body.classList.remove('io-black-mode');
            document.body.classList.add('io-grey-mode');
            document.cookie = "night=1;path=/";
            console.log('夜间模式开启');
        }else{
            document.body.classList.remove('night');
            document.cookie = "night=0;path=/";
            console.log('夜间模式关闭');
        }
    }else{
        var night = document.cookie.replace(/(?:(?:^|.*;\s*)night\s*\=\s*([^;]*).*$)|^.*$/, "$1") || '0';
        if(night == '0'){
            document.body.classList.remove('night');
        }else if(night == '1'){
            document.body.classList.add('night');
        }
    }
})();

$("#search-bg").css("background", "linear-gradient(#e2c4c4, #d8d8d8)");   
function switchNightMode(){
    var night = document.cookie.replace(/(?:(?:^|.*;\s*)night\s*\=\s*([^;]*).*$)|^.*$/, "$1") || '0';
    if(night == '0'){
	$("#search-bg").css("background", "linear-gradient(#e2c4c4, #d8d8d8)");
        document.body.classList.remove('io-grey-mode');
        document.body.classList.add('io-black-mode');
        document.cookie = "night=1;path=/"
        console.log(' ');
        $(".switch-dark-mode").attr("data-original-title","日间模式");
        $(".mode-ico").removeClass("icon-night");
        $(".mode-ico").addClass("icon-light");
    }else{
	$("#search-bg").css("background", "linear-gradient(#4f4040, #1b1d1f)");
        document.body.classList.remove('io-black-mode');
        document.body.classList.add('io-grey-mode');
        document.cookie = "night=0;path=/"
        console.log(' ');
        $(".switch-dark-mode").attr("data-original-title","夜间模式");
        $(".mode-ico").removeClass("icon-light");
        $(".mode-ico").addClass("icon-night");
    }
}
</script>


<script>
    var newsContainer = document.getElementById('news-container');
    var newsItems = document.getElementsByClassName('news-item');
    var currentItem = 0;

    setInterval(function() {
        
        newsItems[currentItem].classList.remove('show');
        newsItems[currentItem].style.transform = 'translateY(-20px)';
        
        currentItem = (currentItem + 1) % newsItems.length;
        newsItems[currentItem].style.transform = 'translateY(' + (newsContainer.offsetHeight - 20) + 'px)';
        setTimeout(function() {
            newsItems[currentItem].classList.add('show');
        }, 500);
    }, 8000);
</script>

</body>
</html>


