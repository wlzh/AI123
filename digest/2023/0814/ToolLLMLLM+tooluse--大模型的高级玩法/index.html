

<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="theme-color" content="#f9f9f9" />

	<title>ToolLLM=LLM&#43;tooluse--大模型的高级玩法 作者： AINLP 来源： AINLP 提纲 1 简介 2 背景‍ 3 构建ToolBench 3.1 收集API跟tool‍ 3.2 指令Instruction生成‍‍‍‍‍‍ 3.3 解决路径solution生成 4 实验‍‍‍‍‍ 4.1 ToolEval 4.2 实验设置‍ 4.3 实验结论 5 总结 参考文献 图1: ToolLLM论文信息  | AI123| ai工具网址导航,ai最新产品</title>
	<link rel="shortcut icon" href="/assets/images/favicon.png" />
    <meta name="keywords" content="chatgpt,AI,AI聊天,AI文本生成,AI绘画,AI编程,AI电商" />
    <meta name="description" content="AI123 网址导航 | 免费chatgpt 汇集各类先进的人工智能产品，旨在帮助用户更快速地了解和使用这些产品,轻松地浏览不同领域的AI产品，包括语音识别、图像处理、自然语言处理。" />
    
    <meta name="baidu-site-verification" content="codeva-LoCoq3KOzQ" />
    
    <link rel="stylesheet" id="block-library-css"
        href="/assets/css/block-library.min-5.6.2.css" type="text/css" media="all" />
    <link rel="stylesheet" id="iconfont-css" href="/assets/css/iconfont-3.03029.1.css"
        type="text/css" media="all" />

    
    <link href="/scss/style.min.css" rel="stylesheet" />
    
		    <link rel="stylesheet" id="iowen-css" href="/assets/css/style-3.03029.1.css"
        type="text/css" media="all" />
    <link rel="stylesheet" id="custom-css" href="/assets/css/custom-style.css"
        type="text/css" media="all" />
		
		<link rel="stylesheet" href=/plugins/font-awesome/css/font-awesome.min.css />


    <link rel="stylesheet" id="fortawesome-css" href="/assets/fontawesome-5.15.4/css/all.min.css" type="text/css" />


    <script type="text/javascript" src="/assets/js/jquery.min-3.2.1.js" id="jquery-js"></script>
    <script type="text/javascript" src="/assets/js/content-search.js"  id="content-search-js"></script>

    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2634092855285462"
     crossorigin="anonymous"></script>

	
    <script>
        

		var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?8450bc732b2a86f7e4aec4ebd9fd8252";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();

        
    </script>
    

    
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-7071W80M2K"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-7071W80M2K');
    </script>

</head>


    <div class="page-container">
	
	<div id="sidebar" class="sticky sidebar-nav fade animate-nav" style="width: 170px">
        
            <div class="modal-dialog h-100 sidebar-nav-inner">
                <div class="sidebar-logo border-bottom border-color">
                    
                    <div class="logo overflow-hidden">
                        <a href="https://ai123.869hr.uk/" class="logo-expanded">
                            <img src="/assets/images/bt8-expand-light.png" height="40" class="logo-light"
                                alt="AI123| ai工具网址导航,ai最新产品">
                            <img src="/assets/images/bt8-expand-dark.png" height="40" class="logo-dark d-none"
                                alt="AI123| ai工具网址导航,ai最新产品">
                        </a>
                        <a href="https://ai123.869hr.uk/" class="logo-collapsed">
                            <img src="/assets/images/bt.png" height="40" class="logo-light"
                                alt="AI123| ai工具网址导航,ai最新产品">
                            <img src="/assets/images/bt.png" height="40" class="logo-dark d-none"
                                alt="AI123| ai工具网址导航,ai最新产品">
                        </a>
                    </div>
                    
                </div>
                <div class="sidebar-menu flex-fill">
                    <div class="sidebar-scroll">
                        <div class="sidebar-menu-inner">
                            <ul>
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#00834a9dd147b04c5d53d4368cdb0b57" class="smooth">
                                            <i class="fas fa-sun fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>本月热门</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#db0311e7ecfedd24d157f0ceb4a0897f" class="smooth">
                                            <i class="fas fa-star-and-crescent fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>热门网站</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#21b5cbb2c769010fec3ce029a5f8a4a3" class="smooth">
                                            <i class="far fa-star fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>国内热门</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#8310718935e8ec25ce0350de01e3f7dc" class="smooth">
                                            <i class="fas fa-phone fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>对话工具</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#d58e850d9115797306c2edf61ac6ddd8" class="smooth">
                                            <i class="fas fa-newspaper fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>写作</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#2a7418a5f8f1ca4e054364a9300657df" class="smooth">
                                            <i class="fas fa-image fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>图像生成</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#7808a68ee1b34dab43011429a12de19e" class="smooth">
                                            <i class="fas fa-image fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>图像处理</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#6729afc51f5ac49a828812fa0eb0c82f" class="smooth">
                                            <i class="fas fa-video fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>音视频</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#e5ce844860451fff3faf3d8f8894971d" class="smooth">
                                            <i class="fas fa-music fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>音乐生成</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#db53804b7d726967c58fcc8c9ca03d27" class="smooth">
                                            <i class="fas fa-language fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>办公</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#47b7af9547e034d28fe6f6d439968ac8" class="smooth">
                                            <i class="fas fa-copy fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>提示词</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#41282bf95e43c64d579757573a03cdde" class="smooth">
                                            <i class="fas fa-code fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>编程</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#fd71852fd52d5e18ef4f9a252f1eac58" class="smooth">
                                            <i class="fas fa-search fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>AI搜索</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#81b1637fbe47625dbdf2094acd3b6683" class="smooth">
                                            <i class="fas fa-language fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>文本翻译</span>
                                        </a>
                                    </li>
                                    
                                
                                    
                                    <li class="sidebar-item">
                                        <a href="/#2e9ba3fa6e1ed0e9311b3e97f97f9a40" class="smooth">
                                            <i class="fas fa-book fa-lg fa-lg icon-fw icon-lg mr-2"></i>
                                            <span>学习网站</span>
                                        </a>
                                    </li>
                                    
                                
                            </ul>           
                        </div>
                    </div>
                </div>
                <div class="border-top py-2 border-color">
                    <div class="flex-bottom">
                        <ul>
			    <li id="menu-item-212"
                                 class="menu-item menu-item-type-custom menu-item-object-custom menu-item-212 sidebar-item">
                                 <a href="#friendlink" class="smooth">
                                     <i class="fab fa-staylinked icon-fw icon-lg mr-2"></i>
                                     <span>友情链接</span>
                                 </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>


<div class="flex-fill grid-bg">
    <div class="big-header-banner">
        <div id="header" class="page-header sticky">
            <div class="navbar navbar-expand-md">
                <div class="container-fluid p-0">

                    <a href="" class="navbar-brand d-md-none" title="AI123| ai工具网址导航,ai最新产品">
                        <img src="/assets/images/bt.png" class="logo-light"
                            alt="AI123| ai工具网址导航,ai最新产品">
                        <img src="/assets/images/bt.png" class="logo-dark d-none"
                            alt="AI123| ai工具网址导航,ai最新产品">
                    </a>

                    <div class="collapse navbar-collapse order-2 order-md-1">
                        <div class="header-mini-btn">
                            <label>
                                <input id="mini-button" type="checkbox">
                                <svg viewbox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                                    <path class="line--1" d="M0 40h62c18 0 18-20-17 5L31 55"></path>
                                    <path class="line--2" d="M0 50h80"></path>
                                    <path class="line--3" d="M0 60h62c18 0 18 20-17-5L31 45"></path>
                                </svg>
                            </label>

                        </div>

                        <ul class="navbar-nav site-menu" style="margin-right: 16px;">
                        
			<li >
				<a href="/">
                                    <i class="fa fa-home fa-lg mr-2"></i>
                                    <span>首页</span>
                                </a>
				<ul class="sub-menu">
				
				</ul>
			    </li>
			
			</ul>

                        
                        <div class="rounded-circle weather">
                            <div id="he-plugin-simple" style="display: contents;"></div>
                            <script>WIDGET = {
                                    CONFIG: {
                                        "modules": "01234",
                                        "background": 5,
                                        "tmpColor": "008000",
                                        "tmpSize": 14,
                                        "cityColor": "008000",
                                        "citySize": 14,
                                        "aqiColor": "#008000",
                                        "aqiSize": 14,
                                        "weatherIconSize": 24,
                                        "alertIconSize": 18,
                                        "padding": "10px 10px 10px 10px",
                                        "shadow": "1",
                                        "language": "auto",
                                        "borderRadius": 5,
                                        "fixed": "false",
                                        "vertical": "middle",
                                        "horizontal": "left",
                                        "key": "085791e805a24491b43b06cf58ab31e7"
                                    }
                                }
                            </script>
                            <script src="https://widget.qweather.net/simple/static/js/he-simple-common.js?v=2.0"></script>
                        </div>
                        
                    </div>

                    <ul class="nav navbar-menu text-xs order-1 order-md-2">
                        
                        
                        <li class="nav-item mr-3 mr-lg-0 d-none d-lg-block">
                            <script>
                                fetch('https://v1.hitokoto.cn')
                                    .then(response => response.json())
                                    .then(data => {
                                    const hitokoto = document.getElementById('hitokoto_text')
                                    hitokoto.href = 'https://hitokoto.cn/?uuid=' + data.uuid
                                    hitokoto.innerText = data.hitokoto
                                    })
                                    .catch(console.error)
                            </script>                           
                            <div id="hitokoto"><a href="#" target="_blank" id="hitokoto_text">疏影横斜水清浅，暗香浮动月黄昏。</a></div>
                        </li>
                        
                        
                        <li class="nav-search ml-3 ml-md-4">
                            <a href="javascript:" data-toggle="modal" data-target="#search-modal"><i
                                    class="iconfont icon-search icon-2x"></i></a>
                        </li>
                        <li class="nav-item d-md-none mobile-menu ml-3 ml-md-4">
                            <a href="javascript:" id="sidebar-switch" data-toggle="modal"
                                data-target="#sidebar"><i class="iconfont icon-classification icon-2x"></i></a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="placeholder" style="height:74px"></div>
    </div>




<body class="page-body boxed-container  io-grey-mode">
    <main role="main" class="flex-shrink-0">
    <div class="container">
        
        <div class="content">
            <style>
    body{
	    background: #f9f9f9;
	}

    h1, h2, h3, h4, h5, h6 {
        margin-top: 1.5rem;
        margin-bottom: 1.5rem;
    }


 
@media (min-width: 1000px) {
  .container, .container-sm {
    max-width: 800px;
  }
}

</style>

<div class="featured-post-content">

    <a href="/digest/" class="featured-post-title">
       AI 文摘
    </a>

</div>

<section class="blog-single">
  <div class="container">
    <div class="row">

      <div class="col-lg-12 order-1 order-lg-2">
        <article class="single-blog">
          <p class="title">ToolLLM=LLM&#43;tooluse--大模型的高级玩法</p>
            <br/>
          <ul class="meta">
            <li>
              By <a href=https://ai123.869hr.uk/about>AI123</a>
            </li>
            <li>
              <i class="fa fa-clock-o"></i>
              August 14, 2023 - 2 min read
            </li>
          </ul>

          <div class="_1NCGf">
              <img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/mmbiz_jpg/86qxNQYXKpsQO2YvhI8asLAbYTOO7jhiaIiavmNjjj3lVspia0UDXqS40lOe5yItvGiabRSDmSccoDlYjrBEibLJQSw/640?wx_fmt=jpeg" width="640" >
          </div>
            <br>
            <br>
            <br>
          
          <div class="single-blog-content">
            <p>作者： AINLP  来源： <a href="https://mp.weixin.qq.com/s/c_kqqufmZV4pMWzHqvr8Zg">AINLP</a></p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/mmbiz_jpg/nW2ZPfuYqSJuK8UUBxdZXj1c20hUg374YPgXibgDGytAy87YxvVk4WCRFWrdKJPshStrlPJp4vGEGUQodxt7ibOw/640?wx_fmt=jpeg" alt=""></p>
<p><strong>提纲</strong></p>
<p>1 简介</p>
<p>2 背景‍</p>
<p>3 构建ToolBench</p>
<p>3.1 收集API跟tool‍</p>
<p>3.2 指令Instruction生成‍‍‍‍‍‍</p>
<p>3.3 解决路径solution生成</p>
<p>4 实验‍‍‍‍‍</p>
<p>4.1 ToolEval</p>
<p>4.2 实验设置‍</p>
<p>4.3 实验结论</p>
<p>5 总结</p>
<p>参考文献</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/mmbiz_jpg/86qxNQYXKpsQO2YvhI8asLAbYTOO7jhiaEmlibzH3UFkfHO8HE67EKsFowqR16F1CM5ugIylD0xjUAedf77mdeoQ/640?wx_fmt=jpeg" alt=""></p>
<p>图1: ToolLLM论文信息‍‍‍‍‍‍</p>
<p>####<strong>1 简介</strong></p>
<p>大家可以明显感受到，目前开源大模型更新迭代的速度可谓日新月异，在基础语言任务的表现进步非常明显，<strong>但是执行高级任务的能力依旧有明显不足，例如遵循人类任务指令去调用外部工具（tool）。造成这种现象的原因是目前开源大模型的instruction tuning很大程度集中于基础语言任务而不是关于关于工具的使用。</strong> 相对于开源大模型，目前被认为处于领先地位的大模型（例如chatgpt，GPT4等），虽然闭源，但是却有非常卓越的工具使用能力。于是为了促进开源大模型工具使用能力的建设，<strong>研究人员提出了一个通用的tool-use框架ToolLLM，包括构建数据集ToolBench，设计自动评估方案ToolEval，并基于此训练了一个语言模型ToolLLaMA，在工具使用的表现足以媲美ChatGPT。</strong></p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/mmbiz_jpg/86qxNQYXKpsQO2YvhI8asLAbYTOO7jhia95tsZKRCgric1e7OpNaP78XrHHSiaE04LSjicQ4RujLH6hmgDqKaylTfg/640?wx_fmt=jpeg" alt=""></p>
<p>图2: ToolBench构建过程，两个模型训练方式以及具体推理过程‍‍‍‍‍‍‍‍‍</p>
<p>####<strong>2 背景</strong></p>
<p><strong>Tool learning旨在释放大规模语言模型的能力，通过跟诸多API进行有效交互进而完成复杂任务。</strong> 目前这方面已经有些工作了，但是依旧不能完全激发LLM的工具使用能力，这是由于以下几个缺陷所导致的。</p>
<p>a) APIS受限，无法覆盖真实世界的API，所涉及的API数量有限，或者缺乏多样性。</p>
<p>b) 场景受限，目前的工具都被限制到每个instruction只对应一个工具tool，而真实场景下的一个复杂的指令是需要多个tool一同才能解决的。而且不少场景都提前给指令制定了响应的API，但是真实场景下该调用哪个API也是需要考虑的。</p>
<p>3)规划跟推理能力受限， 目前工作大多采用简单的prompt engineering来进行模型推理，难以激发LLM本身的能力，在处理复杂指令时容易失败。</p>
<p>####<strong>3 构建ToolBench‍‍‍‍‍‍‍‍</strong></p>
<p>ToolLLM收集了一个高质量的instruction-tuning数据集ToolBench，具体构建过程如下。</p>
<p>####<strong>3.1 收集API跟tool</strong></p>
<p>RapidAPI Hub RapidAPI是一个API市场，里面包含了成千上万个真实世界的API，涉及多种多样的服务跟数据源。里面所有的API会有两个分类，按照粗粒度可以分为49个类别（categories），例如体育，金融，天气等等，也有更加细粒度的类别信息（collections），例如中文API，数据集API等等。除了API外，Rapid上还有更高级的工具tool，每个工具都可能包括多个API。对于每个工具，研究人员爬取工具tool相应的名字跟描述，URL以及所涉及的所有API信息。对于每个API，会记录对应的名字跟描述，访问方式，必须参数，可选参数，访问格式，执行状态代码以及一个成功调用返回样例。</p>
<p><strong>研究人员从RapidAPI收集了10853个tool跟53190个API的相关信息</strong> 。但是鉴于这些API的质量跟可靠性参差不齐，需要对其进行过滤。首先对每个API进行基本的测试，移除不可用的那部分，然后再去调用API去获得相应的返回结果，由此判断响应耗时跟结果质量，<strong>最终只保留了其中3451个高质量的tool跟16464个API</strong> 。</p>
<p>除此之外，API有时的返回结果可能太过冗余，容易超出LLM的输入长度限制，需要进行压缩。鉴于每个API都有固定的输出格式，当API响应结果长度超过2048个token，研究人员将tool的相关信息以及3个压缩样例融入prompt中，通过ChatGPT对响应结果进行压缩，如果压缩后的结果长度依旧超过限制，那就保留前面的2048个token。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/mmbiz_jpg/86qxNQYXKpsQO2YvhI8asLAbYTOO7jhiaiawLW8Sbk2SqkWlzHMYZibgaBqtUFlKUt5yu2q8fNgtm06ldeI28E3qA/640?wx_fmt=jpeg" alt=""></p>
<p>图3: ToolBench收集的API信息跟其他数据集的对比‍‍‍</p>
<p>####<strong>3.2 指令Instruction生成</strong></p>
<p>高质量的指令有两方面要求，其一是多样性，保证LLM可以支持各种各种的API使用场景，从而增强模型的泛化性跟鲁棒性，其二是多工具用法，去模拟真实世界的场景，从而提升模型的实用性跟灵活性。</p>
<p>通过前面的操作可以获得一个API集合SAPI，<strong>每次通过抽样从中抽取一部分API，然后利用ChatGPT，去生成新的指令以及对应的多个API</strong> （生成的指令跟这多个API是相互对应的关系，要完成该指令需要依次调用这多个API才能实现，并且这多个API都应该属于被抽样的API集合），从而构造相应的指令-API对。这里给ChatGPT的输入包括3个部分，</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/mmbiz_jpg/86qxNQYXKpsQO2YvhI8asLAbYTOO7jhiaODAMjKrqQxKdxr2K8t69esDn5lSUa3jMplRyfPf7R9W4ODAeBW6ibVA/640?wx_fmt=jpeg" alt=""></p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/mmbiz_jpg/86qxNQYXKpsQO2YvhI8asLAbYTOO7jhiapmkpGE1liaLCeh2zazj9nicqwR3Eibzj5g8XxMXbuqh59aLoLfnmzkCKQ/640?wx_fmt=jpeg" alt=""></p>
<p>图4: API介绍以及指令生成过程</p>
<ol>
<li></li>
<li>
<p>a)<strong>指令生成prompt，让语言模型按照指令要求生成多个新的指令以及对应的API。</strong> 根据场景的不同分为三种类型，其一是single-tool instructions(I1)，每个指令只对应一个tool，其二是intra-category multi-tool instructions(I2)，每个指令对应同个category里多个tool的API，其三是intra-collection multi-tool instructions(I3)，每个指令对应同个collection里多个tool的API。（具体样例见下文）</p>
</li>
</ol>
<hr>
<pre><code>#I1指令
You will be provided with a tool, its description, all of the tool’s available API functions, the descriptions of these API functions, and the parameters required for each API function. Your task involves creating 10 varied, innovative, and detailed user queries that employ multiple API functions of a tool. For instance, if the tool ‘climate news’ has three API calls - ‘get all climate change news’,
‘look up climate today’, and ‘historical climate’, your query should articulate something akin to: first, determine today’s weather, then verify how often it rains in Ohio in September, and finally, find news about climate change to help me understand whether the climate will change anytime soon. This query exemplifies how to utilize all API calls of ‘climate news’. A query that only uses one API call will not be accepted. Additionally, you must incorporate the input parameters required for each API call. To achieve this, generate random information for required parameters such as IP address, location, coordinates, etc. For instance, don’t merely say ‘an address’, provide the exact road and district names. Don’t just mention ‘a product’, specify wearables, milk, a blue blanket, a pan, etc. Don’t refer to ‘my company’, invent a company name instead. The first seven of the ten queries should be very specific. Each single query should combine all API call usages in different ways and include the necessary parameters. Note that you shouldn’t ask ‘which API to use’, rather, simply state your needs that can be addressed by these APIs. You should also avoid asking for the input parameters required by the API call, but instead directly provide the parameter in your query. The final three queries should be complex and lengthy, describing a complicated scenario where all the API calls can be utilized to provide assistance within a single query. You should first think about possible related API combinations, then give your query. Related apis are apis that can be used for a give query; those related apis have to strictly come from the provided api names. For each query, there should be multiple related apis; for different queries, overlap of related apis should be as little as possible. Deliver your response in this format: [Query1: ......, ‘related apis’:[api1, api2, api3...],Query2: ......, ‘related apis’:[api4, api5, api6...],Query3: ......, ‘related apis’:[api1, api7, api9...], ...]
#I2跟I3指令
You will be provided with several tools, tool descriptions, all of each tool’s available API functions, the descriptions of these API functions, and the parameters required for each API function. Your task involves creating 10 varied, innovative, and detailed user queries that employ API functions of multiple tools. For instance, given three tools ‘nba news’, ‘cat-facts’, and ‘hotels’: ‘nba news’ has API functions ‘Get individual NBA source news’ and ‘Get all NBA news’, ‘cat-facts’ has API functions ‘Get all facts about cats’ and ‘Get a random fact about cats’, ‘hotels’ has API functions
‘properties/get-details (Deprecated)’, ‘properties/list (Deprecated)’ and ‘locations/v3/search’. Your query should articulate something akin to: ‘I want to name my newborn cat after Kobe and host a party to celebrate its birth. Get me some cat facts and NBA news to gather inspirations for the cat name. Also, find a proper hotel around my house in Houston Downtown for the party.’ This query exemplifies how to utilize API calls of all the given tools. A query that uses API calls of only one tool will not be accepted. Additionally, you must incorporate the input parameters required for each API call. To achieve this, generate random information for required parameters such as IP address, location, coordinates, etc. For instance, don’t merely say ‘an address’, provide the exact road and district names. Don’t just mention ‘a product’, specify wearables, milk, a blue blanket, a pan, etc. Don’t refer to ‘my company’, invent a company name instead. The first seven of the ten queries should be very specific. Each single query should combine API calls of different tools in various ways and include the necessary parameters. Note that you shouldn’t ask ‘which API to use’, rather, simply state your needs that can be addressed by these APIs. You should also avoid asking for the input parameters required by the API call, but instead directly provide the parameters in your query. The final three queries should be complex and lengthy, describing a complicated scenario where all the provided API calls can be utilized to provide assistance within a single query. You should first think about possible related API combinations, then give your query. Related APIs are APIs that can be used for a given query; those related APIs have to strictly come from the provided API names. For each query, there should be multiple related APIs; for different queries, overlap of related APIs should be as little as possible. Deliver your response in this format: [Query1: ......, ‘related apis’:[[tool name, api name], [tool name, api name], [tool name, api name]...],Query2: ......, ‘related apis’:[[tool name, api name], [tool name, api name], [tool name, api name]...],Query3: ......, ‘related apis’:[[tool name, api name], [tool name, api name], [tool name, api name]...], ...]
</code></pre>
<p>b) 抽取的tool跟对应的API的信息，方便语言模型理解这些tool跟API的功能以及对应关系。ChatGPT生成的API信息就是从这里获取，生成的结果也不应超过这些范围。</p>
<p>c) 3个in-context样例，这些样例都是由人类专家所撰写。总共有12/36个不同样例，分别对应单工具跟多工具场景，每次从中随机抽取3个。</p>
<hr>
<pre><code>For example, with tool ASCII Art, the given api names are ‘figlet’, ‘list figlet styles’, ‘cowsay’, ‘list cowsay styles’, ‘matheq’.
Some sample queries and related apis would be:
“Query”: “Need to create an ASCII art representation of a mathematical equation. The equation
is ‘y = mx + c’, where m and c are constants. Help me generate the ASCII art for this equation. Also please generate an ASCII art representation of the text ‘Newton’s Second Law of Motion’.”, “related apis”: [’figlet’, ‘list figlet styles’, ‘matheq’]
“Query”: “Working on a research paper on cows and need to include ASCII art representations of various cows. Can you first retrieve available ASCII art styles for cows? Then, can you generate ASCII art for cows like the Jersey, Holstein, and Guernsey? Finally, I want the cow to say ‘Moo!’ in
the ASCII art.”, “related apis”: [’figlet’, ‘list figlet styles’, ‘cowsay’, ‘list cowsay styles’]
“Query”: “I’m writing a blog post on ASCII art and need to include some examples. Can you generate ASCII art for the following strings: ‘ASCII’, ‘art’, and ‘gallery’? You can first retrieve available
figlet styles and then generate ASCII art for the strings using the styles.”, “related apis”: [’figlet’, ‘list figlet styles’]
“Query”: “Greetings! I’m putting together a quirky slideshow about our furry friends and need your
help to sprinkle some ASCII art goodness. Could you kindly fetch me the catalog of ASCII art styles available for animals? Also, I’m particularly keen on featuring ASCII art for creatures like pandas, cows, elephants, and penguins. And if they could say something cute like ‘Hello!’ or ‘Hugs!’ in the ASCII art, that would be purr-fect!”, “related apis”: [’figlet’, ‘list figlet styles’, ‘cowsay’, ‘list cowsay styles’]
</code></pre>
<p>利用ChatGPT生成指令后，通过进一步过滤后，最终只保留超过20万个高质量（Instruction, APIs）对，其中I1，I2，I3的数据分别有87413，84815跟25251个。这部分数据可以用来训练API检索模块，用于在利用指令作为输入，去检索返回相关的API。</p>
<p>####<strong>3.3 解决路径solution生成</strong></p>
<p>给定任务指令后，利用ChatGPT去搜寻一个可用有效的动作序列{a1,…aN}，这样一个多步决策过程可以转化为一个基于ChatGPT的多轮对话。<strong>在每个时刻t，模型基于已有的动作a跟观测r生成新的动作，即ChatGPT(at|{a1,r1,…,at-1,rt-1},Instruction)。</strong> 这里的动作有严格的格式，包括三个部分，其一是Thought：模型的思考过程，其二是需要调用的API名，其三是API对应的参数，从而能利用生成的动作去调用对应的API，进而得到响应结果rt。</p>
<p>对于每个指令Instruction，通过抽样获取一个API集合，将该集合里的API信息喂给ChatGPT，让ChatGPT根据Instruction要求去选择性调用这些API，从而搜索得到一条解决问题的路径。除了前面搜集的API外，还定义了两个新的API函数，分别是Finish with Final Answer跟Finish by Giving up，前者表示任务指令已经完成，并且会关联一个参数对应任务的具体答案，后者则表示在当前的搜索路径下，根据提供的API已经无法完成对应的任务指令了。</p>
<p>通过之前的调研，研究人员发现利用传统的CoT或者ReACT在给定Instruction条件下很难探索出一条有效解决路径(由于error propagation跟limited exploration)，从而让这个数据集构建变得困难。于是研究人员提出了一种决策算法DFSDT，该算法支持语言模型去评估多个不同推理路径，从而选择更具潜力的路径，或者移除那些不可能成功的节点（想法跟之前提到的tree of thought接近）。基于这种方式构造了一个包含12657个(Instruction，solution)对的数据集。</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/mmbiz_jpg/86qxNQYXKpsQO2YvhI8asLAbYTOO7jhiaIiavmNjjj3lVspia0UDXqS40lOe5yItvGiabRSDmSccoDlYjrBEibLJQSw/640?wx_fmt=jpeg" alt=""></p>
<p>图5: DFSDT跟其他方法对比‍‍</p>
<p>####<strong>4 实验‍‍‍‍‍‍‍‍‍‍‍‍‍</strong></p>
<p>####<strong>4.1 ToolEval</strong></p>
<p>有了数据集之后，就可以去评测不同语言模型遵循指令调用外部工具的能力，考虑到人工评测耗时耗力，于是研究人员提出了一个<strong>高效的自动评测工具ToolEval</strong> ，主要包括以下2个指标。</p>
<p>a) Pass rate 在有限动作次数的条件下成功完成指令的比例，用于评估语言模型对于指令的执行能力，也被视作一个使用工具能力的基本要求。这一个指标可以通过解决路径最终节点是否调用Finish with Final Answer这个API来自动判断。</p>
<p>b) Win rate 在给定统一指令下，比较两个不同解决路径的优劣性。这个指标通过调用ChatGPT来实现，文中也将ChatGPT的标注结果跟人工标注结果进行比对，发现两者间有75.8%的高相关性。</p>
<p>####<strong>4.2 实验设置</strong></p>
<p>在完成数据集的构建跟评估方式的定义后，<strong>研究人员利用指令生成数据集，基于Bert-Base为基底，以双塔模型的结构训练了一个API检索器，用于根据Instruction去检索得到合适的API，同时利用解决路径数据集以LLaMA 7B位基底微调得到了一个语言模型ToolLLaMA，并在这个过程中将文本长度限制由2048扩展到8192。</strong></p>
<p>对于语言模型ToolLLaMA，应该有足够的泛化能力，遇到新的指令Instruction跟API也要有良好的表现。于是研究人员会在三种不同场景下去评估模型的泛化能力。</p>
<p>a) Inst. 来自训练集中已有工具tool的新指令Instruction，也就是训练集已经见过这些tool，但是没见过这个指令Instruction。</p>
<p>b) Tool 来自同一个训练集同一个已有类别category下的新工具tool，也就是训练集已经见过这个类别下的其他tool，但没见过这些tool。</p>
<p>c) Cat 来自于不同新类别category（训练集没出现）的新工具tool，也就是训练集没见过这些不同类别的其他tool，也没见过这些属于多个类别的tool。</p>
<p>同时考虑到前面构建的指令生成数据集也有三种类型，所以总有以下6种实验设置，后续评估模型的工具使用能力也就在这6种设置下分别进行。(看似组合应该有3*3=9种，但是有的组合并不合理，所以最终只有6种。)</p>
<p>####<strong>4.3 实验结论</strong></p>
<p>a)<strong>训练好的API Retriever效果显著超过基于稀疏检索跟稠密检索的方法，并且可以看出单工具指令(I1)相对更加简单，比起多工具指令（I2, I3）。</strong></p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/mmbiz_jpg/86qxNQYXKpsQO2YvhI8asLAbYTOO7jhiaOKZDGNp685NfzhGfnOYgbN0uVLQDQ9FfaibRtWibMP1uHYS9EkrVO0sg/640?wx_fmt=jpeg" alt=""></p>
<p>图6: API Retriever表现‍‍‍‍‍</p>
<p><strong>b) ToolLLaMA的工具使用能力显著优于其他传统方法，那些在指令集上微调过的模型（Vicuna, Alpaca）的指令执行能力并不能推广到工具使用的场景。同时这也能说明ToolBench能有效激发语言模型的工具能力，使之具备掌控各种API（即便新API）去完成不同指令的能力。</strong></p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/mmbiz_jpg/86qxNQYXKpsQO2YvhI8asLAbYTOO7jhiaLn2pn1IEBFPv8dxMeMeicD8Q2ybZ4Xg9QN1jr5mt8CsD6rOibsicHlOcw/640?wx_fmt=jpeg" alt=""></p>
<p>图7: ToolLLaMA表现‍‍</p>
<p>** c) 在具体使用中，利用API Retriever来获得合适的API候选供模型选择也能取得不错效果。另外，DFSDT这种决策策略明显优于ReACT。**</p>
<p><img src="https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/mmbiz_jpg/86qxNQYXKpsQO2YvhI8asLAbYTOO7jhiahzt0RBpAQHcx6ic5SgHicCLDargTic595euFFtnQficzjOvV9hdko3s5ibw/640?wx_fmt=jpeg" alt=""></p>
<p>图8: ToolLLaMA的更多分析‍‍‍‍</p>
<p>####<strong>5 总结</strong></p>
<p><strong>这个文章的内容还是比较多的，不多看几遍很容看晕，这里在稍微总结下，主要内容包括，</strong></p>
<p>** a) 构建一个高质量instruction-tuning数据集ToolBench(针对工具使用)，包括收集了一批API跟tool，构建了一个(Instruction, APIs)的数据集，一个(Instruction, solution)数据集。**</p>
<p>** b) 提出了一个自动评估工具ToolEval。**</p>
<p>** c) 训练了一个API Reteriver跟ToolLLaMA，同时得出若干相关分析结论。**</p>
<p>** Tool use是语言模型更加高级的能力，目前也只在openai发布的模型上有比较不错的表现，而开源的大模型基本都是针对基础的语言模型去做优化，在工具使用这方面的表现很难评，所以这里发布的数据集对于后续的开源大模型在这方面的优化还是很有价值的。随着开源大模型基础能力提升到一定程度后，一定也会往更加高级的任务去突破。**</p>
<p>作为个人而言，这个工作所涉及的机构挺多的，发布的代码可读性有点难评，我自己在读这个源码的时候还是蛮吃力的，由于时间关系，也只是粗略看下，以便能更好的理解文中提及的做法。所以如果存在解读有误的地方，欢迎交流。</p>
<p><strong>参考文献</strong></p>
<p>ToolLLM: Facilitating Large Language Models to Master 16000+ Real-world APIs</p>
<p><a href="https://arxiv.org/pdf/2307.16789.pdf">https://arxiv.org/pdf/2307.16789.pdf</a></p>
<p><a href="https://github.com/OpenBMB/ToolBench">https://github.com/OpenBMB/ToolBench</a></p>
<p><strong>进技术交流群请添加AINLP小助手微信（id: ainlp2)</strong></p>
<p><strong>请备注具体方向+所用到的相关技术点</strong></p>
<pre><code>![](https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/mmbiz_jpg/nW2ZPfuYqSJADkmZ2IX6Z23znAibuEevotDMq9iaMxiapK7jfMibiauGFkycicAJEs6x5U9SGyDJZ0S1tRed9TPNUUDQ/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1)
</code></pre>
<p><strong>关于AINLP</strong></p>
<pre><code>AINLP 是一个有趣有AI的自然语言处理社区，专注于 AI、NLP、机器学习、深度学习、推荐算法等相关技术的分享，主题包括LLM、预训练模型、自动生成、文本摘要、智能问答、聊天机器人、机器翻译、知识图谱、推荐系统、计算广告、招聘信息、求职经验分享等，欢迎关注！加技术交流群请添加AINLP小助手微信(id：ainlp2)，备注工作/研究方向+加群目的。

  


  


![](https://api.allorigins.win/raw?url=https://mmbiz.qpic.cn/mmbiz_jpg/nW2ZPfuYqSKABHCqVVQkVYPrM4XY1vsd0iaeuXzyJnoFc8cibd5mYb4wdA3WMQtiaPVmr0XLZHMuVibqWncibpnTSnQ/640?wx_fmt=jpeg&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1)
</code></pre>
<p><strong>阅读至此了，分享、点赞、在看三选一吧🙏</strong></p>
<p>更多AI工具，参考<a href="https://ai123.869hr.uk/">Github-AI123</a>，<a href="https://ai123.869hr.uk/">国内AI123</a></p>



          </div>

<<<<<<< HEAD

=======
 可扫如下微信二维码加好友
>>>>>>> HEAD@{1}

<p><img src="/images/aitools/2024/03/qrcode_for_gh_dde1b429630d_258.jpg" alt=""></p>

        </article>

      </div>
    </div>
  </div>
</section>
        </div>
    </div>
    </main>




<script type='text/javascript' src='/assets/js/jquery.ui.touch-punch.min-0.2.2.js' id='jqueryui-touch-js'></script>
<script type='text/javascript' src='/assets/js/clipboard.min-5.6.2.js' id='clipboard-js'></script>
<script type='text/javascript' src='/assets/js/tooltip-extend.js' id='iplaycode-nav-js'></script>
<script type='text/javascript' id='popper-js-extra'>
 

var theme = {"ajaxurl":"","addico":"https:\/\/nav.baidu.cn\/wp-content\/themes\/onenav\/images\/add.png","order":"asc","formpostion":"top","defaultclass":"io-grey-mode","isCustomize":"1","icourl":"","icopng":".png","urlformat":"1","customizemax":"10","newWindow":"0","lazyload":"1","minNav":"1","loading":"1","hotWords":"baidu","classColumns":" col-sm-6 col-md-4 col-xl-5a col-xxl-6a ","apikey":"TWpBeU1UVTNOekk1TWpVMEIvZ1M2bFVIQllUMmxsV1dZelkxQTVPVzB3UW04eldGQmxhM3BNWW14bVNtWk4="};
 
</script>
<script type='text/javascript' src='/assets/js/popper.min.js' id='popper-js'></script>
<script type='text/javascript' src='/assets/js/bootstrap.min-4.3.1.js' id='bootstrap-js'></script>
<script type='text/javascript' src='/assets/js/theia-sticky-sidebar-1.5.0.js' id='sidebar-js'></script>
<script type='text/javascript' src='/assets/js/lazyload.min-12.4.0.js' id='lazyload-js'></script>
<script type='text/javascript' src='/assets/js/fancybox.min-3.5.7.js' id='lightbox-js-js'></script>

<script type='text/javascript' src='/assets/js/app-anim.js' id='appanim-js'></script>

<script type="text/javascript">
    $(document).ready(function(){
        var siteWelcome = $('#loading');
        siteWelcome.addClass('close');
        setTimeout(function() {
            siteWelcome.remove();
        }, 600);
    });
</script>
<script>        
    $(document).ready(function(){
        setTimeout(function () {
            if ($('a.smooth[href="' + window.location.hash + '"]')[0]) {
                $('a.smooth[href="' + window.location.hash + '"]').click();
            }else if (window.location.hash != '') {
                $("html, body").animate({
                    scrollTop: $(window.location.hash).offset().top - 90
                }, {
                    duration: 500,
                    easing: "swing"
                });
            }
        }, 300);
        $(document).on('click','a.smooth',function(ev) {
            if($('#sidebar').hasClass('show') && !$(this).hasClass('change-href')){
                $('#sidebar').modal('toggle');
            }
            if($(this).attr("href").substr(0, 1) == "#"){
                $("html, body").animate({
                    scrollTop: $($(this).attr("href")).offset().top - 90
                }, {
                    duration: 500,
                    easing: "swing"
                });
            }
            if($(this).hasClass('go-search-btn')){
                $('#search-text').focus();
            }
            if(!$(this).hasClass('change-href')){
                var menu =  $("a"+$(this).attr("href"));
                menu.click();
                toTarget(menu.parent().parent(),true,true);
            }
        });
        $(document).on('click','a.tab-noajax',function(ev) {
            var url = $(this).data('link');
            if(url)
                $(this).parents('.d-flex.flex-fill.flex-tab').children('.btn-move.tab-move').show().attr('href', url);
            else
                $(this).parents('.d-flex.flex-fill.flex-tab').children('.btn-move.tab-move').hide();
        });
        
    });
</script>

<script>

(function(){
    if(document.cookie.replace(/(?:(?:^|.*;\s*)night\s*\=\s*([^;]*).*$)|^.*$/, "$1") === ''){
        if(new Date().getHours() > 22 || new Date().getHours() < 6){
            document.body.classList.remove('io-black-mode');
            document.body.classList.add('io-grey-mode');
            document.cookie = "night=1;path=/";
            console.log('夜间模式开启');
        }else{
            document.body.classList.remove('night');
            document.cookie = "night=0;path=/";
            console.log('夜间模式关闭');
        }
    }else{
        var night = document.cookie.replace(/(?:(?:^|.*;\s*)night\s*\=\s*([^;]*).*$)|^.*$/, "$1") || '0';
        if(night == '0'){
            document.body.classList.remove('night');
        }else if(night == '1'){
            document.body.classList.add('night');
        }
    }
})();

$("#search-bg").css("background", "linear-gradient(#e2c4c4, #d8d8d8)");   
function switchNightMode(){
    var night = document.cookie.replace(/(?:(?:^|.*;\s*)night\s*\=\s*([^;]*).*$)|^.*$/, "$1") || '0';
    if(night == '0'){
	$("#search-bg").css("background", "linear-gradient(#e2c4c4, #d8d8d8)");
        document.body.classList.remove('io-grey-mode');
        document.body.classList.add('io-black-mode');
        document.cookie = "night=1;path=/"
        console.log(' ');
        $(".switch-dark-mode").attr("data-original-title","日间模式");
        $(".mode-ico").removeClass("icon-night");
        $(".mode-ico").addClass("icon-light");
    }else{
	$("#search-bg").css("background", "linear-gradient(#4f4040, #1b1d1f)");
        document.body.classList.remove('io-black-mode');
        document.body.classList.add('io-grey-mode');
        document.cookie = "night=0;path=/"
        console.log(' ');
        $(".switch-dark-mode").attr("data-original-title","夜间模式");
        $(".mode-ico").removeClass("icon-light");
        $(".mode-ico").addClass("icon-night");
    }
}
</script>


<script>
    var newsContainer = document.getElementById('news-container');
    var newsItems = document.getElementsByClassName('news-item');
    var currentItem = 0;

    setInterval(function() {
        
        newsItems[currentItem].classList.remove('show');
        newsItems[currentItem].style.transform = 'translateY(-20px)';
        
        currentItem = (currentItem + 1) % newsItems.length;
        newsItems[currentItem].style.transform = 'translateY(' + (newsContainer.offsetHeight - 20) + 'px)';
        setTimeout(function() {
            newsItems[currentItem].classList.add('show');
        }, 500);
    }, 8000);
</script>

</body>
</html>


